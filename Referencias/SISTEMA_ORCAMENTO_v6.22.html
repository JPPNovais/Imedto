<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Or√ßamento Cir√∫rgico v6.22</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 { font-size: 32px; margin-bottom: 10px; }

        /* ABAS */
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            min-width: 120px;
            padding: 18px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover { background: #e9ecef; }

        .tab.active {
            background: white;
            color: #667eea;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 4px;
            background: #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* SE√á√ïES */
        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .section h3 {
            color: #495057;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 3px solid #667eea;
            font-size: 17px;
        }

        /* FORMUL√ÅRIOS */
        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #495057;
            font-size: 13px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* CIRURGIAS SELECIONADAS - COR DESTAQUE */
        select.cirurgia-selecionada {
            background: linear-gradient(135deg, #a8e6cf 0%, #dcedc8 100%);
            border: 2px solid #4caf50;
            font-weight: 600;
            color: #1b5e20;
        }
        
        select.cirurgia-vazia {
            background: white;
            border: 2px solid #e9ecef;
            font-weight: 400;
            color: #6c757d;
        }

        .form-group input[readonly] {
            background: #f8f9fa;
            cursor: not-allowed;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }

        /* BOT√ïES */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; }
        .btn-warning { background: #ffc107; color: #000; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-sm { padding: 6px 12px; font-size: 12px; }

        .actions-btns {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        /* CHECKBOX CUSTOMIZADO */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .checkbox-group:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .checkbox-group label {
            flex: 1;
            font-weight: 600;
            color: #495057;
            font-size: 14px;
            cursor: pointer;
            margin: 0;
        }

        /* CONTADORES */
        .counter-group {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .counter-label {
            flex: 1;
            font-weight: 600;
            color: #495057;
            font-size: 13px;
        }

        .counter-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .counter-btn {
            width: 32px;
            height: 32px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .counter-btn:hover {
            background: #667eea;
            color: white;
        }

        .counter-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .counter-value {
            min-width: 40px;
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
        }

        /* CARD DE CUSTO */
        .cost-card {
            background: white;
            padding: 18px;
            border-radius: 10px;
            margin-bottom: 12px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .cost-card.disabled {
            opacity: 0.5;
            background: #f8f9fa;
        }

        .cost-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .cost-card-title {
            font-size: 15px;
            font-weight: 700;
            color: #495057;
        }

        .cost-card-subtitle {
            font-size: 11px;
            color: #6c757d;
            margin-top: 4px;
        }

        .cost-card-value {
            font-size: 22px;
            font-weight: 700;
            color: #667eea;
        }

        .cost-card-details {
            font-size: 12px;
            color: #6c757d;
            line-height: 1.6;
        }

        .cost-card-breakdown {
            display: grid;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed #e9ecef;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .breakdown-label {
            color: #6c757d;
        }

        .breakdown-value {
            font-weight: 600;
            color: #495057;
        }

        .breakdown-item.ajuste {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
        }

        .cost-card-extra {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed #e9ecef;
        }

        .cost-card-extra label {
            font-size: 12px;
            color: #6c757d;
            display: block;
            margin-bottom: 6px;
        }

        .cost-card-extra input {
            width: 140px;
            padding: 6px 10px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            text-align: right;
            font-size: 13px;
        }

        /* LISTA DE IMPLANTES */
        .implantes-lista {
            display: grid;
            gap: 10px;
            margin-bottom: 15px;
        }

        .implante-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            position: relative;
        }

        .implante-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .implante-numero {
            font-weight: 700;
            color: #667eea;
            font-size: 14px;
        }

        .btn-remove-implante {
            background: #dc3545;
            color: white;
            border: none;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-remove-implante:hover {
            background: #c82333;
        }

        .implante-fields {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 10px;
        }

        .implante-valor {
            text-align: right;
            font-weight: 700;
            color: #28a745;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            font-size: 14px;
        }

        /* TABELA DE PRODUTOS */
        .table-container {
            overflow-x: auto;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            max-height: 600px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .produtos-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            min-width: 1600px;
        }

        .produtos-table thead {
            position: sticky;
            top: 0;
            z-index: 10;
            background: #667eea;
        }

        .produtos-table th {
            padding: 12px 8px;
            text-align: center;
            color: white;
            font-weight: 600;
            border: 1px solid #5568d3;
            white-space: nowrap;
            font-size: 11px;
            min-width: 140px;
        }
        
        .produtos-table th small {
            white-space: normal;
            display: block;
            line-height: 1.3;
            max-width: 200px;
            margin: 0 auto;
            font-size: 10px;
        }

        .produtos-table th:first-child {
            position: sticky;
            left: 0;
            z-index: 11;
            background: #667eea;
            width: 200px;
            min-width: 200px;
            max-width: 200px;
            text-align: left;
        }

        .produtos-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .produtos-table tbody tr:hover {
            background: #e7f1ff;
        }

        .produtos-table td {
            padding: 6px;
            border: 1px solid #e9ecef;
            text-align: center;
            min-width: 140px;
        }

        .produtos-table td:first-child {
            position: sticky;
            left: 0;
            background: white;
            text-align: left;
            padding: 8px;
            z-index: 5;
            font-size: 11px;
            width: 200px;
            min-width: 200px;
            max-width: 200px;
        }

        .produtos-table tbody tr:nth-child(even) td:first-child {
            background: #f8f9fa;
        }

        .produtos-table tbody tr:hover td:first-child {
            background: #e7f1ff;
        }

        .editable-qtd {
            width: 60px;
            padding: 4px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            text-align: center;
            font-size: 12px;
        }

        .editable-qtd:focus {
            outline: none;
            border-color: #667eea;
            background: #f0f4ff;
        }

        .combo-col {
            background: #ffeaa7 !important;
            font-weight: 600;
            color: #000 !important;
        }

        .categoria-row {
            background: #667eea !important;
            color: white !important;
            font-weight: 700;
            font-size: 10px;
            text-transform: uppercase;
        }

        .categoria-row td {
            background: #667eea !important;
            color: white !important;
            padding: 10px 8px !important;
            border: 1px solid #5568d3 !important;
        }

        .total-row {
            background: #fff3cd !important;
            font-weight: 700;
            font-size: 13px;
            position: sticky;
            bottom: 0;
            z-index: 8;
        }

        .total-row td {
            background: #fff3cd !important;
            padding: 10px !important;
        }

        .regra-badge {
            display: inline-block;
            padding: 2px 5px;
            background: #ffc107;
            color: #000;
            border-radius: 3px;
            font-size: 9px;
            font-weight: 600;
            margin-left: 4px;
        }

        .regra-badge.soma {
            background: #28a745;
            color: white;
        }

        /* TEMPO DISPLAY */
        .tempo-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px;
            border-radius: 10px;
            text-align: center;
            margin: 18px 0;
        }

        .tempo-display .label {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .tempo-display .value {
            font-size: 28px;
            font-weight: 700;
        }

        .tempo-dual {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }

        .tempo-input-group {
            background: rgba(255,255,255,0.2);
            padding: 12px;
            border-radius: 8px;
        }

        .tempo-input-group label {
            display: block;
            font-size: 12px;
            margin-bottom: 6px;
            opacity: 0.9;
        }

        .tempo-input-group input {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            border: 2px solid white;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
        }

        /* RESUMO FINAL */
        .resumo-final {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
        }

        .resumo-final h3 {
            font-size: 22px;
            margin-bottom: 18px;
            text-align: center;
            color: white;
            border: none;
        }

        .resumo-itens {
            display: grid;
            gap: 8px;
            margin-bottom: 18px;
        }

        .resumo-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            font-size: 14px;
        }

        .resumo-total {
            border-top: 3px solid white;
            padding-top: 18px;
            margin-top: 18px;
            text-align: center;
        }

        .resumo-total .valor {
            font-size: 42px;
            font-weight: 700;
        }

        /* ALERTAS */
        .alert {
            padding: 12px 18px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid #ffc107;
        }

        /* LISTA CADASTRADA */
        .lista-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .lista-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        /* MODAL */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9998;
            animation: fadeIn 0.2s ease;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-box {
            background: white;
            border-radius: 15px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
        }

        .modal-footer {
            padding: 20px 25px;
            border-top: 2px solid #e9ecef;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .produto-modal-item {
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            padding: 12px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .produto-modal-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .produto-modal-nome {
            font-weight: 600;
            color: #495057;
            font-size: 13px;
        }

        .produto-modal-info {
            font-size: 11px;
            color: #6c757d;
            margin-top: 4px;
        }

        .produto-modal-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .produto-modal-btn {
            width: 32px;
            height: 32px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .produto-modal-btn:hover {
            background: #667eea;
            color: white;
        }

        .produto-modal-btn:active {
            transform: scale(0.95);
        }

        .produto-modal-value {
            min-width: 40px;
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #667eea;
        }

        .categoria-modal-header {
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 12px;
            text-transform: uppercase;
            margin-top: 15px;
            margin-bottom: 10px;
        }

        .categoria-modal-header:first-child {
            margin-top: 0;
        }

        /* RESPONSIVO */
        @media (max-width: 768px) {
            .tab { font-size: 11px; padding: 12px 8px; min-width: 80px; }
            .produtos-table { font-size: 10px; }
            .implante-fields { grid-template-columns: 1fr; }
        }
        
        /* ========== CSS PARA IMPRESS√ÉO E PDF ========== */
        @media print {
            /* Ocultar elementos desnecess√°rios */
            .tabs, .tab, .actions-btns, button, 
            .alert, #areaRestaurarBackup,
            .modal-overlay, .modal-box,
            nav, header, footer {
                display: none !important;
            }
            
            /* Mostrar apenas a aba de or√ßamento */
            body {
                background: white !important;
                color: black !important;
            }
            
            .tab-content {
                display: block !important;
                page-break-inside: avoid;
            }
            
            #tabOrcamento {
                display: block !important;
            }
            
            /* Cabe√ßalho do or√ßamento */
            #tabOrcamento > .section > div:first-child {
                border: 2px solid #333 !important;
                margin-bottom: 20px;
                page-break-inside: avoid;
            }
            
            /* Logo */
            #areaLogo {
                border: 1px solid #ccc !important;
            }
            
            /* Campos de entrada - mostrar valores */
            input, select, textarea {
                border: none !important;
                border-bottom: 1px solid #999 !important;
                background: transparent !important;
                color: black !important;
                font-weight: 600;
            }
            
            input[readonly] {
                border-bottom: none !important;
            }
            
            /* Resumo final */
            .resumo-final {
                border: 2px solid #333 !important;
                page-break-inside: avoid;
                margin-bottom: 20px;
            }
            
            /* Formas de pagamento */
            #formasPagamento {
                page-break-inside: avoid;
            }
            
            /* Bot√µes - ocultar */
            button {
                display: none !important;
            }
            
            /* Tabelas */
            table {
                page-break-inside: avoid;
                border-collapse: collapse !important;
            }
            
            th, td {
                border: 1px solid #333 !important;
                padding: 8px !important;
            }
            
            /* Quebras de p√°gina */
            h3, h4 {
                page-break-after: avoid;
            }
            
            /* Margens da p√°gina */
            @page {
                margin: 2cm;
                size: A4;
            }
        }
        /* MODAL DE OBSERVA√á√ÉO */
        .modal-obs-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 99999;
            justify-content: center;
            align-items: center;
        }
        
        .modal-obs-box {
            background: white;
            padding: 25px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-obs-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .modal-obs-icon {
            font-size: 32px;
        }
        
        .modal-obs-title {
            flex: 1;
            font-size: 18px;
            font-weight: 700;
            color: #495057;
        }
        
        .modal-obs-content {
            font-size: 15px;
            line-height: 1.6;
            color: #495057;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
            white-space: pre-line;
        }
        
        .modal-obs-footer {
            margin-top: 20px;
            text-align: right;
        }
    
        /* Busca de cirurgias */
        .cirurgia-busca-container {
            position: relative;
            margin-bottom: 8px;
        }
        .cirurgia-busca {
            width: 100%;
            padding: 10px 12px 10px 35px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        .cirurgia-busca:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .cirurgia-busca-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #adb5bd;
        }
        .cirurgia-select-wrapper select {
            width: 100%;
        }

        </style>
    <script>
        // CAPTURAR TODOS OS ERROS
        window.addEventListener('error', function(e) {
            console.error('üî¥ ERRO CAPTURADO:', e.message, 'na linha', e.lineno);
            alert('üî¥ ERRO: ' + e.message + '\nLinha: ' + e.lineno);
        });
        
        // Testar se fun√ß√µes b√°sicas funcionam
        window.addEventListener('load', function() {
            console.log('‚úÖ P√°gina carregada!');
            console.log('‚úÖ window.adicionarProduto existe?', typeof window.adicionarProduto);
            
            // Adicionar listener de teste no bot√£o
            setTimeout(function() {
                const botoes = document.querySelectorAll('button[onclick*="adicionarProduto"]');
                console.log('üìç Bot√µes "Adicionar Produto" encontrados:', botoes.length);
                botoes.forEach((btn, idx) => {
                    console.log('  Bot√£o', idx + 1, ':', btn.textContent.trim());
                });
            }, 1000);
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíâ Sistema de Or√ßamento Cir√∫rgico</h1>
            <p>Vers√£o 6.18 - SCROLL EM TODAS LISTAS DE CONFIG ‚úÖ</p>
        </div>

        <!-- ABAS -->
        <div class="tabs">
            <button class="tab active" onclick="abrirAba('tabPaciente')">üìã Paciente</button>
            <button class="tab" onclick="abrirAba('tabCirurgias')">üî™ Cirurgias</button>
            <button class="tab" onclick="abrirAba('tabProdutos')">üì¶ Produtos</button>
            <button class="tab" onclick="abrirAba('tabInternacao')">üè• Interna√ß√£o</button>
            <button class="tab" onclick="abrirAba('tabProfissionais')">üë®‚Äç‚öïÔ∏è Profissionais</button>
            <button class="tab" onclick="abrirAba('tabExtras')">‚ûï Extras</button>
            <button class="tab" onclick="abrirAba('tabConfiguracoes')">‚öôÔ∏è Configura√ß√µes</button>
            <button class="tab" onclick="abrirAba('tabOrcamento')">üí∞ Or√ßamento</button>
        </div>

        <!-- ABA 1: PACIENTE -->
        <div id="tabPaciente" class="tab-content active">
            <div class="section">
                <h3>üìã Dados do Paciente</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo *</label>
                        <input type="text" id="nomePaciente" placeholder="Digite o nome completo">
                    </div>
                </div>

                <div class="form-row" style="grid-template-columns: 1fr 1fr 1fr;">
                    <div class="form-group">
                        <label>CPF *</label>
                        <input type="text" id="cpfPaciente" placeholder="000.000.000-00" maxlength="14">
                    </div>

                    <div class="form-group">
                        <label>Data de Nascimento *</label>
                        <input type="date" id="dataNasc" onchange="calcularIdade()">
                    </div>

                    <div class="form-group">
                        <label>Idade (calculada)</label>
                        <input type="text" id="idadePaciente" readonly placeholder="Autom√°tica" style="font-weight: 600; color: #667eea;">
                    </div>
                </div>

                <div class="actions-btns">
                    <button class="btn btn-primary" onclick="abrirAba('tabCirurgias')">
                        Avan√ßar para Cirurgias ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 2: CIRURGIAS -->
        <div id="tabCirurgias" class="tab-content">
            <div class="section">
                <h3>üî™ Sele√ß√£o de Cirurgias (at√© 6)</h3>
                
                <div class="alert alert-info">
                    <span>‚ÑπÔ∏è</span>
                    <span>Selecione as cirurgias. O tempo ser√° somado automaticamente.</span>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-bottom: 20px;">
                    <div>
                        <label style="font-weight: 600; margin-bottom: 8px; display: block; font-size: 13px;">Cirurgia 01 *</label>
                        <div class="cirurgia-busca-container">
                                <span class="cirurgia-busca-icon">üîç</span>
                                <input type="text" id="busca_cirurgia1" class="cirurgia-busca" placeholder="Buscar cirurgia...">
                            </div>
                            <select id="cirurgia1" onchange="carregarCirurgia(1)" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 13px;">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 600; margin-bottom: 8px; display: block; font-size: 13px;">Cirurgia 02</label>
                        <div class="cirurgia-busca-container">
                                <span class="cirurgia-busca-icon">üîç</span>
                                <input type="text" id="busca_cirurgia2" class="cirurgia-busca" placeholder="Buscar cirurgia...">
                            </div>
                            <select id="cirurgia2" onchange="carregarCirurgia(2)" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 13px;">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 600; margin-bottom: 8px; display: block; font-size: 13px;">Cirurgia 03</label>
                        <div class="cirurgia-busca-container">
                                <span class="cirurgia-busca-icon">üîç</span>
                                <input type="text" id="busca_cirurgia3" class="cirurgia-busca" placeholder="Buscar cirurgia...">
                            </div>
                            <select id="cirurgia3" onchange="carregarCirurgia(3)" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 13px;">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 600; margin-bottom: 8px; display: block; font-size: 13px;">Cirurgia 04</label>
                        <div class="cirurgia-busca-container">
                                <span class="cirurgia-busca-icon">üîç</span>
                                <input type="text" id="busca_cirurgia4" class="cirurgia-busca" placeholder="Buscar cirurgia...">
                            </div>
                            <select id="cirurgia4" onchange="carregarCirurgia(4)" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 13px;">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 600; margin-bottom: 8px; display: block; font-size: 13px;">Cirurgia 05</label>
                        <div class="cirurgia-busca-container">
                                <span class="cirurgia-busca-icon">üîç</span>
                                <input type="text" id="busca_cirurgia5" class="cirurgia-busca" placeholder="Buscar cirurgia...">
                            </div>
                            <select id="cirurgia5" onchange="carregarCirurgia(5)" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 13px;">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 600; margin-bottom: 8px; display: block; font-size: 13px;">Cirurgia 06</label>
                        <div class="cirurgia-busca-container">
                                <span class="cirurgia-busca-icon">üîç</span>
                                <input type="text" id="busca_cirurgia6" class="cirurgia-busca" placeholder="Buscar cirurgia...">
                            </div>
                            <select id="cirurgia6" onchange="carregarCirurgia(6)" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 13px;">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>

                <div class="tempo-display">
                    <div class="label">‚è±Ô∏è DURA√á√ÉO DAS CIRURGIAS</div>
                    <div class="tempo-dual">
                        <div class="tempo-input-group">
                            <label>üí∞ Tempo para C√ÅLCULO (edit√°vel):</label>
                            <input type="number" id="tempoCalculo" placeholder="Ex: 3.5" step="0.25" min="0" oninput="atualizarTempoCalculo()">
                            <small style="display: block; margin-top: 5px; font-size: 10px; opacity: 0.85;">‚úèÔ∏è Voc√™ pode editar - usado para calcular custos</small>
                        </div>
                        <div class="tempo-input-group">
                            <label>üßë‚Äç‚öïÔ∏è Tempo para PACIENTE (soma autom√°tica):</label>
                            <input type="text" id="tempoPaciente" readonly placeholder="00:00" style="background: rgba(255,255,255,0.3);">
                            <small style="display: block; margin-top: 5px; font-size: 10px; opacity: 0.85;">üìå Apenas leitura - soma real das cirurgias</small>
                        </div>
                    </div>
                    <div style="background: rgba(255,255,255,0.15); padding: 10px; border-radius: 6px; margin-top: 10px; font-size: 11px; border-left: 3px solid rgba(255,255,255,0.5);">
                        <strong>üí° v6.6:</strong> O Tempo C√°lculo inicia igual √† soma, mas voc√™ pode editar livremente. √ötil quando o tempo real difere do tempo te√≥rico.
                    </div>
                </div>

                <div class="actions-btns">
                    <button class="btn btn-primary" onclick="abrirAba('tabProdutos')">
                        Avan√ßar para Produtos ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 3: PRODUTOS -->
        <div id="tabProdutos" class="tab-content">
            <div class="section">
                <h3>üì¶ Produtos e Materiais</h3>
                
                <div class="alert alert-info">
                    <span>‚ÑπÔ∏è</span>
                    <div>
                        <strong>Visualiza√ß√£o dos Produtos:</strong> As quantidades s√£o carregadas automaticamente das cirurgias selecionadas. O COMBO √© calculado em tempo real.<br>
                        ‚Ä¢ <span class="regra-badge soma">SOMA</span> = soma quantidades de todas cirurgias | <span class="regra-badge">M√ÅX</span> = usa o maior valor entre as cirurgias<br>
                        ‚Ä¢ Para editar quantidades, v√° em <strong>‚öôÔ∏è Configura√ß√µes ‚Üí üî™ Cirurgias ‚Üí ‚úèÔ∏è Editar</strong>
                    </div>
                </div>

                <div class="table-container">
                    <table class="produtos-table" id="tabelaProdutos">
                        <thead>
  <tr>
                                <th>PRODUTO / PRE√áO</th>
                                <th style="width: 40px;">INFO</th>
                                <th>Cir 01<br><small id="nomeCir1">-</small></th>
                                <th>Cir 02<br><small id="nomeCir2">-</small></th>
                                <th>Cir 03<br><small id="nomeCir3">-</small></th>
                                <th>Cir 04<br><small id="nomeCir4">-</small></th>
                                <th>Cir 05<br><small id="nomeCir5">-</small></th>
                                <th>Cir 06<br><small id="nomeCir6">-</small></th>
                                <th class="combo-col" style="width: 70px;">QTD<br>COMBO</th>
                                <th class="combo-col" style="width: 90px;">VALOR<br>COMBO</th>
                            </tr>
                        </thead>
                        <tbody id="tabelaBody"></tbody>
                    </table>
                </div>

                <div class="cost-card" style="margin-top: 15px;">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üí∞ Total de Produtos (COMBO)</div>
                        <div class="cost-card-value" id="totalProdutos">R$ 0,00</div>
                    </div>
                </div>

                <div class="actions-btns">
                    <button class="btn btn-primary" onclick="abrirAba('tabInternacao')">
                        Avan√ßar para Interna√ß√£o ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 4: INTERNA√á√ÉO -->
        <div id="tabInternacao" class="tab-content">
            <div class="section">
                <h3>üè• Tipo de Interna√ß√£o e Anestesia</h3>
                
                <div class="alert alert-info">
                    <span>‚ÑπÔ∏è</span>
                    <span>Selecione o tipo. Define o valor base e acr√©scimos por tempo.</span>
                </div>

                <div class="form-group">
                    <label>Tipo de Interna√ß√£o e Anestesia *</label>
                    <select id="tipoInternacao" onchange="calcularInternacao()" style="padding: 12px; font-size: 14px;">
                        <option value="">Selecione...</option>
                        <option value="local">COM Interna√ß√£o: Anestesia Local ¬± Seda√ß√£o (Base: R$ 2.720 + R$ 234/30min)</option>
                        <option value="peridural">COM Interna√ß√£o: Peridural/Raqui ¬± Seda√ß√£o (Base: R$ 2.909 + R$ 234/30min)</option>
                        <option value="geral">COM Interna√ß√£o: Anestesia Geral + TOT (Base: R$ 3.362 + R$ 268/30min)</option>
                        <option value="sem">SEM Interna√ß√£o: Anestesia Local (Fixo: R$ 2.000)</option>
                        <option value="ambulatorio">Ambulat√≥rio: Anestesia Local (Fixo: R$ 1.200)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Ajuste/Fator de Corre√ß√£o (interno - n√£o mostra para paciente):</label>
                    <input type="number" id="ajusteInternacao" placeholder="0,00" step="0.01" min="0" onchange="calcularInternacao()" style="width: 200px;">
                </div>

                <div class="cost-card">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üí∞ Interna√ß√£o/Estabelecimento TOTAL</div>
                        <div class="cost-card-value" id="valorInternacao">R$ 0,00</div>
                    </div>
                    <div class="cost-card-breakdown" id="detalhesInternacao"></div>
                </div>

                <div class="actions-btns">
                    <button class="btn btn-primary" onclick="abrirAba('tabProfissionais')">
                        Avan√ßar para Profissionais ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 5: PROFISSIONAIS -->
        <div id="tabProfissionais" class="tab-content">
            <div class="section">
                <h3>üë®‚Äç‚öïÔ∏è Equipe de Profissionais</h3>
                
                <div class="alert alert-warning">
                    <span>‚ö†Ô∏è</span>
                    <span>Custos baseados no <strong>tempo de c√°lculo</strong>. Configure quem participa da cirurgia.</span>
                </div>

                <!-- CIRURGI√ÉO -->
                <div class="cost-card">
                    <div class="cost-card-header">
                        <div>
                            <div class="cost-card-title">ü©∫ Cirurgi√£o Principal (Obrigat√≥rio)</div>
                            <div class="cost-card-subtitle">Base 2h: R$ 5.500 | +15min: R$ 400</div>
                        </div>
                        <div class="cost-card-value" id="valorCirurgiao">R$ 0,00</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
                        <div class="checkbox-group">
                            <input type="checkbox" id="checkRetornos" onchange="calcularCirurgiao()" checked>
                            <label for="checkRetornos" id="labelRetornos">Retornos (R$ 800)</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="checkPlus" onchange="calcularCirurgiao()" checked>
                            <label for="checkPlus" id="labelPlus">PLUS (R$ 800)</label>
                        </div>
                    </div>

                    <div class="cost-card-details" id="detalhesCirurgiao">Configure tempo primeiro</div>
                    
                    <div class="cost-card-extra">
                        <label>Acr√©scimo (MANT√âM entre or√ßamentos):</label>
                        <input type="number" id="acrescimoCirurgiao" placeholder="0,00" step="0.01" onchange="calcularCirurgiao()">
                    </div>
                </div>

                <!-- ANESTESISTA -->
                <div class="checkbox-group" onclick="toggleProfissional('anestesista')">
                    <input type="checkbox" id="checkAnestesista" onchange="toggleProfissional('anestesista')">
                    <label for="checkAnestesista">üíâ Usar Anestesista (opcional - para cirurgias maiores)</label>
                </div>

                <div class="cost-card" id="cardAnestesista" style="display: none;">
                    <div class="cost-card-header">
                        <div>
                            <div class="cost-card-title">üíâ Anestesista</div>
                            <div class="cost-card-subtitle">Base 2h: R$ 1.350 | +15min: R$ 110</div>
                        </div>
                        <div class="cost-card-value" id="valorAnestesista">R$ 0,00</div>
                    </div>
                    
                    <div class="cost-card-breakdown">
                        <div class="breakdown-item">
                            <span class="breakdown-label">Anestesista recebe (90%):</span>
                            <span class="breakdown-value" id="anestesista90">R$ 0,00</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Estabelecimento (10%):</span>
                            <span class="breakdown-value" id="estabelecimento10">R$ 0,00</span>
                        </div>
                    </div>

                    <div class="cost-card-details" id="detalhesAnestesista">Configure tempo primeiro</div>
                    
                    <div class="cost-card-extra">
                        <label>Acr√©scimo (reseta cada or√ßamento):</label>
                        <input type="number" id="acrescimoAnestesista" placeholder="0,00" step="0.01" onchange="calcularAnestesista()">
                    </div>
                </div>

                <!-- AUXILIAR -->
                <div class="checkbox-group" onclick="toggleProfissional('auxiliar')">
                    <input type="checkbox" id="checkAuxiliar" onchange="toggleProfissional('auxiliar')">
                    <label for="checkAuxiliar">üë∑ Usar Auxiliar(es) (opcional - cirurgias maiores)</label>
                </div>

                <div class="cost-card" id="cardAuxiliar" style="display: none;">
                    <div class="cost-card-header">
                        <div>
                            <div class="cost-card-title">üë∑ Auxiliar</div>
                            <div class="cost-card-subtitle">Base 2h: R$ 1.000 | +30min: R$ 185</div>
                        </div>
                        <div class="cost-card-value" id="valorAuxiliar">R$ 0,00</div>
                    </div>
                    
                    <div class="counter-group">
                        <div class="counter-label">Quantidade:</div>
                        <div class="counter-controls">
                            <button class="counter-btn" onclick="alterarContador('auxiliar', -1)">‚àí</button>
                            <div class="counter-value" id="countAuxiliar">1</div>
                            <button class="counter-btn" onclick="alterarContador('auxiliar', 1)">+</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tempo do Auxiliar (pode ser parcial):</label>
                        <input type="number" id="tempoAuxiliar" placeholder="Ex: 2.5" step="0.25" min="0" onchange="estadoGlobal.tempoAuxiliarEditadoManualmente = true; calcularAuxiliar()" style="width: 150px;">
                    </div>

                    <div class="cost-card-details" id="detalhesAuxiliar">Configure quantidade e tempo</div>
                    
                    <div class="cost-card-extra">
                        <label>Acr√©scimo (reseta cada or√ßamento):</label>
                        <input type="number" id="acrescimoAuxiliar" placeholder="0,00" step="0.01" onchange="calcularAuxiliar()">
                    </div>
                </div>

                <!-- INSTRUMENTADORA -->
                <div class="checkbox-group" onclick="toggleProfissional('instrumentadora')">
                    <input type="checkbox" id="checkInstrumentadora" onchange="toggleProfissional('instrumentadora')">
                    <label for="checkInstrumentadora">üîß Usar Instrumentadora(s) (opcional - bloco cir√∫rgico)</label>
                </div>

                <div class="cost-card" id="cardInstrumentadora" style="display: none;">
                    <div class="cost-card-header">
                        <div>
                            <div class="cost-card-title">üîß Instrumentadora</div>
                            <div class="cost-card-subtitle">Base 2h: R$ 430 | +2h: R$ 120</div>
                        </div>
                        <div class="cost-card-value" id="valorInstrumentadora">R$ 0,00</div>
                    </div>
                    
                    <div class="counter-group">
                        <div class="counter-label">Quantidade:</div>
                        <div class="counter-controls">
                            <button class="counter-btn" onclick="alterarContador('instrumentadora', -1)">‚àí</button>
                            <div class="counter-value" id="countInstrumentadora">1</div>
                            <button class="counter-btn" onclick="alterarContador('instrumentadora', 1)">+</button>
                        </div>
                    </div>

                    <div class="cost-card-details" id="detalhesInstrumentadora">Configure quantidade primeiro</div>
                    
                    <div class="cost-card-extra">
                        <label>Acr√©scimo (reseta cada or√ßamento):</label>
                        <input type="number" id="acrescimoInstrumentadora" placeholder="0,00" step="0.01" onchange="calcularInstrumentadora()">
                    </div>
                </div>

                <div class="cost-card">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üí∞ Total da Equipe</div>
                        <div class="cost-card-value" id="totalEquipe">R$ 0,00</div>
                    </div>
                </div>

                <div class="actions-btns">
                    <button class="btn btn-primary" onclick="abrirAba('tabExtras')">
                        Avan√ßar para Extras ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 6: EXTRAS -->
        <div id="tabExtras" class="tab-content">
            <div class="section">
                <h3>‚ûï Itens Extras (Opcionais)</h3>

                <!-- EQUIPE ESPECIALIZADA -->
                <div class="checkbox-group" onclick="toggleExtra('equipeEspecial')">
                    <input type="checkbox" id="checkEquipeEspecial" onchange="toggleExtra('equipeEspecial')">
                    <label for="checkEquipeEspecial">üë• Usar Equipe Especializada (ex: transplante capilar)</label>
                </div>

                <div class="cost-card" id="cardEquipeEspecial" style="display: none;">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üë• Equipe Especializada</div>
                        <div class="cost-card-value" id="valorEquipeEspecial">R$ 0,00</div>
                    </div>

                    <div class="counter-group">
                        <div class="counter-label">Quantidade de equipes:</div>
                        <div class="counter-controls">
                            <button class="counter-btn" onclick="alterarContador('equipeEspecial', -1)">‚àí</button>
                            <div class="counter-value" id="countEquipeEspecial">1</div>
                            <button class="counter-btn" onclick="alterarContador('equipeEspecial', 1)">+</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tipo de Equipe:</label>
                        <select id="tipoEquipeEspecial" onchange="calcularEquipeEspecial()">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>

                <!-- IMPLANTES (M√öLTIPLOS) -->
                <div class="checkbox-group" onclick="toggleExtra('implantes')">
                    <input type="checkbox" id="checkImplantes" onchange="toggleExtra('implantes')">
                    <label for="checkImplantes">üíé Usar Implantes</label>
                </div>

                <div class="cost-card" id="cardImplantes" style="display: none;">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üíé Implantes</div>
                        <div class="cost-card-value" id="valorTotalImplantes">R$ 0,00</div>
                    </div>

                    <div class="implantes-lista" id="listaImplantes"></div>

                    <button class="btn btn-primary btn-sm" onclick="adicionarImplanteItem()">
                        ‚ûï Adicionar Implante
                    </button>
                </div>

                <!-- OUTROS MATERIAIS -->
                <div class="checkbox-group" onclick="toggleExtra('outrosMateriais')">
                    <input type="checkbox" id="checkOutrosMateriais" onchange="toggleExtra('outrosMateriais')">
                    <label for="checkOutrosMateriais">üì¶ Outros Materiais/Implantes</label>
                </div>

                <div class="cost-card" id="cardOutrosMateriais" style="display: none;">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üì¶ Outros Materiais</div>
                        <div class="cost-card-value" id="valorOutrosMateriais">R$ 0,00</div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Descri√ß√£o:</label>
                            <input type="text" id="descOutrosMateriais" placeholder="Ex: Medpor, Tela">
                        </div>
                        <div class="form-group">
                            <label>Quantidade:</label>
                            <input type="number" id="qtdOutrosMateriais" min="0" value="1" onchange="calcularOutrosMateriais()">
                        </div>
                        <div class="form-group">
                            <label>Valor Total:</label>
                            <input type="number" id="valorOutrosMateriaisInput" placeholder="0,00" step="0.01" onchange="calcularOutrosMateriais()">
                        </div>
                    </div>
                </div>

                <div class="cost-card">
                    <div class="cost-card-header">
                        <div class="cost-card-title">üí∞ Total Extras</div>
                        <div class="cost-card-value" id="totalExtras">R$ 0,00</div>
                    </div>
                </div>

                <div class="actions-btns">
                    <button class="btn btn-primary" onclick="abrirAba('tabOrcamento')">
                        Ver Or√ßamento Final ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 7: CONFIGURA√á√ïES -->
        <div id="tabConfiguracoes" class="tab-content">
            <div class="section">
                <h3>‚öôÔ∏è Gerenciar Configura√ß√µes</h3>
                
                <div class="alert alert-warning">
                    <span>‚ö†Ô∏è</span>
                    <span>Use esta aba para gerenciar cirurgias, produtos, equipes, implantes e formas de pagamento.</span>
                </div>

                <!-- BACKUP COMPLETO -->
                <div style="margin-bottom: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                    <h4 style="color: white; margin: 0 0 10px 0; font-size: 18px;">üíæ BACKUP COMPLETO DO SISTEMA</h4>
                    <p style="margin: 0 0 20px 0; opacity: 0.9; font-size: 13px;">
                        Salve TUDO (produtos, cirurgias, equipes, implantes, taxas, valores) em um √∫nico arquivo JSON
                    </p>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button onclick="fazerBackupCompleto()" style="padding: 12px 24px; background: white; color: #667eea; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                            üì• BAIXAR BACKUP COMPLETO
                        </button>
                        <button onclick="mostrarRestaurarBackup()" style="padding: 12px 24px; background: rgba(255,255,255,0.2); color: white; border: 2px solid white; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
                            üì§ RESTAURAR BACKUP
                        </button>
                    </div>
                    
                    <div id="areaRestaurarBackup" style="display: none; margin-top: 20px; background: rgba(0,0,0,0.2); padding: 20px; border-radius: 8px;">
                        <h5 style="color: white; margin: 0 0 10px 0; font-size: 14px;">üì§ Restaurar Backup</h5>
                        <p style="margin: 0 0 15px 0; font-size: 12px; opacity: 0.9;">
                            ‚ö†Ô∏è ATEN√á√ÉO: Isso vai SUBSTITUIR todos os dados atuais!
                        </p>
                        <textarea id="jsonBackupRestaurar" placeholder='Cole aqui o JSON do backup completo...' style="width: 100%; height: 150px; padding: 12px; border: 2px solid rgba(255,255,255,0.3); border-radius: 6px; font-family: monospace; font-size: 12px; background: rgba(255,255,255,0.9); color: #333;"></textarea>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button onclick="restaurarBackupCompleto()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                ‚úÖ Restaurar Agora
                            </button>
                            <button onclick="fecharRestaurarBackup()" style="padding: 10px 20px; background: rgba(255,255,255,0.2); color: white; border: 1px solid white; border-radius: 6px; cursor: pointer;">
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- FORMAS DE PAGAMENTO -->
                <div style="margin-bottom: 25px; background: white; padding: 20px; border-radius: 8px; border: 2px solid #667eea;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">üí≥ Configura√ß√µes de Pagamento</h4>
                    
                    <div class="alert alert-info" style="margin-bottom: 15px; padding: 10px 15px; font-size: 12px;">
                        <strong>üí° L√≥gica:</strong> O valor CALCULADO no or√ßamento √© o "√Ä vista com desconto" (j√° com desconto aplicado). 
                        As outras formas somam TAXAS sobre esse valor base.
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-bottom: 15px;">
                        <div class="form-group" style="margin: 0;">
                            <label style="font-size: 12px;">üíö √Ä Vista COM Desconto</label>
                            <input type="text" value="VALOR BASE (calculado)" disabled style="width: 100%; padding: 8px; border: 2px solid #28a745; border-radius: 6px; background: #d4edda; color: #155724; font-weight: 600; text-align: center;">
                            <small style="color: #6c757d; font-size: 10px;">Este √© o valor que o sistema calcula (produtos + profissionais + etc)</small>
                        </div>
                        
                        <div class="form-group" style="margin: 0;">
                            <label style="font-size: 12px;">üíô √Ä Vista Normal - Taxa (%)</label>
                            <input type="number" id="cfg_taxa_vista_normal" value="3.99" step="0.01" oninput="atualizarSimuladorEOrcamento()" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
                            <small style="color: #6c757d; font-size: 10px;">Acr√©scimo sobre o valor base</small>
                        </div>
                        
                        <div class="form-group" style="margin: 0;">
                            <label style="font-size: 12px;">üíõ Parcelado - Taxa (%)</label>
                            <input type="number" id="cfg_taxa_parcelado" value="5.99" step="0.01" oninput="atualizarSimuladorEOrcamento()" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
                            <small style="color: #6c757d; font-size: 10px;">Acr√©scimo sobre o valor base</small>
                        </div>
                        
                        <div class="form-group" style="margin: 0;">
                            <label style="font-size: 12px;">Arredondar Para (R$)</label>
                            <select id="cfg_arredondamento" onchange="atualizarSimuladorEOrcamento()" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
                                <option value="1">Sem arredondar</option>
                                <option value="10">10</option>
                                <option value="50">50</option>
                                <option value="100" selected>100</option>
                                <option value="500">500</option>
                                <option value="1000">1000</option>
                            </select>
                            <small style="color: #6c757d; font-size: 10px;">Arredondar ap√≥s aplicar taxas</small>
                        </div>
                        
                        <div class="form-group" style="margin: 0;">
                            <label style="font-size: 12px;">üí∞ Entrada (%)</label>
                            <input type="number" id="cfg_entrada_percentual" value="30" min="0" max="100" step="5" oninput="atualizarSimuladorEOrcamento()" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
                            <small style="color: #6c757d; font-size: 10px;">Percentual de entrada do valor parcelado</small>
                        </div>
                        
                        <div class="form-group" style="margin: 0;">
                            <label style="font-size: 12px;">N√∫mero de Parcelas</label>
                            <input type="number" id="cfg_num_parcelas" value="12" min="1" max="24" oninput="atualizarSimuladorEOrcamento()" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
                            <small style="color: #6c757d; font-size: 10px;">Parcelas ap√≥s a entrada</small>
                        </div>
                    </div>
                    
                    <div style="background: #e7f3ff; padding: 12px; border-radius: 6px; border-left: 4px solid #667eea; margin-bottom: 15px;">
                        <div style="font-size: 11px; color: #495057; margin-bottom: 8px;">
                            ‚ö° <strong>ATUALIZA√á√ÉO EM TEMPO REAL:</strong> As configura√ß√µes s√£o aplicadas automaticamente enquanto voc√™ digita!
                        </div>
                        <button class="btn btn-sm btn-success" onclick="salvarConfigPagamento(event)">
                            üíæ Salvar Configura√ß√µes (manter para pr√≥ximos or√ßamentos)
                        </button>
                    </div>
                    
                    <!-- SIMULADOR -->
                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                        <h5 style="color: #495057; margin-bottom: 10px; font-size: 14px;">üß™ Simulador (veja como ficar√° em tempo real)</h5>
                        <div class="form-group" style="margin-bottom: 10px; display: flex; gap: 10px; align-items: center;">
                            <div>
                                <label style="font-size: 11px;">Valor √Ä Vista com Desconto (R$)</label>
                                <input type="number" id="valor_teste_pagamento" value="10000" step="100" oninput="simularFormasPagamento()" style="width: 200px; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px;">
                            </div>
                            <button class="btn btn-sm" onclick="usarValorOrcamentoAtual()" style="background: #667eea; color: white; padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 11px; margin-top: 18px;">
                                üìã Usar Valor do Or√ßamento Atual
                            </button>
                        </div>
                        <div id="resultado_simulacao" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 12px;"></div>
                    </div>
                </div>

                <!-- VALORES DOS PROFISSIONAIS -->
                <div style="margin-bottom: 25px; background: white; padding: 20px; border-radius: 8px; border: 2px solid #667eea;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">üë®‚Äç‚öïÔ∏è Valores Base dos Profissionais</h4>
                    
                    <div style="display: grid; gap: 20px;">
                        <!-- CIRURGI√ÉO -->
                        <div style="border-left: 3px solid #667eea; padding-left: 15px;">
                            <h5 style="color: #495057; margin-bottom: 10px;">ü©∫ Cirurgi√£o</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Base 2h (R$)</label>
                                    <input type="number" id="cfg_cir_base" value="5500" step="100" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 15min (R$)</label>
                                    <input type="number" id="cfg_cir_15min" value="400" step="10" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Retornos (R$)</label>
                                    <input type="number" id="cfg_cir_retornos" value="800" step="50" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">PLUS (R$)</label>
                                    <input type="number" id="cfg_cir_plus" value="800" step="50" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                            </div>
                        </div>

                        <!-- ANESTESISTA -->
                        <div style="border-left: 3px solid #28a745; padding-left: 15px;">
                            <h5 style="color: #495057; margin-bottom: 10px;">üíâ Anestesista</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Base 2h (R$)</label>
                                    <input type="number" id="cfg_anes_base" value="1350" step="50" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 15min (R$)</label>
                                    <input type="number" id="cfg_anes_15min" value="110" step="10" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                            </div>
                        </div>

                        <!-- AUXILIAR -->
                        <div style="border-left: 3px solid #ffc107; padding-left: 15px;">
                            <h5 style="color: #495057; margin-bottom: 10px;">üë∑ Auxiliar</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Base 2h (R$)</label>
                                    <input type="number" id="cfg_aux_base" value="1000" step="50" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 30min (R$)</label>
                                    <input type="number" id="cfg_aux_30min" value="185" step="10" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                            </div>
                        </div>

                        <!-- INSTRUMENTADORA -->
                        <div style="border-left: 3px solid #17a2b8; padding-left: 15px;">
                            <h5 style="color: #495057; margin-bottom: 10px;">üîß Instrumentadora</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Base 2h (R$)</label>
                                    <input type="number" id="cfg_inst_base" value="430" step="10" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 2h (R$)</label>
                                    <input type="number" id="cfg_inst_2h" value="120" step="10" style="width: 100%; padding: 6px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-sm btn-success" onclick="salvarConfigProfissionais(event)" style="margin-top: 15px;">
                        üíæ Salvar Valores dos Profissionais
                    </button>
                </div>

                <!-- CONFIGURA√á√ïES DO ESTABELECIMENTO -->
                <div style="margin-bottom: 25px; background: white; padding: 20px; border-radius: 8px; border: 2px solid #667eea;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">üè• Configura√ß√µes do Estabelecimento</h4>
                    
                    <div class="alert alert-info" style="margin-bottom: 15px; padding: 10px 15px; font-size: 12px;">
                        <strong>üí° Valores Base e Adicionais:</strong> Configure os valores base de cada tipo de interna√ß√£o/anestesia 
                        e os valores adicionais cobrados por tempo extra (ap√≥s a primeira hora).
                    </div>
                    
                    <div style="display: grid; gap: 15px;">
                        <!-- Anestesia Local com Seda√ß√£o -->
                        <div style="border-left: 3px solid #667eea; padding-left: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 style="color: #495057; margin-bottom: 10px; font-size: 14px;">üíâ COM Interna√ß√£o: Anestesia Local ¬± Seda√ß√£o</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Valor Base (R$)</label>
                                    <input type="number" id="cfg_int_local" value="2720" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Valor fixo para a 1¬™ hora</small>
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 30min (R$)</label>
                                    <input type="number" id="cfg_int_local_extra" value="234" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Cobrado ap√≥s a 1¬™ hora</small>
                                </div>
                            </div>
                        </div>

                        <!-- Peridural/Raqui -->
                        <div style="border-left: 3px solid #17a2b8; padding-left: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 style="color: #495057; margin-bottom: 10px; font-size: 14px;">üíâ COM Interna√ß√£o: Peridural/Raqui ¬± Seda√ß√£o</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Valor Base (R$)</label>
                                    <input type="number" id="cfg_int_peridural" value="2909" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Valor fixo para a 1¬™ hora</small>
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 30min (R$)</label>
                                    <input type="number" id="cfg_int_peridural_extra" value="234" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Cobrado ap√≥s a 1¬™ hora</small>
                                </div>
                            </div>
                        </div>

                        <!-- Anestesia Geral -->
                        <div style="border-left: 3px solid #28a745; padding-left: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 style="color: #495057; margin-bottom: 10px; font-size: 14px;">üíâ COM Interna√ß√£o: Anestesia Geral + TOT</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Valor Base (R$)</label>
                                    <input type="number" id="cfg_int_geral" value="3362" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Valor fixo para a 1¬™ hora</small>
                                </div>
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Adicional por 30min (R$)</label>
                                    <input type="number" id="cfg_int_geral_extra" value="268" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Cobrado ap√≥s a 1¬™ hora</small>
                                </div>
                            </div>
                        </div>

                        <!-- SEM Interna√ß√£o -->
                        <div style="border-left: 3px solid #ffc107; padding-left: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 style="color: #495057; margin-bottom: 10px; font-size: 14px;">üè† SEM Interna√ß√£o: Anestesia Local</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Valor Fixo (R$)</label>
                                    <input type="number" id="cfg_int_sem" value="2000" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Valor fixo (n√£o varia com tempo)</small>
                                </div>
                            </div>
                        </div>

                        <!-- Ambulat√≥rio -->
                        <div style="border-left: 3px solid #dc3545; padding-left: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5 style="color: #495057; margin-bottom: 10px; font-size: 14px;">üöë Ambulat√≥rio: Anestesia Local</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div class="form-group" style="margin: 0;">
                                    <label style="font-size: 11px;">Valor Fixo (R$)</label>
                                    <input type="number" id="cfg_int_ambulatorio" value="1200" step="10" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                    <small style="color: #6c757d; font-size: 10px;">Valor fixo (n√£o varia com tempo)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-sm btn-success" onclick="salvarConfigEstabelecimento(event)" style="margin-top: 15px;">
                        üíæ Salvar Configura√ß√µes do Estabelecimento
                    </button>
                </div>

                <!-- PRODUTOS -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #667eea; margin-bottom: 12px;">üì¶ Produtos Cadastrados (<span id="contadorProdutos">0</span> itens)</h4>

                    <div id="formImportarProdutos" style="display: none; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 2px solid #667eea;">
                        <h5 style="color: #495057; margin-bottom: 10px;">üì• Importar Produtos</h5>
                        
                        <div class="alert alert-info" style="font-size: 12px; margin-bottom: 10px;">
                            <span>‚ÑπÔ∏è</span>
                            <div>
                                <strong>Formato CSV esperado:</strong><br>
                                <code style="background: white; padding: 2px 6px; border-radius: 4px;">Categoria,Nome,Regra,Valor</code><br>
                                <code style="background: white; padding: 2px 6px; border-radius: 4px;">ANTISSEPSIA,Clorexidina alco√≥lica,soma,6.00</code><br>
                                <code style="background: white; padding: 2px 6px; border-radius: 4px;">BISTURI,Caut√©rio descart√°vel,max,39.00</code>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Cole os dados CSV aqui:</label>
                            <textarea id="textareaImportProdutos" rows="8" placeholder="Categoria,Nome,Regra,Valor
ANTISSEPSIA,Clorexidina,soma,6.00
BISTURI,Caut√©rio,max,39.00" style="width: 100%; padding: 10px; font-family: 'Courier New', monospace; font-size: 12px; border: 2px solid #e9ecef; border-radius: 8px;"></textarea>
                        </div>

                        <div class="actions-btns">
                            <button class="btn btn-sm btn-success" onclick="processarImportacaoProdutos()">
                                ‚úÖ Importar
                            </button>
                            <button class="btn btn-sm" onclick="document.getElementById('formImportarProdutos').style.display='none'" style="background: #6c757d; color: white;">
                                ‚ùå Cancelar
                            </button>
                        </div>
                    </div>

                    <div style="max-height: 400px; overflow-y: auto; border: 2px solid #e9ecef; border-radius: 8px; padding: 10px; background: white; margin-bottom: 15px;">
                        <div id="listaProdutos"></div>
                    </div>
                    
                    <div class="actions-btns">
                        <button class="btn btn-sm btn-primary" onclick="adicionarProduto()">
                            ‚ûï Adicionar Produto
                        </button>
                        <button class="btn btn-sm btn-secondary" onclick="abrirOrganizarCategorias()" style="background: #6c757d;">
                            ‚úèÔ∏è Editar Categorias
                        </button>
                        <button class="btn btn-sm btn-success" onclick="mostrarImportarProdutos()">
                            üì• Importar Lista
                        </button>
                        <button class="btn btn-sm btn-warning" onclick="exportarProdutos()">
                            üíæ Exportar Lista
                        </button>
                    </div>
                </div>

                <!-- CIRURGIAS -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #667eea; margin-bottom: 12px;">üî™ Cirurgias Cadastradas (<span id="contadorCirurgias">0</span> itens)</h4>
                    <div id="listaCirurgias" style="max-height: 400px; overflow-y: auto; border: 2px solid #e9ecef; border-radius: 8px; padding: 10px; background: #f8f9fa;"></div>
                    <button class="btn btn-sm btn-primary" onclick="adicionarCirurgia()" style="margin-top: 10px;">
                        ‚ûï Adicionar Cirurgia
                    </button>
                </div>

                <!-- EQUIPES ESPECIALIZADAS -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #667eea; margin-bottom: 12px;">üë• Equipes Especializadas (<span id="contadorEquipes">0</span> itens)</h4>
                    <div id="listaEquipes" style="max-height: 400px; overflow-y: auto; border: 2px solid #e9ecef; border-radius: 8px; padding: 10px; background: #f8f9fa;"></div>
                    <button class="btn btn-sm btn-primary" onclick="adicionarEquipe()" style="margin-top: 10px;">
                        ‚ûï Adicionar Equipe
                    </button>
                </div>

                <!-- IMPLANTES -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #667eea; margin-bottom: 12px;">üíé Implantes (<span id="contadorImplantes">0</span> itens)</h4>
                    <div id="listaImplantesCadastro" style="max-height: 400px; overflow-y: auto; border: 2px solid #e9ecef; border-radius: 8px; padding: 10px; background: #f8f9fa;"></div>
                    <button class="btn btn-sm btn-primary" onclick="adicionarImplanteCadastro()" style="margin-top: 10px;">
                        ‚ûï Adicionar Implante
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA 8: OR√áAMENTO -->
        <div id="tabOrcamento" class="tab-content">
            <div class="section">
                <h3>üí∞ Or√ßamento Final</h3>
                
                <!-- CABE√áALHO DO OR√áAMENTO PROFISSIONAL -->
                <div style="background: white; padding: 25px; border-radius: 12px; border: 2px solid #667eea; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    
                    <!-- LOGO E DADOS DO M√âDICO -->
                    <div style="display: grid; grid-template-columns: 150px 1fr; gap: 20px; padding-bottom: 20px; border-bottom: 2px solid #e9ecef; margin-bottom: 20px;">
                        <div style="text-align: center;">
                            <div id="areaLogo" style="width: 150px; height: 150px; border: 2px dashed #667eea; border-radius: 8px; display: flex; align-items: center; justify-content: center; background: #f8f9ff; cursor: pointer; position: relative; overflow: hidden;" onclick="document.getElementById('inputLogo').click()">
                                <img id="imagemLogo" src="" style="display: none; width: 100%; height: 100%; object-fit: contain;">
                                <span id="textoLogo" style="font-size: 12px; color: #667eea; text-align: center; padding: 10px;">üì∑<br>Clique para<br>adicionar logo</span>
                            </div>
                            <input type="file" id="inputLogo" accept="image/*" style="display: none;" onchange="carregarLogo(event)">
                            <button onclick="removerLogo()" style="margin-top: 8px; padding: 4px 8px; font-size: 11px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Remover</button>
                        </div>
                        <div>
                            <h4 style="color: #667eea; margin: 0 0 15px 0; font-size: 16px;">üë®‚Äç‚öïÔ∏è DADOS DO M√âDICO</h4>
                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <div>
                                    <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">Nome Completo:</label>
                                    <input type="text" id="nomeMedico" placeholder="Dr. Jo√£o Silva" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">Especialidade:</label>
                                    <input type="text" id="especialidadeMedico" placeholder="Cirurgi√£o Pl√°stico" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div>
                                    <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">CRM:</label>
                                    <input type="text" id="crmMedico" placeholder="12345/SP" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">RQE:</label>
                                    <input type="text" id="rqeMedico" placeholder="67890" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- DADOS DO PACIENTE -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="color: #667eea; margin: 0; font-size: 16px;">üë§ DADOS DO PACIENTE</h4>
                            <button onclick="importarDadosPaciente()" style="padding: 6px 12px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                üì• Importar da Aba 1
                            </button>
                        </div>
                        <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <div>
                                <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">Nome Completo:</label>
                                <input type="text" id="nomePacienteOrcamento" placeholder="Maria Santos" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                            </div>
                            <div>
                                <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">CPF:</label>
                                <input type="text" id="cpfPacienteOrcamento" placeholder="000.000.000-00" maxlength="14" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;" onkeyup="formatarCPF(this)">
                            </div>
                            <div>
                                <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">Data de Nascimento:</label>
                                <input type="date" id="dnPacienteOrcamento" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;" onchange="calcularIdadeOrcamento()">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 10px;">
                            <div>
                                <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">Idade:</label>
                                <input type="text" id="idadePacienteOrcamento" readonly placeholder="Calculada" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px; background: #f8f9fa; color: #6c757d;">
                            </div>
                            <div>
                                <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">üìã N√∫mero do Or√ßamento:</label>
                                <input type="text" id="numeroOrcamento" placeholder="2025-001" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                            </div>
                            <div>
                                <label style="font-weight: 600; display: block; margin-bottom: 5px; color: #495057; font-size: 12px;">üìÖ Data:</label>
                                <input type="date" id="dataOrcamento" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="resumo-final">
                    <h3>üìä RESUMO COMPLETO</h3>
                    <div class="resumo-itens" id="resumoItens"></div>
                    <div class="resumo-total">
                        <div style="font-size: 18px; margin-bottom: 8px;">VALOR TOTAL</div>
                        <div class="valor" id="valorTotalFinal">R$ 0,00</div>
                    </div>
                </div>

                <div id="formasPagamento"></div>
                
                <!-- BOT√ÉO SALVAR OR√áAMENTO -->
                <div style="margin-top: 20px; padding: 15px; background: #d4edda; border: 2px solid #28a745; border-radius: 8px; text-align: center;">
                    <p style="margin: 0 0 10px 0; color: #155724; font-weight: 600;">
                        üíæ Salvar este or√ßamento para o prontu√°rio do paciente
                    </p>
                    <button onclick="salvarNoProntuario()" style="padding: 12px 30px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                        üíæ SALVAR OR√áAMENTO COMPLETO
                    </button>
                </div>

                <div class="actions-btns" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="gerarPDF()">üìÑ Gerar PDF</button>
                    <button class="btn btn-warning" onclick="window.print()">üñ®Ô∏è Imprimir</button>
                    <button class="btn btn-danger" onclick="novoOrcamento()">üîÑ Novo Or√ßamento</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ADICIONAR PRODUTO -->
    <div id="modalAdicionarProduto" class="modal-overlay" onclick="fecharModalSeClicouFora(event)">
        <div class="modal-box" onclick="event.stopPropagation()" style="max-width: 600px;">
            <div class="modal-header">
                <h3>‚ûï Adicionar Produto</h3>
                <button class="modal-close" onclick="fecharModalProduto()">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div>
                        <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">üìã Categoria:</label>
                        <input type="text" id="modal_prod_categoria" placeholder="Ex: ANTISSEPSIA, BISTURI, MEDICA√á√ÉO" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                        <small style="color: #6c757d; font-size: 11px;">Categorias existentes: ANTISSEPSIA, BISTURI, SANGRAMENTO, etc.</small>
                    </div>
                    
                    <div>
                        <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">üè∑Ô∏è Nome do Produto:</label>
                        <input type="text" id="modal_prod_nome" placeholder="Ex: Lidoca√≠na, Bisturi el√©trico" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">üí∞ Valor Unit√°rio (R$):</label>
                            <input type="number" id="modal_prod_valor" placeholder="13.50" step="0.01" min="0" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                        </div>
                        
                        <div>
                            <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">‚öôÔ∏è Regra de COMBO:</label>
                            <select id="modal_prod_regra" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                                <option value="soma">SOMA (somar todas)</option>
                                <option value="max">M√ÅX (pegar maior)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">üí¨ Observa√ß√£o (opcional):</label>
                        <textarea id="modal_prod_obs" placeholder="Ex: Usar apenas em cirurgias maiores, Verificar validade antes de usar..." rows="2" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px; resize: vertical; font-family: inherit;"></textarea>
                        <small style="color: #6c757d; font-size: 11px;">Esta observa√ß√£o aparecer√° como tooltip ao passar o mouse sobre o produto</small>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; border-left: 4px solid #667eea;">
                        <div style="font-size: 11px; color: #6c757d; line-height: 1.6;">
                            <strong>‚ÑπÔ∏è Regras de COMBO:</strong><br>
                            ‚Ä¢ <strong>SOMA:</strong> Soma as quantidades de todas as cirurgias<br>
                            ‚Ä¢ <strong>M√ÅX:</strong> Usa apenas o maior valor entre as cirurgias
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalProduto()" style="background: #6c757d; color: white;">
                    Cancelar
                </button>
                <button class="btn btn-success" onclick="salvarNovoProduto()">
                    ‚úÖ Adicionar Produto
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL ADICIONAR/EDITAR IMPLANTE -->
    <div id="modalImplante" class="modal-overlay" onclick="fecharModalSeClicouFora(event)">
        <div class="modal-box" onclick="event.stopPropagation()" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="modalImplanteTitulo">‚ûï Adicionar Implante</h3>
                <button class="modal-close" onclick="fecharModalImplante()">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div>
                        <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">üíé Nome do Implante:</label>
                        <input type="text" id="modal_implante_nome" placeholder="Ex: Pr√≥tese de Silicone 250ml, Placa de Tit√¢nio" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                    </div>
                    
                    <div>
                        <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">üí∞ Valor (R$):</label>
                        <input type="number" id="modal_implante_valor" placeholder="2500.00" step="0.01" min="0" style="width: 100%; padding: 10px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; border-left: 4px solid #667eea;">
                        <div style="font-size: 11px; color: #6c757d; line-height: 1.6;">
                            <strong>‚ÑπÔ∏è Dica:</strong> Cadastre os implantes mais comuns aqui para facilitar o uso durante o or√ßamento.
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalImplante()" style="background: #6c757d; color: white;">
                    Cancelar
                </button>
                <button class="btn btn-success" id="btnSalvarImplante" onclick="salvarImplante()">
                    ‚úÖ Adicionar
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL EDITAR CIRURGIA -->
    <div id="modalEditarCirurgia" class="modal-overlay" onclick="fecharModalSeClicouFora(event)">
        <div class="modal-box" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 id="modalTituloCirurgia">‚úèÔ∏è Editar Cirurgia</h3>
                <button class="modal-close" onclick="fecharModalCirurgia()">‚úï</button>
            </div>
            <div class="modal-body" id="modalBodyCirurgia">
                <!-- Conte√∫do gerado dinamicamente -->
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalCirurgia()" style="background: #6c757d; color: white;">
                    Cancelar
                </button>
                <button class="btn" onclick="abrirModalCopiarProdutos()" style="background: #17a2b8; color: white;">
                    üìã Copiar de outra cirurgia
                </button>
                <button class="btn btn-success" onclick="salvarEdicaoCirurgia()">
                    üíæ Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL COPIAR PRODUTOS DE OUTRA CIRURGIA -->
    <div id="modalCopiarProdutos" class="modal-overlay">
        <div class="modal-box" onclick="event.stopPropagation()" style="max-width: 600px;">
            <div class="modal-header">
                <h3>üìã Copiar Produtos de Outra Cirurgia</h3>
                <button class="modal-close" onclick="fecharModalCopiarProdutos()">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #ffc107;">
                    <div style="font-size: 12px; color: #856404; line-height: 1.6;">
                        <strong>‚ö†Ô∏è Aten√ß√£o:</strong> Esta fun√ß√£o ir√° <strong>SUBSTITUIR</strong> todas as quantidades de produtos da cirurgia atual pelos valores da cirurgia selecionada abaixo.
                    </div>
                </div>

                <div>
                    <label style="display: block; font-weight: 600; color: #495057; font-size: 13px; margin-bottom: 10px;">
                        Selecione a cirurgia de onde deseja copiar os produtos:
                    </label>
                    <select id="selectCirurgiaOrigem" style="width: 100%; padding: 12px; border: 2px solid #667eea; border-radius: 8px; font-size: 14px;">
                        <option value="">-- Escolha uma cirurgia --</option>
                    </select>
                </div>

                <div id="previewProdutosCopiar" style="margin-top: 20px; max-height: 300px; overflow-y: auto; display: none;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                        <h4 style="color: #495057; margin-bottom: 10px; font-size: 13px;">üì¶ Preview dos produtos a serem copiados:</h4>
                        <div id="listaPreviewProdutos" style="font-size: 12px; color: #6c757d;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="fecharModalCopiarProdutos()" style="background: #6c757d; color: white;">
                    Cancelar
                </button>
                <button class="btn btn-success" id="btnConfirmarCopia" disabled>
                    ‚úÖ Confirmar C√≥pia
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== BANCO DE DADOS ====================
        
        let CIRURGIAS_DB = {
    "cir001": {
        nome: "Mamoplastia de aumento com inclus√£o de implantes de silicone",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir002": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco",
        tempo: 4.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 3, 1, 0, 1, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 9, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 1]
    },
    "cir003": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Abdominoplastia",
        tempo: 7.5,
        produtos: [1, 0, 3, 1, 1, 1, 1, 1, 2, 13, 2, 4, 3, 5, 2, 0, 6, 1, 0, 7, 0, 4, 20, 20, 4, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 10, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 4, 0, 0, 0, 0, 1]
    },
    "cir004": {
        nome: "Mamoplastia redutora / Mastopexia",
        tempo: 4.5,
        produtos: [0, 2, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 20, 20, 7, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 1]
    },
    "cir005": {
        nome: "Mastopexia com implantes de silicone",
        tempo: 4.5,
        produtos: [0, 2, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 20, 20, 7, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 1]
    },
    "cir006": {
        nome: "Rinoplastia",
        tempo: 3.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 0, 3, 3, 0, 2, 2, 3, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 3, 0, 0, 0, 0]
    },
    "cir007": {
        nome: "Abdominoplastia",
        tempo: 3.0,
        produtos: [1, 0, 3, 1, 1, 1, 0, 1, 1, 2, 2, 4, 3, 5, 2, 0, 6, 1, 0, 7, 0, 4, 20, 20, 4, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 4, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 0, 0, 1]
    },
    "cir008": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Mamoplastia de aumento",
        tempo: 6.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 12, 2, 4, 2, 3, 2, 0, 7, 1, 0, 5, 0, 0, 12, 12, 10, 5, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 11, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 0, 0, 0, 0, 1]
    },
    "cir009": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Abdominoplastia + Mamoplastia de aumento",
        tempo: 9.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 3, 13, 2, 4, 3, 5, 3, 0, 9, 0, 0, 12, 0, 4, 30, 30, 14, 7, 0, 0, 0, 0, 2, 2, 2, 2, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 14, 4, 6, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 6, 0, 0, 0, 0, 1]
    },
    "cir010": {
        nome: "Mentoplastia",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 0, 6, 0, 0, 2, 2, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 2, 0, 0, 0, 0]
    },
    "cir011": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoenxertia gl√∫tea + Mastopexia com troca de implantes",
        tempo: 9.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 3, 13, 2, 4, 3, 5, 3, 0, 9, 0, 0, 12, 0, 4, 30, 30, 14, 7, 0, 0, 0, 0, 2, 2, 2, 2, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 14, 4, 6, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 6, 0, 0, 0, 0, 1]
    },
    "cir012": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoenxertia gl√∫tea + Corre√ß√£o de cicatriz + Mastopexia com troca de implantes",
        tempo: 10.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 1, 13, 2, 4, 3, 5, 3, 0, 9, 0, 0, 14, 0, 4, 30, 30, 14, 8, 0, 0, 0, 0, 2, 2, 2, 2, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 14, 4, 6, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 6, 0, 0, 0, 0, 1]
    },
    "cir013": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoaspira√ß√£o de coxas + Lipoenxertia gl√∫tea + Mastopexia com troca de implantes",
        tempo: 10.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 1, 13, 2, 4, 3, 5, 3, 0, 9, 0, 0, 14, 0, 4, 30, 30, 14, 8, 0, 0, 0, 0, 2, 2, 2, 2, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 14, 4, 6, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 6, 0, 0, 0, 0, 1]
    },
    "cir014": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoenxertia gl√∫tea",
        tempo: 5.0,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 3, 0, 0, 1, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 9, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 1]
    },
    "cir015": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco incluindo regi√µes axilares + Lipoenxertia gl√∫tea + Rinoplastia secund√°ria",
        tempo: 8.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 4, 10, 2, 4, 2, 3, 2, 0, 5, 0, 0, 4, 3, 0, 7, 7, 8, 5, 0, 0, 0, 0, 2, 2, 2, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 13, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 5, 3, 0, 0, 0, 1]
    },
    "cir016": {
        nome: "Lipoaspira√ß√£o de regi√£o ventral do tronco",
        tempo: 2.0,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 2, 1, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir017": {
        nome: "Lipoaspira√ß√£o de submento",
        tempo: 0.8,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0]
    },
    "cir018": {
        nome: "Otoplastia",
        tempo: 2.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 1, 3, 3, 0, 2, 2, 3, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 3, 0, 0, 0, 0]
    },
    "cir019": {
        nome: "Macrotia",
        tempo: 2.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 1, 3, 0, 0, 2, 2, 3, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0]
    },
    "cir020": {
        nome: "Blefaroplastia superior",
        tempo: 1.2,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 1, 0, 0, 2, 2, 2, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir021": {
        nome: "Blefaroplastia inferior",
        tempo: 1.2,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 1, 0, 0, 2, 2, 2, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir022": {
        nome: "Aumento das regi√µes peitorais com inclus√£o de implantes de silicone",
        tempo: 2.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir023": {
        nome: "Explante",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir024": {
        nome: "Lipoaspira√ß√£o de regi√£o anterior do abdome para coleta de gordura",
        tempo: 0.7,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir025": {
        nome: "Lipoaspira√ß√£o de regi√£o dorsal do tronco",
        tempo: 2.5,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 2, 1, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir026": {
        nome: "Lipoaspira√ß√£o de laterais do t√≥rax",
        tempo: 1.0,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 2, 0, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir027": {
        nome: "Lipoaspira√ß√£o de axilas",
        tempo: 0.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir028": {
        nome: "Lipoaspira√ß√£o de regi√µes peitorais",
        tempo: 1.2,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir029": {
        nome: "Lipoaspira√ß√£o de p√∫bis",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir030": {
        nome: "Lipoaspira√ß√£o da face medial das coxas",
        tempo: 1.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 2, 0, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir031": {
        nome: "Lipoaspira√ß√£o de culotes",
        tempo: 1.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 2, 0, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir032": {
        nome: "Lipoenxertia facial",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0]
    },
    "cir033": {
        nome: "Ritidoplastia",
        tempo: 4.5,
        produtos: [1, 0, 2, 1, 1, 1, 1, 1, 2, 2, 1, 2, 2, 3, 2, 0, 3, 0, 1, 3, 0, 0, 7, 20, 20, 10, 3, 0, 3, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 6, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 0, 0, 0, 0]
    },
    "cir034": {
        nome: "Ginecomastia",
        tempo: 1.5,
        produtos: [0, 2, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 1, 3, 1, 2, 1, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir035": {
        nome: "Lipotorsoplastia",
        tempo: 8.5,
        produtos: [1, 0, 3, 1, 1, 1, 1, 1, 2, 13, 2, 4, 3, 6, 2, 0, 7, 1, 0, 9, 0, 4, 24, 24, 6, 4, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 12, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 5, 0, 0, 0, 0, 1]
    },
    "cir036": {
        nome: "Onfaloplastia",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 2, 0, 0, 1, 0, 1, 2, 2, 2, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir037": {
        nome: "Gluteopexia",
        tempo: 2.0,
        produtos: [1, 0, 2, 1, 1, 1, 0, 1, 1, 2, 1, 1, 1, 3, 1, 0, 4, 0, 0, 4, 0, 0, 10, 10, 4, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir038": {
        nome: "Mini-abdominoplastia",
        tempo: 2.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 3, 1, 0, 3, 1, 0, 3, 0, 2, 10, 10, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir039": {
        nome: "Aumento das panturrilhas com inclus√£o de implantes",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 0, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir040": {
        nome: "Gluteoplastia de aumento",
        tempo: 2.0,
        produtos: [1, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 0, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 0, 0, 0]
    },
    "cir041": {
        nome: "Ninfoplastia",
        tempo: 3.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 2, 1, 0, 3, 0, 0, 5, 1, 0, 3, 2, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir042": {
        nome: "Lipoaspira√ß√£o de regi√£o dorsal do tronco + Lipoenxertia gl√∫tea e subcis√£o",
        tempo: 3.5,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 3, 0, 0, 1, 0, 0, 4, 4, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 0, 0, 0, 0, 0]
    },
    "cir043": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoenxertia gl√∫tea e subcis√£o",
        tempo: 6.0,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 3, 1, 0, 1, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 1]
    },
    "cir044": {
        nome: "Rinoplastia + Mentoplastia",
        tempo: 5.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 2, 1, 3, 2, 0, 4, 0, 0, 9, 0, 0, 4, 4, 5, 5, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 5, 0, 0, 0, 0]
    },
    "cir045": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoenxertia gl√∫tea + Mastopexia sem uso de implantes",
        tempo: 9.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 3, 13, 2, 4, 3, 5, 3, 0, 9, 0, 0, 12, 0, 4, 30, 30, 14, 7, 0, 0, 0, 0, 2, 2, 2, 2, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 14, 4, 6, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 6, 0, 0, 0, 0, 0]
    },
    "cir046": {
        nome: "Rinoplastia + Alectomia Bilateral + Mentoplastia",
        tempo: 6.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 2, 1, 3, 2, 0, 4, 0, 0, 9, 0, 0, 4, 5, 6, 5, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 5, 0, 0, 0, 0]
    },
    "cir047": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco incluindo regi√µes peitorais",
        tempo: 5.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 4, 1, 0, 2, 0, 0, 6, 6, 6, 3, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 10, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 0, 0, 0, 0, 1]
    },
    "cir048": {
        nome: "Corre√ß√£o de cicatriz (mama)",
        tempo: 2.5,
        produtos: [0, 2, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 17, 17, 6, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0]
    },
    "cir049": {
        nome: "Corre√ß√£o de cicatriz (abdome)",
        tempo: 2.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 5, 0, 0, 17, 17, 6, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0]
    },
    "cir050": {
        nome: "Lipoaspira√ß√£o de submento + Lipoenxertia facial",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 2, 0, 0, 2, 0, 0, 0, 0, 4, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0]
    },
    "cir051": {
        nome: "Lipoaspira√ß√£o de axilas e laterais do t√≥rax",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir052": {
        nome: "Lipoaspira√ß√£o bilateral de bra√ßos",
        tempo: 1.7,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 2, 0, 0, 2, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir053": {
        nome: "Lipoaspira√ß√£o de regi√µes anteriores e posteriores do t√≥rax",
        tempo: 2.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 2, 1, 0, 2, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 5, 0, 0, 0, 0]
    },
    "cir054": {
        nome: "Lifting de sobrancelhas",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 1, 1, 0, 2, 2, 2, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir055": {
        nome: "Blefaroplastia superior e inferior",
        tempo: 2.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 1, 0, 2, 2, 0, 2, 4, 4, 6, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir056": {
        nome: "Platismoplastia",
        tempo: 0.7,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 3, 0, 0, 3, 2, 2, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0]
    },
    "cir057": {
        nome: "Ressec√ß√£o de excesso de pele em axilas",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 1, 2, 1, 0, 1, 0, 0, 3, 0, 0, 6, 6, 6, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 0, 0, 0, 0, 0]
    },
    "cir058": {
        nome: "Lipoaspira√ß√£o de regi√£o abdominal para coleta de gordura + Lipoenxertia em grandes l√°bios",
        tempo: 1.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir059": {
        nome: "Subcis√£o em cicatriz",
        tempo: 0.5,
        produtos: [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir060": {
        nome: "Flancoplastia bilateral + Abdominoplastia",
        tempo: 4.0,
        produtos: [1, 0, 5, 1, 1, 2, 0, 1, 2, 4, 2, 4, 3, 5, 2, 0, 8, 1, 0, 11, 0, 4, 25, 25, 8, 4, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 4, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 0, 0, 1]
    },
    "cir061": {
        nome: "Lipoenxertia em grandes l√°bios",
        tempo: 1.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir062": {
        nome: "Lobuloplastia bilateral",
        tempo: 1.2,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir063": {
        nome: "Lipoaspira√ß√£o de regi√£o hipog√°strica",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir064": {
        nome: "Lipoaspira√ß√£o de regi√£o anterior do abdome",
        tempo: 1.0,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 2, 1, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir065": {
        nome: "Corre√ß√£o de pectus excavatum",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir066": {
        nome: "Corre√ß√£o de ginecomastia",
        tempo: 1.7,
        produtos: [0, 2, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 1, 3, 1, 2, 1, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir067": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoaspira√ß√£o de coxas",
        tempo: 5.5,
        produtos: [1, 0, 7, 1, 1, 0, 0, 0, 2, 12, 2, 5, 2, 5, 2, 0, 7, 1, 0, 3, 0, 0, 11, 11, 11, 4, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 12, 5, 5, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 5, 0, 0, 0, 0, 1]
    },
    "cir068": {
        nome: "Flancoplastia bilateral",
        tempo: 1.0,
        produtos: [1, 0, 2, 1, 1, 1, 0, 1, 1, 2, 1, 1, 1, 3, 1, 0, 4, 0, 0, 4, 0, 0, 10, 10, 4, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir069": {
        nome: "Lipoaspira√ß√£o de coxas (face medial e culotes)",
        tempo: 2.0,
        produtos: [1, 0, 4, 1, 1, 0, 0, 0, 2, 4, 1, 2, 1, 2, 2, 0, 4, 0, 0, 2, 0, 0, 6, 6, 6, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 0, 0, 0]
    },
    "cir070": {
        nome: "Lipoaspira√ß√£o de laterais do t√≥rax e axilas",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir071": {
        nome: "Lipoaspira√ß√£o de ra√≠zes das coxas (faces mediais das coxas)",
        tempo: 1.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 2, 0, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir072": {
        nome: "Mastopexia secund√°ria",
        tempo: 4.5,
        produtos: [0, 2, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 20, 20, 7, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 1]
    },
    "cir073": {
        nome: "Lipoaspira√ß√£o secund√°ria circunferencial de tronco + Lipoenxertia / Lipoescultura gl√∫tea",
        tempo: 6.0,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 3, 0, 0, 1, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 9, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 1]
    },
    "cir074": {
        nome: "Ninfoplastia + Redu√ß√£o do capuz clitoriano",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 2, 1, 0, 3, 1, 1, 7, 1, 0, 3, 2, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir075": {
        nome: "Clitoroplastia",
        tempo: 1.5,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 3, 1, 0, 2, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir076": {
        nome: "Ninfoplastia + Redu√ß√£o do capuz clitoriano + Clitoroplastia",
        tempo: 2.5,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 2, 1, 0, 3, 1, 1, 10, 1, 0, 3, 2, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir077": {
        nome: "Corre√ß√£o de sindrome de Poland (inclus√£o de implante peitoral ¬± lipoenxertia)",
        tempo: 1.3,
        produtos: [0, 0, 2, 1, 1, 1, 0, 0, 1, 2, 2, 1, 1, 3, 1, 0, 4, 1, 0, 3, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir078": {
        nome: "Otoplastia (Corre√ß√£o de orelha de abano)",
        tempo: 2.2,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 1, 3, 0, 0, 2, 2, 3, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 3, 0, 0, 0, 0]
    },
    "cir079": {
        nome: "Otoplastia (Corre√ß√£o de macrotia)",
        tempo: 2.2,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 1, 3, 0, 0, 2, 2, 3, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0]
    },
    "cir080": {
        nome: "Cirurgia de explante",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir081": {
        nome: "Lipoaspira√ß√£o de regi√µes peitorais e laterais do t√≥rax",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir082": {
        nome: "Lipoaspira√ß√£o de regi√µes peitorais, axilas e laterais do t√≥rax",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir083": {
        nome: "Lipoaspira√ß√£o da face lateral das coxas",
        tempo: 2.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 2, 0, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir084": {
        nome: "Lipoaspira√ß√£o de coxas (faces medial e lateral das coxas)",
        tempo: 2.0,
        produtos: [1, 0, 4, 1, 1, 0, 0, 0, 2, 4, 1, 2, 1, 2, 2, 0, 4, 0, 0, 2, 0, 0, 6, 6, 6, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 0, 0, 0]
    },
    "cir085": {
        nome: "Lipoaspira√ß√£o dos culotes (faces laterais das coxas)",
        tempo: 0.7,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 2, 0, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 2, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir086": {
        nome: "Ritidoplastia / Lifting facial",
        tempo: 5.5,
        produtos: [1, 0, 2, 1, 1, 1, 1, 1, 2, 2, 1, 2, 2, 3, 2, 0, 3, 0, 1, 3, 0, 0, 7, 20, 20, 10, 3, 0, 3, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 6, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 0, 0, 0, 0]
    },
    "cir087": {
        nome: "Lipoabdominoplastia (com lipoaspira√ß√£o circunferencial de tronco)",
        tempo: 7.5,
        produtos: [1, 0, 3, 1, 1, 1, 1, 1, 2, 13, 2, 4, 3, 5, 2, 0, 6, 1, 0, 7, 0, 4, 20, 20, 4, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 10, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 4, 0, 0, 0, 0, 1]
    },
    "cir088": {
        nome: "Lipotorsoplastia (lipoaspira√ß√£o circunferencial de tronco + flancoplastia bilateral + abdominoplastia completa)",
        tempo: 8.5,
        produtos: [1, 0, 3, 1, 1, 1, 1, 1, 2, 13, 2, 4, 3, 6, 2, 0, 7, 1, 0, 9, 0, 4, 24, 24, 6, 4, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 12, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 5, 0, 0, 0, 0, 1]
    },
    "cir089": {
        nome: "Cruroplastia / Dermolipectomia de coxas",
        tempo: 2.0,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 0, 0, 4, 0, 0, 20, 20, 6, 4, 0, 0, 0, 0, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir090": {
        nome: "Braquioplastia / Dermolipectomia de bra√ßos",
        tempo: 1.7,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 0, 0, 4, 0, 0, 20, 20, 6, 4, 0, 0, 0, 0, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir091": {
        nome: "Mastopexia com inclus√£o de implantes + Ex√©rese de n√≥dulo",
        tempo: 5.0,
        produtos: [0, 3, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 21, 21, 8, 5, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0]
    },
    "cir092": {
        nome: "Mastopexia com inclus√£o de implantes + Ex√©rese de n√≥dulo + Lipoaspira√ß√£o circunferencial de tronco e abdominoplastia",
        tempo: 12.5,
        produtos: [1, 3, 3, 2, 2, 1, 1, 0, 4, 13, 2, 4, 3, 5, 1, 0, 10, 1, 0, 13, 0, 4, 40, 40, 12, 7, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 14, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 5, 4, 0, 0, 0, 0, 1]
    },
    "cir093": {
        nome: "Ex√©rese de n√≥dulo",
        tempo: 1.0,
        produtos: [0, 1, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 2, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir094": {
        nome: "Lifting de sobrancelhas / Cirurgia de Casta√±ares",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 1, 1, 0, 2, 2, 2, 3, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir095": {
        nome: "Transplante capilar",
        tempo: 6.5,
        produtos: [0, 0, 3, 1, 1, 0, 0, 0, 2, 3, 1, 5, 3, 4, 1, 0, 4, 0, 0, 2, 0, 0, 4, 4, 4, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 9, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 5, 2, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 2, 3, 8, 0, 0, 0, 0]
    },
    "cir096": {
        nome: "Torsoplastia (flancoplastia bilateral + abdominoplastia)",
        tempo: 4.0,
        produtos: [1, 0, 5, 1, 1, 2, 0, 1, 2, 4, 2, 4, 3, 5, 2, 0, 8, 1, 0, 11, 0, 4, 25, 25, 8, 4, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 4, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 0, 0, 1]
    },
    "cir097": {
        nome: "Lipoenxertia em mamas",
        tempo: 1.0,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir098": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco, incluindo laterais do t√≥rax e axilas",
        tempo: 4.8,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 3, 1, 0, 1, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 9, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 1]
    },
    "cir099": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco, incluindo axilas",
        tempo: 4.5,
        produtos: [1, 0, 3, 1, 1, 0, 0, 0, 2, 9, 2, 4, 2, 3, 2, 0, 3, 1, 0, 1, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 9, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 1]
    },
    "cir100": {
        nome: "Ex√©rese de quel√≥ide",
        tempo: 1.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 2, 0, 0, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir101": {
        nome: "Mentoplastia com inclus√£o de implante e biocer√¢mica",
        tempo: 2.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 2, 1, 1, 2, 1, 3, 1, 0, 2, 0, 0, 6, 0, 0, 2, 2, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 2, 0, 0, 0, 0]
    },
    "cir102": {
        nome: "Corre√ß√£o de h√©rnia",
        tempo: 1.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 2, 0, 1, 5, 5, 5, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir103": {
        nome: "Mastopexia secund√°ria (sem inclus√£o de implantes)",
        tempo: 4.5,
        produtos: [0, 2, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 20, 20, 7, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 1]
    },
    "cir104": {
        nome: "Lipoescultura gl√∫tea",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 2, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir105": {
        nome: "Transplante de sobrancelha",
        tempo: 4.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 4, 2, 4, 1, 0, 4, 0, 0, 2, 0, 0, 4, 4, 4, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 6, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 5, 2, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 2, 3, 6, 0, 0, 0, 0]
    },
    "cir106": {
        nome: "Implante de sobrancelha",
        tempo: 4.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 2, 1, 4, 2, 4, 1, 0, 4, 0, 0, 2, 0, 0, 4, 4, 4, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 6, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 5, 2, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 2, 3, 6, 0, 0, 0, 0]
    },
    "cir107": {
        nome: "Toracoplastia",
        tempo: 1.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 5, 0, 0, 12, 12, 6, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0]
    },
    "cir108": {
        nome: "Toracoplastia bilateral",
        tempo: 1.5,
        produtos: [0, 0, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 5, 0, 0, 12, 12, 6, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0]
    },
    "cir109": {
        nome: "Lipoaspira√ß√£o abdominal para coleta de gordura",
        tempo: 0.7,
        produtos: [0, 0, 1, 0, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 2, 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir110": {
        nome: "Subcis√£o em cicatriz localizada na mama",
        tempo: 4.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 2, 1, 0, 4, 1, 0, 2, 0, 0, 5, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir111": {
        nome: "Confec√ß√£o de loja submuscular/dual plane e inclus√£o de expansor",
        tempo: 2.0,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 2, 1, 2, 1, 0, 5, 1, 0, 4, 0, 0, 5, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir112": {
        nome: "Confec√ß√£o de loja submuscular/dual plane e inclus√£o de implante-expansor",
        tempo: 2.0,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 5, 1, 0, 4, 0, 0, 5, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
    },
    "cir113": {
        nome: "Reconstru√ß√£o de complexo ar√©olo-mamilar",
        tempo: 2.0,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 0, 2, 1, 1, 1, 2, 1, 0, 5, 0, 0, 4, 0, 0, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir114": {
        nome: "Retirada de expansor tecidual + Mamoplastia de aumento unilateral com inclus√£o de implante de silicone",
        tempo: 1.5,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir115": {
        nome: "Corre√ß√£o de Cicatriz",
        tempo: 1.5,
        produtos: [0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 3, 0, 0, 0, 0, 0, 4, 4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir116": {
        nome: "Lipoaspira√ß√£o de faces mediais das coxas + Lipoaspira√ß√£o de regi√£o posterior dos flancos",
        tempo: 2.0,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 0, 2, 1, 1, 0, 2, 1, 0, 4, 0, 0, 0, 0, 0, 3, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir117": {
        nome: "Subcis√£o + Lipoenxertia gl√∫tea",
        tempo: 1.5,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 4, 0, 0, 0, 0, 0, 3, 5, 5, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir118": {
        nome: "Mamoplastia de aumento \"h√≠brida\" com \"mastopexia interna\"",
        tempo: 2.0,
        produtos: [0, 2, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 2, 1, 0, 4, 0, 0, 20, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir119": {
        nome: "Flancoplastia bilateral + Corre√ß√£o de umbigo + Corre√ß√£o de cicatriz abdominal",
        tempo: 4.5,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 0, 5, 2, 0, 1, 2, 1, 0, 5, 1, 0, 6, 0, 3, 10, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir120": {
        nome: "Lipoaspira√ß√£o circunferencial de tronco + Lipoaspira√ß√£o de face medial das coxas + Lipoenxertia gl√∫tea",
        tempo: 6.5,
        produtos: [1, 0, 3, 1, 1, 1, 1, 1, 2, 13, 2, 4, 3, 5, 2, 0, 6, 1, 0, 7, 0, 4, 20, 20, 4, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 10, 4, 4, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 4, 0, 0, 0, 0, 0]
    },
    "cir121": {
        nome: "Lipoenxertia em Mama",
        tempo: 1.0,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 0, 2, 1, 0, 0, 1, 1, 0, 2, 0, 0, 0, 0, 0, 3, 3, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir122": {
        nome: "Lipoenxertia corporal (pequena)",
        tempo: 0.7,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0]
    },
    "cir123": {
        nome: "Mamoplastia com troca de implantes",
        tempo: 2.0,
        produtos: [0, 0, 1, 1, 1, 1, 0, 0, 1, 2, 1, 1, 1, 3, 1, 0, 4, 1, 0, 2, 0, 0, 5, 5, 2, 2, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir124": {
        nome: "Mastopexia com troca de implantes",
        tempo: 4.5,
        produtos: [0, 2, 2, 1, 1, 0, 0, 0, 2, 2, 1, 1, 1, 4, 2, 0, 4, 1, 0, 6, 0, 0, 20, 20, 7, 2, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0]
    },
    "cir125": {
        nome: "Implante/Transplante de barba",
        tempo: 6.0,
        produtos: [0, 0, 3, 1, 1, 0, 0, 0, 2, 3, 1, 5, 3, 4, 1, 0, 4, 0, 0, 2, 0, 0, 4, 4, 4, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 9, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 5, 2, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 2, 3, 8, 0, 0, 0, 0]
    },
    "cir126": {
        nome: "Ressec√ß√£o de excesso de pele em submento",
        tempo: 0.7,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0]
    },
    "cir127": {
        nome: "Lipoenxeria Gl√∫tea",
        tempo: 2.0,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 2, 1, 2, 1, 0, 2, 1, 0, 1, 0, 0, 3, 3, 3, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 2, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir128": {
        nome: "Torsoplastia",
        tempo: 4.0,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 1, 4, 1, 1, 2, 2, 0, 0, 4, 0, 0, 4, 0, 0, 3, 12, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir129": {
        nome: "Mastopexia secund√°ria com retirada de implantes de silicone",
        tempo: 4.5,
        produtos: [0, 2, 1, 1, 1, 1, 0, 0, 2, 5, 1, 1, 2, 1, 1, 1, 4, 1, 0, 5, 0, 0, 20, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir130": {
        nome: "Toracoplastia bilateral + Mastopexia com implantes",
        tempo: 5.5,
        produtos: [1, 2, 2, 1, 1, 0, 0, 0, 0, 3, 1, 2, 2, 4, 1, 0, 5, 1, 0, 7, 0, 0, 25, 15, 15, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir131": {
        nome: "Lipoenxertia em regi√£o medial da panturrilha esquerda",
        tempo: 1.0,
        produtos: [0, 0, 1, 0, 1, 1, 0, 0, 1, 2, 1, 1, 0, 1, 0, 0, 2, 0, 0, 3, 1, 1, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir132": {
        nome: "Lipoenxertia em regi√£o peitoral esquerda e em √°rea inferior do t√≥rax esquerdo",
        tempo: 1.0,
        produtos: [1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir133": {
        nome: "Lipoaspira√ß√£o bilateral de face medial de joelhos",
        tempo: 0.7,
        produtos: [0, 0, 2, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 2, 0, 0, 0, 0, 0, 3, 3, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir134": {
        nome: "Blefaroplastia Inferior",
        tempo: 1.2,
        produtos: [0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir135": {
        nome: "Lifting facial e cervical",
        tempo: 5.0,
        produtos: [1, 0, 1, 0, 1, 0, 0, 0, 1, 4, 2, 2, 1, 3, 1, 0, 5, 0, 1, 2, 0, 0, 7, 20, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0]
    },
    "cir136": {
        nome: "Lipoaspira√ß√£o de regi√£o central do abdome para coleta de gordura",
        tempo: 0.7,
        produtos: [0, 0, 1, 0, 1, 0, 0, 1, 0, 3, 1, 0, 1, 1, 1, 0, 2, 1, 0, 0, 0, 0, 3, 3, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir137": {
        nome: "Lipoenxertia em regi√£o peitoral D",
        tempo: 1.0,
        produtos: [0, 0, 1, 0, 1, 0, 0, 1, 0, 3, 1, 0, 1, 1, 0, 0, 3, 0, 0, 0, 0, 0, 3, 4, 4, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir138": {
        nome: "Inclus√£o de implante de peitoral direito",
        tempo: 2.2,
        produtos: [1, 0, 1, 0, 1, 0, 0, 1, 0, 3, 1, 0, 1, 1, 0, 0, 3, 0, 0, 0, 0, 0, 3, 3, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir139": {
        nome: "Alectomia Bilateral",
        tempo: 1.0,
        produtos: [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir140": {
        nome: "Lipoenxertia em l√°bio",
        tempo: 0.5,
        produtos: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir141": {
        nome: "Lipoaspira√ß√£o circunferencial da metade inferior do tronco (Flancos + parte inferior do abdome)",
        tempo: 2.0,
        produtos: [1, 0, 1, 0, 1, 0, 0, 1, 0, 8, 1, 1, 0, 3, 1, 0, 10, 1, 0, 0, 0, 0, 3, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir142": {
        nome: "Corre√ß√£o de cicatriz em regi√£o mentoniana",
        tempo: 1.5,
        produtos: [0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 5, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "cir143": {
        nome: "Ex√©rese de excesso de pele em regi√£o submentoniana",
        tempo: 2.0,
        produtos: [1, 0, 2, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 2, 0, 1, 2, 0, 0, 3, 8, 8, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir144": {
        nome: "Lifting facial e cervical + Platismoplastia",
        tempo: 0.7,
        produtos: [1, 0, 2, 1, 1, 0, 0, 0, 0, 2, 1, 2, 0, 1, 1, 0, 2, 0, 1, 2, 0, 8, 8, 20, 20, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0]
    },
    "cir145": {
        nome: "Mastopexia bilateral com retirada de implantes de silicone",
        tempo: 2.0,
        produtos: [1, 2, 0, 0, 1, 0, 0, 1, 0, 2, 1, 2, 3, 3, 1, 0, 5, 1, 0, 6, 0, 0, 20, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0]
    },
};

        // MUDAN√áA CR√çTICA: Array mut√°vel em vez de const
        let PRODUTOS = [
            {"cat":"PLANT√ÉO","nome":"Plant√£o noturno","regra":"max","valor":1010,"obs":"‚úÖ Lipoaspira√ß√£o / Lipoescultura ¬± outra cirurgia.\n‚úÖ (Lipo)abdominoplastia ¬± outra cirurgia\n‚úÖ Ritidoplastia.\n‚úÖ Transplante capilar (qdo √† tarde)."},
            {"cat":"BI√ìPSIA","nome":"Anatomopatol√≥gico","regra":"max","valor":150,"obs":"‚úÖ Mastopexia - 2.\n‚úÖ Mamoplastia redutora - 2.\n‚úÖ Ginecomastia - 2.\n‚úÖ Nevo(s) - 1 ou mais."},
            {"cat":"ANTISSEPSIA","nome":"Clorexidina alco√≥lica (+2)","regra":"max","valor":6,"obs":"‚úÖ Cirurgias maiores e com mudan√ßa de dec√∫bito."},
            {"cat":"CAUTERIZA√á√ÉO","nome":"Placa descart√°vel de caut√©rio","regra":"max","valor":25,"obs":"‚úÖ Cirurgias que envolvem ressec√ß√£o de tecido."},
            {"cat":"CAUTERIZA√á√ÉO","nome":"Caut√©rio esteriliz√°vel","regra":"max","valor":39,"obs":"‚úÖ Cirurgias que envolvem ressec√ß√£o de tecido. \n‚úÖ Op√ß√£o mais usada."},
            {"cat":"CAUTERIZA√á√ÉO","nome":"Caut√©rio descart√°vel","regra":"max","valor":39,"obs":""},
            {"cat":"CAUTERIZA√á√ÉO","nome":"Aparelho extra de caut√©rio","regra":"max","valor":66,"obs":""},
            {"cat":"CAUTERIZA√á√ÉO","nome":"Pin√ßa bipolar","regra":"max","valor":38,"obs":""},
            {"cat":"SANGRAMENTO","nome":"√Åcido tranex√¢mico","regra":"soma","valor":13,"obs":"‚úÖ Normalmente, em cirurgias na face. Exemplo: rinoplastia.\n‚úÖ Em alguns casos, em cirurgias corporais. Exemplo: lipoaspira√ß√£o."},
            {"cat":"SANGRAMENTO","nome":"Adrenalina","regra":"soma","valor":5,"obs":"‚úÖ Lipoaspira√ß√£o - 8.\n‚úÖ Lipoabdominoplastia - 8.\n‚úÖ Mastopexia / Mama redutora - 1.\n‚úÖ Mama aumento - 1.\n‚úÖ Ritidoplastia - 2.\n‚úÖ Rinoplastia - 1."},
            {"cat":"CAMPOS, PARAMENTA√á√ÉO E TRAJES","nome":"Kit cir√∫rgico universal","regra":"max","valor":225,"obs":"‚úÖ 1 kit (1 dec√∫bito).\n‚úÖ 2 kits (2 dec√∫bitos).\n‚úÖ 3 kits (3 dec√∫bitos)."},
            {"cat":"CAMPOS, PARAMENTA√á√ÉO E TRAJES","nome":"Avental / Capote avulso","regra":"max","valor":35,"obs":"‚úÖ 2 a 3 em cirurgias maiores."},
            {"cat":"CAMPOS, PARAMENTA√á√ÉO E TRAJES","nome":"Campo avulso","regra":"soma","valor":21,"obs":""},
            {"cat":"CAMPOS, PARAMENTA√á√ÉO E TRAJES","nome":"Luva cir√∫rgica","regra":"soma","valor":6,"obs":"‚úÖ A equipe tem direito a 4 pares de luvas em cirurgias at√© 4 horas e a 6 pares de luvas em cirurgias at√© 6 horas.\nExtras:\n‚úÖ Cirurgias menores - 2 pares.\n‚úÖ Cirurgias maiores - 3 pares."},
            {"cat":"MARCA√á√ÉO","nome":"Azul metileno (+2)","regra":"max","valor":13,"obs":""},
            {"cat":"CAMPOS, PARAMENTA√á√ÉO E TRAJES","nome":"Avental cir√∫rgico de pano","regra":"soma","valor":7,"obs":""},
            {"cat":"COMPRESSAS","nome":"Compressa cir√∫rgica est√©ril","regra":"soma","valor":32,"obs":""},
            {"cat":"COXINS","nome":"Coxim abdominal / Coxim de mama","regra":"max","valor":30,"obs":"‚úÖ Lipoaspira√ß√£o / Lipoescultura - 1.\n‚úÖ Lipoabdominoplastia - 1."},
            {"cat":"COXINS","nome":"Coxim facial","regra":"max","valor":20,"obs":"‚úÖ Ritidoplastia - 1."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Monocryl / Monosym","regra":"soma","valor":84,"obs":"‚úÖ Abdominoplastia - 4.\n‚úÖ Mastopexia / Mama redutora - 4.\n‚úÖ Mama aumento - 2.\n‚úÖ Ritidoplastia - 2.\n‚úÖ Mentoplastia - 1."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Sertix / Categut","regra":"soma","valor":31,"obs":"‚úÖ Rinoplastia - 1 a 2."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Prolene / Seda","regra":"soma","valor":26,"obs":"‚úÖ Abdominoplastia com plicatura - 3."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Mononylon incolor","regra":"soma","valor":35,"obs":"‚úÖ Mama aumento - 5.\n‚úÖ Mastopexia / Mama redutora - 20.\n‚úÖ Lipoaspira√ß√£o - 3.\n‚úÖ Abdominoplastia - 12.\n‚úÖ Ritidoplastia - 7.\n‚úÖ Otoplastia (abano e macro) - 5."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Mononylon preto (Biosut)","regra":"soma","valor":12,"obs":"MAIS USADO:\n‚úÖ Mama aumento - 4.\n‚úÖ Mastopexia / Mama redutora - 10.\n‚úÖ Abdominoplastia - 12.\n‚úÖ Lipoaspira√ß√£o - 7.\n‚úÖ Transplante capilar - 4.\n‚úÖ Blefaroplastia completa - 10.\n‚úÖ Ritidoplastia - 20.\n‚úÖ Rinoplastia - 5.\n‚úÖ Otoplastia (abano e macro) - 10."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Monylon preto 2-0 / 3-0 / 4-0 / 5-0","regra":"soma","valor":12,"obs":"MENOS USADO:\n‚úÖ Mama aumento - 4.\n‚úÖ Mastopexia / Mama redutora - 10.\n‚úÖ Abdominoplastia - 12.\n‚úÖ Lipoaspira√ß√£o - 7.\n‚úÖ Transplante capilar - 4.\n‚úÖ Blefaroplastia completa - 10.\n‚úÖ Ritidoplastia - 20.\n‚úÖ Rinoplastia - 5.\n‚úÖ Otoplastia (abano e macro) - 10."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Mononylon preto 6-0","regra":"soma","valor":22,"obs":"‚úÖ Blefaroplastia completa - 10.\n‚úÖ Ritidoplastia - 10.\n‚úÖ Rinoplastia - 5.\n‚úÖ Otoplastia (abano e macro) - 10."},
            {"cat":"FIOS CIR√öRGICOS","nome":"Caprofyl","regra":"soma","valor":44,"obs":""},
            {"cat":"FIOS CIR√öRGICOS","nome":"PDS","regra":"soma","valor":153,"obs":""},
            {"cat":"FIOS CIR√öRGICOS","nome":"Vicryl","regra":"soma","valor":48,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Instrumental pequeno","regra":"max","valor":13,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Instrumental m√©dio","regra":"max","valor":18,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Kit cir√∫rgico","regra":"max","valor":58,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Afastador cir√∫rgico","regra":"max","valor":13,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Pin√ßa cir√∫rgica instrumental","regra":"max","valor":13,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Tesoura instrumental","regra":"max","valor":13,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Cabo de fibra √≥tica","regra":"max","valor":161,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Paqu√≠metro","regra":"max","valor":31,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Protetor pl√°stico pequeno","regra":"max","valor":3,"obs":""},
            {"cat":"CIRURGIA ‚Äì PROCEDIMENTOS MENORES E KITS","nome":"Cirurgia ambulatorial (c/ kit b√°sico)","regra":"max","valor":850,"obs":""},
            {"cat":"CIRURGIA ‚Äì PROCEDIMENTOS MENORES E KITS","nome":"Pequena cirugia em bloco (c/ kit b√°sico)","regra":"max","valor":1300,"obs":""},
            {"cat":"CIRURGIA ‚Äì PROCEDIMENTOS MENORES E KITS","nome":"Kit curativo","regra":"max","valor":50,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"C√¢nula de guedel 01","regra":"max","valor":7,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"C√¢nula de guedel 02","regra":"max","valor":13,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"C√¢nula nasal","regra":"max","valor":12,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"C√¢nula nasofaringe","regra":"max","valor":31,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"C√¢nula pl√°stica de traqueostomia","regra":"max","valor":27,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"Conector","regra":"max","valor":3,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"Conector em Y","regra":"max","valor":8,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"Extens√£o de PVC","regra":"max","valor":18,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"Extens√£o de silicone","regra":"max","valor":18,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"Traqu√©ia m√©dia","regra":"max","valor":27,"obs":""},
            {"cat":"ANESTESIA ‚Äì VIAS A√âREAS","nome":"Fio guia","regra":"max","valor":31,"obs":""},
            {"cat":"ANESTESIA ‚Äì AGULHAS, SERINGAS E PERFUSORES","nome":"Agulha de peridural (+1)","regra":"max","valor":96,"obs":"‚úÖ Em cirurgias maiores √© a mais comum."},
            {"cat":"ANESTESIA ‚Äì AGULHAS, SERINGAS E PERFUSORES","nome":"Seringa de perda de resist√™ncia (+1)","regra":"max","valor":100,"obs":"‚úÖ Em cirurgias maiores √© a mais comum."},
            {"cat":"ANESTESIA ‚Äì AGULHAS, SERINGAS E PERFUSORES","nome":"Agulha de raquianestesia (+1)","regra":"max","valor":46,"obs":""},
            {"cat":"ANESTESIA ‚Äì AGULHAS, SERINGAS E PERFUSORES","nome":"Agulha ponta de l√°pis (+1)","regra":"max","valor":95,"obs":""},
            {"cat":"ANESTESIA ‚Äì AGULHAS, SERINGAS E PERFUSORES","nome":"Seringa perfusora (+1)","regra":"max","valor":81,"obs":""},
            {"cat":"ANESTESIA ‚Äì SEDA√á√ÉO E ANESTESIA GERAL","nome":"Propofol","regra":"max","valor":70,"obs":"‚úÖ Normalmente, 1 propofol por hora‚Ä¶\n‚úÖ Usado principalmente quando a anestesia √© local‚Ä¶"},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Seringa 50mL / 60mL (+2)","regra":"max","valor":26,"obs":"‚úÖ Usada em lipoaspira√ß√£o - 3."},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Soro fisiol√≥gico para lavar","regra":"soma","valor":10,"obs":""},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Mangueira de lipoaspira√ß√£o","regra":"max","valor":16,"obs":""},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Frasco de aspira√ß√£o grande","regra":"max","valor":36,"obs":""},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Frasco de aspira√ß√£o m√©dio","regra":"max","valor":31,"obs":""},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Frasco de pl√°stico m√©dio","regra":"max","valor":18,"obs":""},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Frasco de vidro m√©dio","regra":"max","valor":22,"obs":""},
            {"cat":"CIRURGIA ‚Äì LIPOASPIRA√á√ÉO","nome":"Vibrolipo (aluguel)","regra":"max","valor":460,"obs":""},
            {"cat":"CIRURGIA ‚Äì CIRURGIA ENDOSC√ìPICA","nome":"V√≠deo endosc√≥pico","regra":"max","valor":462,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Tela de Marlex","regra":"soma","valor":840,"obs":""},
            {"cat":"CIRURGIA ‚Äì TRANSPLANTE CAPILAR","nome":"Irrigador","regra":"max","valor":27,"obs":""},
            {"cat":"CIRURGIA ‚Äì TRANSPLANTE CAPILAR","nome":"Pente","regra":"max","valor":5,"obs":""},
            {"cat":"CIRURGIA ‚Äì TRANSPLANTE CAPILAR","nome":"Placa de pl√°stico","regra":"max","valor":3,"obs":""},
            {"cat":"CIRURGIA ‚Äì TRANSPLANTE CAPILAR","nome":"Microsc√≥pio (unidade qdo dispon√≠vel)","regra":"max","valor":220,"obs":""},
            {"cat":"CIRURGIA ‚Äì TRANSPLANTE CAPILAR","nome":"V√≠deo capilo","regra":"max","valor":297,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Dreno / Coletor (sistema aberto)","regra":"max","valor":16,"obs":""},
            {"cat":"CIRURGIA ‚Äì MATERIAIS DIVERSOS","nome":"Dreno portovac","regra":"max","valor":110,"obs":""},
            {"cat":"ESTERILIZA√á√ÉO DE OUTROS MATERIAIS","nome":"Micro motor","regra":"max","valor":71,"obs":""},
            {"cat":"ESTERILIZA√á√ÉO DE OUTROS MATERIAIS","nome":"Motor - LC 116/03","regra":"max","valor":62,"obs":""},
            {"cat":"ESTERILIZA√á√ÉO DE OUTROS MATERIAIS","nome":"Motor - LC 116/03 7.13","regra":"max","valor":89,"obs":""},
            {"cat":"ESTERILIZA√á√ÉO DE OUTROS MATERIAIS","nome":"Ponteira Bodytite","regra":"max","valor":214,"obs":""},
            {"cat":"ESTERILIZA√á√ÉO DE OUTROS MATERIAIS","nome":"Kit de ponteiras","regra":"max","valor":16,"obs":""},
            {"cat":"ESTERILIZA√á√ÉO DE OUTROS MATERIAIS","nome":"Kit emulo","regra":"max","valor":12,"obs":""},
            {"cat":"CAMPOS, PARAMENTA√á√ÉO E TRAJES","nome":"Roupa de bloco p/ acompanhante","regra":"soma","valor":40,"obs":""},
            {"cat":"ANESTESIA ‚Äì AGULHAS, SERINGAS E PERFUSORES","nome":"Perfusor de bomba infusora (+1)","regra":"max","valor":25,"obs":""},
            {"cat":"ANESTESIA ‚Äì SEDA√á√ÉO E ANESTESIA GERAL","nome":"Remifentanil","regra":"max","valor":105,"obs":""},
            {"cat":"ANESTESIA ‚Äì SEDA√á√ÉO E ANESTESIA GERAL","nome":"Dexmedetomidina (Precedex)","regra":"max","valor":95,"obs":"‚úÖ Normalmente, 1 dexmedetomidina por cirurgia‚Ä¶\n‚úÖ Usado principalmente quando a anestesia √© local‚Ä¶"},
            {"cat":"ANESTESIA ‚Äì SEDA√á√ÉO E ANESTESIA GERAL","nome":"Sevoflurano (anest√©sico inalat√≥rio)","regra":"max","valor":100,"obs":"Anest√©sico inalat√≥rio:\n‚úÖ Sevoflurano 20mL./h\n‚úÖ Anest√©sico usado em anestesia geral (20mL em cada hora)..."},
            {"cat":"REPOSI√á√ÉO VOL√äMICA","nome":"Voluven","regra":"soma","valor":93,"obs":""},
            {"cat":"PREVEN√á√ÉO DE TVP E HIPOTERMIA","nome":"Flebopress (Manguito pneum√°tico)","regra":"max","valor":90,"obs":""},
            {"cat":"PREVEN√á√ÉO DE TVP E HIPOTERMIA","nome":"Meia compressiva (venda)","regra":"max","valor":170,"obs":""},
            {"cat":"PREVEN√á√ÉO DE TVP E HIPOTERMIA","nome":"Manta t√©rmica","regra":"max","valor":70,"obs":""}
        ];

        let EQUIPES_DB = [
            { id: 1, nome: "Sobrancelhas", valor: 2250, ativo: true },
            { id: 2, nome: "Cabe√ßa", valor: 2480, ativo: true },
            { id: 3, nome: "Body Hair", valor: 3100, ativo: true },
            { id: 4, nome: "Cabe√ßa + Sobrancelhas", valor: 3320, ativo: true },
            { id: 5, nome: "Cabe√ßa + Barba", valor: 3470, ativo: true },
            { id: 6, nome: "Cabe√ßa (4 integradores)", valor: 3130, ativo: true }
        ];

        let IMPLANTES_DB = [
            // === MAMA - SILIMED ===
            { id: 1, nome: "Mama - Silimed BioDesign Maximum (Redondo) Pure Polyurethane (unidade)", valor: 1960, ativo: true },
            { id: 2, nome: "Mama - Silimed BioDesign Maximum (Redondo) Pure Polyurethane (par)", valor: 3920, ativo: true },
            { id: 3, nome: "Mama - Silimed BioDesign Maximum (Redondo) True Texture (unidade)", valor: 1748.50, ativo: true },
            { id: 4, nome: "Mama - Silimed BioDesign Maximum (Redondo) True Texture (par)", valor: 3497, ativo: true },
            { id: 5, nome: "Mama - Silimed BioDesign Advance (C√¥nico) Pure Polyurethane (unidade)", valor: 2520, ativo: true },
            { id: 6, nome: "Mama - Silimed BioDesign Advance (C√¥nico) Pure Polyurethane (par)", valor: 5040, ativo: true },
            { id: 7, nome: "Mama - Silimed Standard Maximum (Redondo) Pure Polyurethane (unidade)", valor: 1960, ativo: true },
            { id: 8, nome: "Mama - Silimed Standard Maximum (Redondo) Pure Polyurethane (par)", valor: 3920, ativo: true },
            { id: 9, nome: "Mama - Silimed Standard Maximum (Redondo) True Texture (unidade)", valor: 1580, ativo: true },
            { id: 10, nome: "Mama - Silimed Standard Maximum (Redondo) True Texture (par)", valor: 3160, ativo: true },
            
            // === MAMA - MOTIVA ===
            { id: 11, nome: "Mama - Motiva Implant Matrix Round SilkSurface (unidade)", valor: 1550, ativo: true },
            { id: 12, nome: "Mama - Motiva Implant Matrix Round SilkSurface (par)", valor: 3100, ativo: true },
            
            // === MAMA - GCA ===
            { id: 13, nome: "Mama - GCA The Round Collection Texturizado (unidade)", valor: 1800, ativo: true },
            { id: 14, nome: "Mama - GCA The Round Collection Texturizado (par)", valor: 3600, ativo: true },
            { id: 15, nome: "Mama - GCA Impleo Texturizado (unidade)", valor: 1800, ativo: true },
            { id: 16, nome: "Mama - GCA Impleo Texturizado (par)", valor: 3600, ativo: true },
            { id: 17, nome: "Mama - GCA Perle Liso Opaco (unidade)", valor: 1800, ativo: true },
            { id: 18, nome: "Mama - GCA Perle Liso Opaco (par)", valor: 3600, ativo: true },
            
            // === MAMA - LIFESIL ===
            { id: 19, nome: "Mama - LifeSil Adherence Macrotexturizado ‚â§450cc (unidade)", valor: 1127, ativo: true },
            { id: 20, nome: "Mama - LifeSil Adherence Macrotexturizado ‚â§450cc (par)", valor: 2254, ativo: true },
            { id: 21, nome: "Mama - LifeSil Adherence Macrotexturizado >450cc (unidade)", valor: 1202, ativo: true },
            { id: 22, nome: "Mama - LifeSil Adherence Macrotexturizado >450cc (par)", valor: 2404, ativo: true },
            
            // === MAMA - POLYTECH ===
            { id: 23, nome: "Mama - Polytech M√™me Microthane Poliuretano (unidade)", valor: 2618, ativo: true },
            { id: 24, nome: "Mama - Polytech M√™me Microthane Poliuretano (par)", valor: 5236, ativo: true },
            { id: 25, nome: "Mama - Polytech M√™me POLYtxt Texturizado (unidade)", valor: 2100, ativo: true },
            { id: 26, nome: "Mama - Polytech M√™me POLYtxt Texturizado (par)", valor: 4200, ativo: true },
            { id: 27, nome: "Mama - Polytech M√™me MESMOsensitive Microtexturizado (unidade)", valor: 2100, ativo: true },
            { id: 28, nome: "Mama - Polytech M√™me MESMOsensitive Microtexturizado (par)", valor: 4200, ativo: true },
            
            // === PEITORAL ===
            { id: 29, nome: "Peitoral - Silimed Contorno Corporal Liso (unidade)", valor: 2760, ativo: true },
            { id: 30, nome: "Peitoral - Silimed Contorno Corporal Liso (par)", valor: 5520, ativo: true },
            { id: 31, nome: "Peitoral - Silimed Contorno Corporal Texturizado (unidade)", valor: 2760, ativo: true },
            { id: 32, nome: "Peitoral - Silimed Contorno Corporal Texturizado (par)", valor: 5520, ativo: true },
            { id: 33, nome: "Peitoral - Polytech Contorno Corporal POLYsmooth (unidade)", valor: 2760, ativo: true },
            { id: 34, nome: "Peitoral - Polytech Contorno Corporal POLYsmooth (par)", valor: 5520, ativo: true },
            
            // === GL√öTEO - SILIMED ===
            { id: 35, nome: "Gl√∫teo - Silimed Redondo Robles Liso (unidade)", valor: 2270, ativo: true },
            { id: 36, nome: "Gl√∫teo - Silimed Redondo Robles Liso (par)", valor: 4540, ativo: true },
            { id: 37, nome: "Gl√∫teo - Silimed Anat√¥mico Quartzo Liso (unidade)", valor: 2270, ativo: true },
            { id: 38, nome: "Gl√∫teo - Silimed Anat√¥mico Quartzo Liso (par)", valor: 4540, ativo: true },
            
            // === GL√öTEO - POLYTECH ===
            { id: 39, nome: "Gl√∫teo - Polytech Redondo Base C√¥ncava POLYsmooth (unidade)", valor: 2760, ativo: true },
            { id: 40, nome: "Gl√∫teo - Polytech Redondo Base C√¥ncava POLYsmooth (par)", valor: 5520, ativo: true },
            { id: 41, nome: "Gl√∫teo - Polytech Redondo Base Plana POLYsmooth (unidade)", valor: 2760, ativo: true },
            { id: 42, nome: "Gl√∫teo - Polytech Redondo Base Plana POLYsmooth (par)", valor: 5520, ativo: true },
            { id: 43, nome: "Gl√∫teo - Polytech Anat√¥mico Base C√¥ncava POLYsmooth (unidade)", valor: 2760, ativo: true },
            { id: 44, nome: "Gl√∫teo - Polytech Anat√¥mico Base C√¥ncava POLYsmooth (par)", valor: 5520, ativo: true },
            { id: 45, nome: "Gl√∫teo - Polytech Anat√¥mico Base Plana POLYsmooth (unidade)", valor: 2760, ativo: true },
            { id: 46, nome: "Gl√∫teo - Polytech Anat√¥mico Base Plana POLYsmooth (par)", valor: 5520, ativo: true },
            { id: 47, nome: "Gl√∫teo - Polytech Anat√¥mico MESMOsensitive (unidade)", valor: 2760, ativo: true },
            { id: 48, nome: "Gl√∫teo - Polytech Anat√¥mico MESMOsensitive (par)", valor: 5520, ativo: true },
            
            // === GL√öTEO - GCA ===
            { id: 49, nome: "Gl√∫teo - GCA Redondo Liso (unidade)", valor: 2200, ativo: true },
            { id: 50, nome: "Gl√∫teo - GCA Redondo Liso (par)", valor: 4400, ativo: true },
            { id: 51, nome: "Gl√∫teo - GCA Anat√¥mico Liso (unidade)", valor: 2200, ativo: true },
            { id: 52, nome: "Gl√∫teo - GCA Anat√¥mico Liso (par)", valor: 4400, ativo: true },
            
            // === GL√öTEO - MOTIVA ===
            { id: 53, nome: "Gl√∫teo - Motiva GlutealArmonic Redondo SilkSurface (unidade)", valor: 1945, ativo: true },
            { id: 54, nome: "Gl√∫teo - Motiva GlutealArmonic Redondo SilkSurface (par)", valor: 3890, ativo: true },
            { id: 55, nome: "Gl√∫teo - Motiva GlutealArmonic Anat√¥mico SilkSurface (unidade)", valor: 1945, ativo: true },
            { id: 56, nome: "Gl√∫teo - Motiva GlutealArmonic Anat√¥mico SilkSurface (par)", valor: 3890, ativo: true },
            
            // === PANTURRILHA - SILIMED ===
            { id: 57, nome: "Panturrilha - Silimed Assim√©trico Montellano Liso (unidade)", valor: 2270, ativo: true },
            { id: 58, nome: "Panturrilha - Silimed Assim√©trico Montellano Liso (par)", valor: 4540, ativo: true },
            { id: 59, nome: "Panturrilha - Silimed Sim√©trico Glicenstein Liso (unidade)", valor: 2270, ativo: true },
            { id: 60, nome: "Panturrilha - Silimed Sim√©trico Glicenstein Liso (par)", valor: 4540, ativo: true },
            
            // === PANTURRILHA - POLYTECH ===
            { id: 61, nome: "Panturrilha - Polytech Anat√¥mico POLYsmooth (unidade)", valor: 2270, ativo: true },
            { id: 62, nome: "Panturrilha - Polytech Anat√¥mico POLYsmooth (par)", valor: 4540, ativo: true },
            { id: 63, nome: "Panturrilha - Polytech Moderado POLYsmooth (unidade)", valor: 2270, ativo: true },
            { id: 64, nome: "Panturrilha - Polytech Moderado POLYsmooth (par)", valor: 4540, ativo: true },
            
            // === PANTURRILHA - GCA ===
            { id: 65, nome: "Panturrilha - GCA Assim√©trico Liso (unidade)", valor: 2500, ativo: true },
            { id: 66, nome: "Panturrilha - GCA Assim√©trico Liso (par)", valor: 5000, ativo: true },
            { id: 67, nome: "Panturrilha - GCA Sim√©trico Liso (unidade)", valor: 2500, ativo: true },
            { id: 68, nome: "Panturrilha - GCA Sim√©trico Liso (par)", valor: 5000, ativo: true },
            
            // === FUNIL DE KELLER ===
            { id: 69, nome: "Hydrocone GCA (unidade)", valor: 450, ativo: true },
            { id: 70, nome: "Hydrocone GCA (caixa com 5)", valor: 2250, ativo: true },
            { id: 71, nome: "Sleeve Motiva (unidade)", valor: 500, ativo: true },
            { id: 72, nome: "Sleeve Motiva (caixa com 5)", valor: 2500, ativo: true },
            
            // === POREX / MEDPOR (Mento e Face) ===
            { id: 73, nome: "Mento - Medpor Button Chin Implant", valor: 5000, ativo: true },
            { id: 74, nome: "Mento - Medpor Two-Piece Chin Implant", valor: 5000, ativo: true },
            { id: 75, nome: "Face - Medpor Contorno Facial (formas variadas)", valor: 5000, ativo: true },
            
            // === BIOCER√ÇMICA ===
            { id: 76, nome: "Biocer√¢mica - Osteosynt (40:60 - 10g)", valor: 1857.21, ativo: true }
        ];

        let contadorImplantes = 0;

        let estadoGlobal = {
            paciente: {},
            cirurgias: {},
            produtos: {},
            tempoSomado: 0,
            tempoCalculo: 0,
            tempoCalculoEditadoManualmente: false, // FLAG DE CONTROLE - v6.6
            tempoAuxiliarEditadoManualmente: false, // FLAG DE CONTROLE - v6.22
            tempoAuxiliar: 0,
            internacao: {
                tipo: '',
                valorProdutos: 0,
                valorInfraestrutura: 0,
                percentualAnestesista: 0,
                ajuste: 0,
                total: 0
            },
            profissionais: {
                cirurgiao: { valor: 0, acrescimo: 0 },
                anestesista: { ativo: false, total: 0, recebe90: 0, estabelecimento10: 0 },
                auxiliar: { ativo: false, qtd: 1, tempo: 0, valor: 0 },
                instrumentadora: { ativo: false, qtd: 1, valor: 0 }
            },
            extras: {
                equipeEspecial: { ativo: false, qtd: 1, tipo: '', valor: 0 },
                implantes: { ativo: false, itens: [], total: 0 },
                outrosMateriais: { ativo: false, desc: '', qtd: 1, valor: 0 }
            },
            total: 0
        };

        // ==================== INICIALIZA√á√ÉO ====================
        
        window.onload = function() {
            console.log('üîÑ Inicializando sistema v6.4...');
            
            // ORDEM CR√çTICA: Carregar produtos ANTES de tudo
            carregarProdutosLocalStorage();
            
            // Carregar cirurgias customizadas do localStorage
            carregarCirurgiasLocalStorage();
            
            // Carregar equipes do localStorage
            const equipesStorage = localStorage.getItem('EQUIPES_DB');
            if (equipesStorage) {
                try {
                    EQUIPES_DB = JSON.parse(equipesStorage);
                    console.log('‚úÖ Equipes carregadas:', EQUIPES_DB.length);
                } catch (e) {
                    console.error('‚ùå Erro ao carregar equipes:', e);
                }
            }
            
            // Carregar configura√ß√µes
            carregarConfigPagamento();
            carregarConfigProfissionais();
            carregarConfigEstabelecimento();
            
            // Depois inicializar o resto
            inicializarSelects();
            inicializarBuscaCirurgias();
            renderizarTabela();
            renderizarListaCirurgias();
            renderizarListaEquipes();
            renderizarListaImplantesCadastro();
            renderizarListaProdutos();
            atualizarContadorProdutos();
            
            // Inicializar tempos com valores zero
            document.getElementById('tempoCalculo').value = '0.0';
            document.getElementById('tempoPaciente').value = '00:00';
            estadoGlobal.tempoSomado = 0;
            estadoGlobal.tempoCalculo = 0;
            
            // Preencher data atual automaticamente
            const hoje = new Date().toISOString().split('T')[0];
            document.getElementById('dataOrcamento').value = hoje;
            
            // Carregar dados do m√©dico e logo
            carregarDadosMedicoSalvos();
            
            // Carregar acr√©scimo do cirurgi√£o do localStorage
            const acrescimoSalvo = localStorage.getItem('acrescimoCirurgiao');
            if (acrescimoSalvo) {
                document.getElementById('acrescimoCirurgiao').value = acrescimoSalvo;
                estadoGlobal.profissionais.cirurgiao.acrescimo = parseFloat(acrescimoSalvo);
            }
            
            // Restaurar dados tempor√°rios (de "Novo Or√ßamento")
            const tempMedico = localStorage.getItem('temp_medico');
            const tempPaciente = localStorage.getItem('temp_paciente');
            
            if (tempMedico) {
                const dados = JSON.parse(tempMedico);
                document.getElementById('nomeMedico').value = dados.nome || '';
                document.getElementById('especialidadeMedico').value = dados.especialidade || '';
                document.getElementById('crmMedico').value = dados.crm || '';
                document.getElementById('rqeMedico').value = dados.rqe || '';
                localStorage.removeItem('temp_medico');
            }
            
            if (tempPaciente) {
                const dados = JSON.parse(tempPaciente);
                document.getElementById('nomePacienteOrcamento').value = dados.nome || '';
                document.getElementById('cpfPacienteOrcamento').value = dados.cpf || '';
                document.getElementById('dnPacienteOrcamento').value = dados.dn || '';
                document.getElementById('idadePacienteOrcamento').value = dados.idade || '';
                localStorage.removeItem('temp_paciente');
            }
            
            console.log('‚úÖ Sistema v6.4 inicializado com', PRODUTOS.length, 'produtos e', Object.keys(CIRURGIAS_DB).length, 'cirurgias');
        };

        
        // Filtro de busca para cirurgias
        function filtrarCirurgias(inputId, selectId) {
            const input = document.getElementById(inputId);
            const select = document.getElementById(selectId);
            const termo = input.value.toLowerCase().trim();
            
            // Guardar valor selecionado
            const valorAtual = select.value;
            
            // Limpar e repopular
            select.innerHTML = '<option value="">Selecione...</option>';
            
            // Ordenar alfabeticamente
            const cirurgiasOrdenadas = Object.keys(CIRURGIAS_DB).sort((a, b) => {
                return CIRURGIAS_DB[a].nome.localeCompare(CIRURGIAS_DB[b].nome, 'pt-BR');
            });
            
            cirurgiasOrdenadas.forEach(key => {
                const cir = CIRURGIAS_DB[key];
                const nome = cir.nome;
                if (termo === '' || nome.toLowerCase().includes(termo)) {
                    const opt = document.createElement('option');
                    opt.value = key;
                    // Mostrar tempo no dropdown para facilitar identifica√ß√£o
                    opt.textContent = `${nome} (${cir.tempo}h)`;
                    if (key === valorAtual) opt.selected = true;
                    select.appendChild(opt);
                }
            });
        }
        
        // Inicializar buscas
        function inicializarBuscaCirurgias() {
            for (let i = 1; i <= 6; i++) {
                const inputId = 'busca_cirurgia' + i;
                const selectId = 'cirurgia' + i;
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', () => filtrarCirurgias(inputId, selectId));
                }
            }
        }

        function inicializarSelects() {
            // Cirurgias
            for (let num = 1; num <= 6; num++) {
                const select = document.getElementById(`cirurgia${num}`);
                select.innerHTML = '<option value="">Selecione...</option>';
                
                // üé® Inicializar com classe vazia
                select.classList.add('cirurgia-vazia');
                
                // Ordenar cirurgias alfabeticamente
                const cirurgiasOrdenadas = Object.keys(CIRURGIAS_DB).sort((a, b) => {
                    return CIRURGIAS_DB[a].nome.localeCompare(CIRURGIAS_DB[b].nome, 'pt-BR');
                });
                
                cirurgiasOrdenadas.forEach(key => {
                    const opt = document.createElement('option');
                    opt.value = key;
                    const cir = CIRURGIAS_DB[key];
                    // Mostrar tempo no dropdown para facilitar identifica√ß√£o
                    opt.textContent = `${cir.nome} (${cir.tempo}h)`;
                    select.appendChild(opt);
                });
            }

            // Equipes Especializadas
            const selectEquipe = document.getElementById('tipoEquipeEspecial');
            selectEquipe.innerHTML = '<option value="">Selecione...</option>';
            EQUIPES_DB.forEach(eq => {
                if (eq.ativo) {
                    const opt = document.createElement('option');
                    opt.value = eq.id;
                    opt.textContent = `${eq.nome} - R$ ${eq.valor.toLocaleString('pt-BR')}`;
                    selectEquipe.appendChild(opt);
                }
            });

            // M√°scara CPF
            document.getElementById('cpfPaciente').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length <= 11) {
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                    e.target.value = value;
                }
            });
        }

        // ==================== NAVEGA√á√ÉO ====================
        
        function abrirAba(abaId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            
            document.getElementById(abaId).classList.add('active');
            
            const tabs = document.querySelectorAll('.tab');
            const abaMap = ['tabPaciente','tabCirurgias','tabProdutos','tabInternacao','tabProfissionais','tabExtras','tabConfiguracoes','tabOrcamento'];
            const idx = abaMap.indexOf(abaId);
            if (idx >= 0) tabs[idx].classList.add('active');

            // CR√çTICO v6.8: Ao abrir aba Interna√ß√£o, atualizar valor dos produtos
            if (abaId === 'tabInternacao') {
                console.log('üè• [v6.8] Abrindo aba Interna√ß√£o - verificando produtos...');
                // Garantir que temos o valor dos produtos atualizado
                if (estadoGlobal.produtos && estadoGlobal.produtos.total > 0) {
                    console.log(`‚úÖ [v6.8] Produtos j√° calculados: ${formatarMoeda(estadoGlobal.produtos.total)}`);
                    estadoGlobal.internacao.valorProdutos = estadoGlobal.produtos.total;
                    calcularInternacao(); // Recalcular interna√ß√£o com os produtos
                } else {
                    console.log('‚ö†Ô∏è [v6.8] Nenhum produto calculado ainda');
                }
            }

            if (abaId === 'tabOrcamento') {
                gerarResumoFinal();
            }
        }

        // ==================== PACIENTE ====================
        
        function calcularIdade() {
            const dataNasc = document.getElementById('dataNasc').value;
            if (!dataNasc) {
                document.getElementById('idadePaciente').value = '';
                return;
            }

            const nascimento = new Date(dataNasc);
            const hoje = new Date();
            
            let anos = hoje.getFullYear() - nascimento.getFullYear();
            let meses = hoje.getMonth() - nascimento.getMonth();
            let dias = hoje.getDate() - nascimento.getDate();

            if (dias < 0) {
                meses--;
                dias += new Date(hoje.getFullYear(), hoje.getMonth(), 0).getDate();
            }

            if (meses < 0) {
                anos--;
                meses += 12;
            }
            
            let idadeTexto = '';
            if (anos > 0) idadeTexto += `${anos} ano${anos > 1 ? 's' : ''}`;
            if (meses > 0) idadeTexto += `${idadeTexto ? ', ' : ''}${meses} m√™s${meses > 1 ? 'es' : ''}`;
            if (dias > 0 && anos === 0) idadeTexto += `${idadeTexto ? ' e ' : ''}${dias} dia${dias > 1 ? 's' : ''}`;
            
            document.getElementById('idadePaciente').value = idadeTexto;
            
            estadoGlobal.paciente = {
                nome: document.getElementById('nomePaciente').value,
                cpf: document.getElementById('cpfPaciente').value,
                dataNascimento: dataNasc,
                idade: idadeTexto
            };
        }

        // ==================== CIRURGIAS E TEMPO ====================
        
        function carregarCirurgia(numero) {
            const selectId = `cirurgia${numero}`;
            const selectElement = document.getElementById(selectId);
            const cirurgiaKey = selectElement.value;
            
            console.log(`üîß [v6.7] Carregando cirurgia ${numero}:`, cirurgiaKey);
            
            if (!cirurgiaKey) {
                // Limpar produtos da cirurgia
                PRODUTOS.forEach((prod, idx) => {
                    const input = document.getElementById(`qtd_${numero}_${idx}`);
                    if (input) input.value = 0;
                });
                document.getElementById(`nomeCir${numero}`).textContent = '-';
                estadoGlobal.cirurgias[numero] = null;
                
                // üé® REMOVER COR - dropdown vazio
                selectElement.classList.remove('cirurgia-selecionada');
                selectElement.classList.add('cirurgia-vazia');
                
                // v6.22: Resetar flag do auxiliar se n√£o h√° mais cirurgias
                const temCirurgias = Object.values(estadoGlobal.cirurgias).some(c => c !== null);
                if (!temCirurgias) {
                    estadoGlobal.tempoAuxiliarEditadoManualmente = false;
                }
                
                calcularTempoTotal();
                console.log('üîÑ [v6.7] RECALCULANDO COMBO ap√≥s remover cirurgia...');
                calcularCombo(); // Recalcular combo ao remover
                return;
            }
            
            const cirurgia = CIRURGIAS_DB[cirurgiaKey];
            console.log('‚úÖ Cirurgia encontrada:', cirurgia);
            
            estadoGlobal.cirurgias[numero] = cirurgia;
            
            // DEBUG v6.22
            console.log(`üíæ SALVO: slot ${numero} = ${cirurgiaKey}`);
            console.log(`   Nome: ${cirurgia.nome}`);
            console.log(`   Tempo: ${cirurgia.tempo}h`);
            console.log(`   Estado atual:`, JSON.stringify(Object.keys(estadoGlobal.cirurgias).map(k => {
                const c = estadoGlobal.cirurgias[k];
                return c ? `${k}:${c.tempo}h` : `${k}:null`;
            })));
            
            // üé® ADICIONAR COR - dropdown com cirurgia
            selectElement.classList.remove('cirurgia-vazia');
            selectElement.classList.add('cirurgia-selecionada');
            
            // Atualizar nome no cabe√ßalho (completo ou at√© 40 caracteres)
            const nomeExibir = cirurgia.nome.length > 40 ? cirurgia.nome.substring(0, 40) + '...' : cirurgia.nome;
            document.getElementById(`nomeCir${numero}`).textContent = nomeExibir;
            
            // CORRE√á√ÉO PRINCIPAL: Preencher quantidades de produtos
            console.log(`üì¶ Preenchendo ${cirurgia.produtos.length} produtos para cirurgia ${numero}`);
            
            PRODUTOS.forEach((prod, idx) => {
                const input = document.getElementById(`qtd_${numero}_${idx}`);
                if (input) {
                    const qtd = cirurgia.produtos[idx] || 0;
                    input.value = qtd;
                    if (qtd > 0) {
                        console.log(`  - Produto ${idx} (${prod.nome}): ${qtd}`);
                    }
                }
            });
            
            calcularTempoTotal();
            
            // CR√çTICO v6.7: SEMPRE recalcular combo ap√≥s carregar cirurgia
            console.log('üîÑ [v6.7] RECALCULANDO COMBO ap√≥s carregar cirurgia...');
            calcularCombo();
            console.log('‚úÖ [v6.7] COMBO recalculado!');
        }

        function calcularTempoTotal() {
            let total = 0;
            
            console.log('‚è±Ô∏è [v6.22] Calculando tempo total...');
            
            for (let i = 1; i <= 6; i++) {
                const cirurgia = estadoGlobal.cirurgias[i];
                if (cirurgia) {
                    console.log(`   Slot ${i}: ${cirurgia.nome?.substring(0,30)} - tempo: ${cirurgia.tempo}h`);
                    total += cirurgia.tempo;
                }
            }
            
            console.log(`   TOTAL: ${total}h`);
            
            estadoGlobal.tempoSomado = total;
            
            // Tempo para PACIENTE: SEMPRE mostra a SOMA das cirurgias em formato HH:MM
            const horasSoma = Math.floor(total);
            const minutosSoma = Math.round((total - horasSoma) * 60);
            const tempoSomaFormatado = `${horasSoma.toString().padStart(2,'0')}:${minutosSoma.toString().padStart(2,'0')}`;
            document.getElementById('tempoPaciente').value = tempoSomaFormatado;
            
            // Tempo de C√ÅLCULO: CR√çTICO - v6.6 CORRIGIDO
            // S√≥ atualiza se N√ÉO foi editado manualmente
            if (!estadoGlobal.tempoCalculoEditadoManualmente) {
                // Inicializa com a SOMA em formato decimal (ex: 7.5)
                document.getElementById('tempoCalculo').value = total.toFixed(1);
                estadoGlobal.tempoCalculo = total;
                console.log(`‚úÖ Tempo C√°lculo sincronizado: ${total.toFixed(1)}h`);
            } else {
                // Mant√©m valor editado manualmente
                console.log(`üîí Tempo C√°lculo mantido (editado manualmente): ${estadoGlobal.tempoCalculo}h`);
            }
            
            // v6.22: Tempo do AUXILIAR - Sugest√£o autom√°tica (edit√°vel)
            // S√≥ atualiza se n√£o foi editado manualmente
            const tempoAuxiliarInput = document.getElementById('tempoAuxiliar');
            if (tempoAuxiliarInput && !estadoGlobal.tempoAuxiliarEditadoManualmente) {
                tempoAuxiliarInput.value = total > 0 ? total.toFixed(2) : '';
                estadoGlobal.profissionais.auxiliar.tempo = total;
                console.log(`‚úÖ Tempo Auxiliar sugerido: ${total.toFixed(2)}h`);
            }
            
            calcularProfissionais();
            calcularInternacao();
        }

        function atualizarTempoCalculo() {
            const tempoCalculo = parseFloat(document.getElementById('tempoCalculo').value) || 0;
            
            // CR√çTICO v6.6: Detectar se foi editado manualmente
            // Compara com a soma atual para saber se est√° sincronizado
            if (Math.abs(tempoCalculo - estadoGlobal.tempoSomado) > 0.01) {
                // Diferente da soma = editado manualmente
                estadoGlobal.tempoCalculoEditadoManualmente = true;
                console.log(`‚úèÔ∏è Tempo C√°lculo editado MANUALMENTE: ${tempoCalculo}h (soma: ${estadoGlobal.tempoSomado}h)`);
            } else {
                // Igual √† soma = resincronizado
                estadoGlobal.tempoCalculoEditadoManualmente = false;
                console.log(`üîÑ Tempo C√°lculo resincronizado: ${tempoCalculo}h`);
            }
            
            estadoGlobal.tempoCalculo = tempoCalculo;
            
            // N√ÉO atualiza tempoPaciente aqui - ele sempre mostra a SOMA
            // Apenas recalcula profissionais e interna√ß√£o
            
            calcularProfissionais();
            calcularInternacao();
        }

        // ==================== PRODUTOS ====================
        
        function renderizarTabela() {
            const tbody = document.getElementById('tabelaBody');
            let html = '';

            console.log('üìä Renderizando tabela com', PRODUTOS.length, 'produtos');

            // PASSO 1: Agrupar produtos por categoria
            const produtosPorCategoria = {};
            PRODUTOS.forEach((produto, idx) => {
                if (!produtosPorCategoria[produto.cat]) {
                    produtosPorCategoria[produto.cat] = [];
                }
                produtosPorCategoria[produto.cat].push({ ...produto, idx });
            });
            
            // PASSO 2: Pegar categorias na ordem que aparecem pela primeira vez no array PRODUTOS
            const categoriasOrdenadas = [];
            PRODUTOS.forEach(produto => {
                if (!categoriasOrdenadas.includes(produto.cat)) {
                    categoriasOrdenadas.push(produto.cat);
                }
            });
            
            // PASSO 3: Renderizar produtos agrupados por categoria
            categoriasOrdenadas.forEach(categoria => {
                // Cabe√ßalho da categoria
                html += `
                    <tr class="categoria-row">
                        <td colspan="10">${categoria}</td>
                    </tr>
                `;
                
                // Produtos desta categoria
                produtosPorCategoria[categoria].forEach(produto => {
                    const regraBadge = produto.regra === 'soma' ? 
                        '<span class="regra-badge soma">SOMA</span>' : 
                        '<span class="regra-badge">M√ÅX</span>';
                    
                    html += `
                        <tr>
                            <td style="padding: 6px 8px;">
                                <div style="display: flex; flex-direction: column; gap: 2px;">
                                    <span style="font-size: 11px; font-weight: 600;">
                                        ${produto.nome} ${regraBadge}
                                    </span>
                                    <span style="color: #667eea; font-weight: 700; font-size: 10px;">${formatarMoeda(produto.valor)}</span>
                                </div>
                            </td>
                            <td style="text-align: center; padding: 4px;">
                                <button onclick="verObservacao(${produto.idx})" style="background: #6EC1E4; color: white; border: none; border-radius: 4px; width: 28px; height: 28px; font-size: 14px; cursor: pointer; font-weight: bold;" title="Ver observa√ß√£o">
                                    i
                                </button>
                            </td>
                            <td><input type="text" value="0" id="qtd_1_${produto.idx}" readonly style="background: #f8f9fa; cursor: not-allowed; text-align: center; border: 1px solid #dee2e6; padding: 6px; border-radius: 4px; width: 50px; color: #495057;"></td>
                            <td><input type="text" value="0" id="qtd_2_${produto.idx}" readonly style="background: #f8f9fa; cursor: not-allowed; text-align: center; border: 1px solid #dee2e6; padding: 6px; border-radius: 4px; width: 50px; color: #495057;"></td>
                            <td><input type="text" value="0" id="qtd_3_${produto.idx}" readonly style="background: #f8f9fa; cursor: not-allowed; text-align: center; border: 1px solid #dee2e6; padding: 6px; border-radius: 4px; width: 50px; color: #495057;"></td>
                            <td><input type="text" value="0" id="qtd_4_${produto.idx}" readonly style="background: #f8f9fa; cursor: not-allowed; text-align: center; border: 1px solid #dee2e6; padding: 6px; border-radius: 4px; width: 50px; color: #495057;"></td>
                            <td><input type="text" value="0" id="qtd_5_${produto.idx}" readonly style="background: #f8f9fa; cursor: not-allowed; text-align: center; border: 1px solid #dee2e6; padding: 6px; border-radius: 4px; width: 50px; color: #495057;"></td>
                            <td><input type="text" value="0" id="qtd_6_${produto.idx}" readonly style="background: #f8f9fa; cursor: not-allowed; text-align: center; border: 1px solid #dee2e6; padding: 6px; border-radius: 4px; width: 50px; color: #495057;"></td>
                            <td class="combo-col" id="combo_qtd_${produto.idx}">-</td>
                            <td class="combo-col" id="combo_valor_${produto.idx}">-</td>
                        </tr>
                    `;
                });
            });

            html += `
                <tr class="total-row">
                    <td colspan="8"><strong>TOTAL DE PRODUTOS</strong></td>
                    <td class="combo-col" id="total_qtd_combo">0</td>
                    <td class="combo-col" id="total_valor_combo">R$ 0</td>
                </tr>
            `;

            tbody.innerHTML = html;
            console.log('‚úÖ Tabela renderizada com', PRODUTOS.length, 'produtos');
            console.log('‚úÖ Bot√µes ‚ÑπÔ∏è criados:', PRODUTOS.length, '(um para cada produto)');
            
            // N√ÉO calcular combo aqui - s√≥ quando carregar cirurgia
        }
        
        // ==================== MODAL DE OBSERVA√á√ÉO ====================
        
        window.verObservacao = function(idx) {
            const produto = PRODUTOS[idx];
            console.log('‚ÑπÔ∏è Bot√£o clicado para produto:', produto.nome);
            
            document.getElementById('modalObsNomeProduto').textContent = produto.nome;
            
            const modalTexto = document.getElementById('modalObsTexto');
            
            if (produto.obs && produto.obs.trim() !== '') {
                // Converter quebras de linha em <br> e escapar HTML
                const textoFormatado = produto.obs
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/\n/g, '<br>');
                
                modalTexto.innerHTML = textoFormatado;
                modalTexto.style.background = '#f8f9fa';
                modalTexto.style.borderLeftColor = '#17a2b8';
                modalTexto.style.color = '#495057';
            } else {
                modalTexto.textContent = '‚ö†Ô∏è Este produto n√£o possui observa√ß√µes cadastradas.';
                modalTexto.style.background = '#fff3cd';
                modalTexto.style.borderLeftColor = '#ffc107';
                modalTexto.style.color = '#856404';
            }
            
            document.getElementById('modalObservacao').style.display = 'flex';
        }
        
        window.fecharModalObservacao = function() {
            document.getElementById('modalObservacao').style.display = 'none';
        }
        
        // Fechar modal com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('modalObservacao');
                if (modal && modal.style.display === 'flex') {
                    fecharModalObservacao();
                }
            }
        });

        function calcularCombo() {
            console.log('üßÆ [v6.7] ===== INICIANDO calcularCombo() =====');
            
            let totalValor = 0;
            let totalQtd = 0;
            
            PRODUTOS.forEach((produto, idx) => {
                let valores = [];
                
                for (let i = 1; i <= 6; i++) {
                    const input = document.getElementById(`qtd_${i}_${idx}`);
                    if (input) {
                        const val = parseInt(input.value) || 0;
                        valores.push(val);
                        if (val > 0) {
                            console.log(`  üìù Cir${i} - Produto ${idx} (${produto.nome}): ${val}`);
                        }
                    }
                }

                let qtdCombo = 0;
                
                if (produto.regra === 'soma') {
                    qtdCombo = valores.reduce((a, b) => a + b, 0);
                } else {
                    qtdCombo = Math.max(...valores, 0);
                }

                const valorUnitario = PRODUTOS[idx].valor;
                const valorCombo = qtdCombo * valorUnitario;

                document.getElementById(`combo_qtd_${idx}`).textContent = qtdCombo > 0 ? qtdCombo : '-';
                document.getElementById(`combo_valor_${idx}`).textContent = qtdCombo > 0 ? formatarMoeda(valorCombo) : '-';
                
                if (qtdCombo > 0) {
                    totalValor += valorCombo;
                    totalQtd++;
                    console.log(`  ‚úÖ ${produto.nome}: QTD=${qtdCombo} √ó ${formatarMoeda(valorUnitario)} = ${formatarMoeda(valorCombo)}`);
                }
                
                if (!estadoGlobal.produtos[idx]) estadoGlobal.produtos[idx] = {};
                estadoGlobal.produtos[idx].combo = qtdCombo;
                estadoGlobal.produtos[idx].valorCombo = valorCombo;
            });

            estadoGlobal.produtos.total = totalValor;
            estadoGlobal.internacao.valorProdutos = totalValor;
            
            console.log(`üí∞ [v6.7] TOTAL COMBO: ${formatarMoeda(totalValor)} (${totalQtd} produtos)`);
            console.log(`üè• [v6.7] Salvando em estadoGlobal.internacao.valorProdutos: ${formatarMoeda(totalValor)}`);
            
            document.getElementById('total_qtd_combo').textContent = totalQtd;
            document.getElementById('total_valor_combo').textContent = formatarMoeda(totalValor);
            document.getElementById('totalProdutos').textContent = formatarMoeda(totalValor);
            
            console.log('üîÑ [v6.7] Recalculando interna√ß√£o e totais...');
            calcularInternacao();
            recalcularTotais();
            
            console.log('‚úÖ [v6.7] ===== calcularCombo() CONCLU√çDO =====');
        }

        // ==================== INTERNA√á√ÉO ====================
        
        function calcularInternacao() {
            const tipo = document.getElementById('tipoInternacao').value;
            const ajuste = parseFloat(document.getElementById('ajusteInternacao').value) || 0;
            const tempo = estadoGlobal.tempoCalculo;
            const valorProdutos = estadoGlobal.internacao.valorProdutos || 0;
            
            console.log(`üè• [v6.8] calcularInternacao() - Produtos: ${formatarMoeda(valorProdutos)}, Tipo: ${tipo}, Tempo: ${tempo}h`);
            
            // CR√çTICO v6.8: Mesmo sem tipo, mostrar o valor dos produtos se existir
            if ((!tipo || tempo === 0) && valorProdutos === 0) {
                estadoGlobal.internacao = { tipo: '', valorProdutos: 0, valorInfraestrutura: 0, percentualAnestesista: 0, ajuste: 0, total: 0 };
                document.getElementById('valorInternacao').textContent = 'R$ 0,00';
                document.getElementById('detalhesInternacao').innerHTML = '';
                return;
            }
            
            // Se tem produtos mas n√£o tem tipo, mostrar s√≥ os produtos
            if (!tipo && valorProdutos > 0) {
                console.log(`‚ö†Ô∏è [v6.8] Sem tipo de interna√ß√£o, mas tem produtos: ${formatarMoeda(valorProdutos)}`);
                estadoGlobal.internacao = {
                    tipo: '',
                    valorProdutos: valorProdutos,
                    valorInfraestrutura: 0,
                    percentualAnestesista: 0,
                    ajuste: 0,
                    total: valorProdutos
                };
                document.getElementById('valorInternacao').textContent = formatarMoeda(valorProdutos);
                document.getElementById('detalhesInternacao').innerHTML = `
                    <div class="breakdown-item">
                        <span class="breakdown-label">Produtos (COMBO):</span>
                        <span class="breakdown-value">${formatarMoeda(valorProdutos)}</span>
                    </div>
                    <div class="alert alert-warning" style="margin-top: 10px; font-size: 11px;">
                        ‚ö†Ô∏è Selecione o <strong>Tipo de Interna√ß√£o</strong> acima para calcular infraestrutura
                    </div>
                `;
                return;
            }

            let valorInfra = 0;
            const cfg = getConfigEstabelecimento(); // Pegar valores configur√°veis

            if (tipo === 'local') {
                valorInfra = cfg.local;
                if (tempo > 1) {
                    const tempoExtra = tempo - 1;
                    const periodos30min = Math.ceil(tempoExtra * 2);
                    valorInfra += periodos30min * cfg.localExtra;
                }
            } else if (tipo === 'peridural') {
                valorInfra = cfg.peridural;
                if (tempo > 1) {
                    const tempoExtra = tempo - 1;
                    const periodos30min = Math.ceil(tempoExtra * 2);
                    valorInfra += periodos30min * cfg.periduralExtra;
                }
            } else if (tipo === 'geral') {
                valorInfra = cfg.geral;
                if (tempo > 1) {
                    const tempoExtra = tempo - 1;
                    const periodos30min = Math.ceil(tempoExtra * 2);
                    valorInfra += periodos30min * cfg.geralExtra;
                }
            } else if (tipo === 'sem') {
                valorInfra = cfg.sem;
            } else if (tipo === 'ambulatorio') {
                valorInfra = cfg.ambulatorio;
            }

            const percentualAnestesista = estadoGlobal.profissionais.anestesista.estabelecimento10 || 0;
            const total = valorProdutos + valorInfra + percentualAnestesista + ajuste;

            estadoGlobal.internacao = {
                tipo: tipo,
                valorProdutos: valorProdutos,
                valorInfraestrutura: valorInfra,
                percentualAnestesista: percentualAnestesista,
                ajuste: ajuste,
                total: total
            };

            document.getElementById('valorInternacao').textContent = formatarMoeda(total);
            
            let htmlDetalhes = `
                <div class="breakdown-item">
                    <span class="breakdown-label">Produtos (COMBO):</span>
                    <span class="breakdown-value">${formatarMoeda(valorProdutos)}</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Infraestrutura (tempo):</span>
                    <span class="breakdown-value">${formatarMoeda(valorInfra)}</span>
                </div>
            `;
            
            if (percentualAnestesista > 0) {
                htmlDetalhes += `
                    <div class="breakdown-item">
                        <span class="breakdown-label">10% Anestesista:</span>
                        <span class="breakdown-value">${formatarMoeda(percentualAnestesista)}</span>
                    </div>
                `;
            }
            
            if (ajuste > 0) {
                htmlDetalhes += `
                    <div class="breakdown-item ajuste">
                        <span class="breakdown-label">Ajuste/Corre√ß√£o (interno):</span>
                        <span class="breakdown-value">${formatarMoeda(ajuste)}</span>
                    </div>
                `;
            }
            
            document.getElementById('detalhesInternacao').innerHTML = htmlDetalhes;
            
            recalcularTotais();
        }

        // ==================== PROFISSIONAIS ====================
        
        function toggleProfissional(tipo) {
            const checkbox = document.getElementById(`check${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            const card = document.getElementById(`card${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            
            if (checkbox.checked) {
                card.style.display = 'block';
                estadoGlobal.profissionais[tipo].ativo = true;
                
                // v6.6: Ao ativar AUXILIAR, inicializar com tempo calculado
                if (tipo === 'auxiliar') {
                    const tempoCalculo = estadoGlobal.tempoCalculo || 0;
                    document.getElementById('tempoAuxiliar').value = tempoCalculo.toFixed(1);
                    estadoGlobal.profissionais.auxiliar.tempo = tempoCalculo;
                    calcularAuxiliar();
                }
            } else {
                card.style.display = 'none';
                estadoGlobal.profissionais[tipo].ativo = false;
                
                if (tipo === 'anestesista') {
                    document.getElementById('acrescimoAnestesista').value = '';
                    estadoGlobal.profissionais.anestesista = { ativo: false, total: 0, recebe90: 0, estabelecimento10: 0 };
                } else if (tipo === 'auxiliar') {
                    document.getElementById('acrescimoAuxiliar').value = '';
                    document.getElementById('tempoAuxiliar').value = '';
                    estadoGlobal.profissionais.auxiliar = { ativo: false, qtd: 1, tempo: 0, valor: 0 };
                } else if (tipo === 'instrumentadora') {
                    document.getElementById('acrescimoInstrumentadora').value = '';
                    estadoGlobal.profissionais.instrumentadora = { ativo: false, qtd: 1, valor: 0 };
                }
            }
            
            if (tipo === 'anestesista') calcularAnestesista();
            else if (tipo === 'auxiliar') calcularAuxiliar();
            else if (tipo === 'instrumentadora') calcularInstrumentadora();
        }

        function calcularProfissionais() {
            calcularCirurgiao();
            if (estadoGlobal.profissionais.anestesista.ativo) calcularAnestesista();
            if (estadoGlobal.profissionais.auxiliar.ativo) calcularAuxiliar();
            if (estadoGlobal.profissionais.instrumentadora.ativo) calcularInstrumentadora();
        }

        function calcularCirurgiao() {
            const tempo = estadoGlobal.tempoCalculo;
            
            if (tempo === 0) return;
            
            const cfg = getConfigProfissionais();
            
            let valorBase = cfg.cirurgiao.base;
            if (tempo > 2) {
                const tempoExtra = tempo - 2;
                const periodos15min = Math.ceil(tempoExtra * 4);
                valorBase += periodos15min * cfg.cirurgiao.por15min;
            }
            
            const retornos = document.getElementById('checkRetornos').checked ? cfg.cirurgiao.retornos : 0;
            const plus = document.getElementById('checkPlus').checked ? cfg.cirurgiao.plus : 0;
            const acrescimo = parseFloat(document.getElementById('acrescimoCirurgiao').value) || 0;
            
            localStorage.setItem('acrescimoCirurgiao', acrescimo);
            
            const total = valorBase + retornos + plus + acrescimo;
            
            estadoGlobal.profissionais.cirurgiao = { valor: total, acrescimo: acrescimo };
            
            document.getElementById('valorCirurgiao').textContent = formatarMoeda(total);
            
            let detalhes = `Base 2h: ${formatarMoeda(cfg.cirurgiao.base)} | Tempo: ${tempo.toFixed(2)}h<br>`;
            if (tempo > 2) {
                const periodos = Math.ceil((tempo - 2) * 4);
                detalhes += `Extras: ${periodos} √ó ${formatarMoeda(cfg.cirurgiao.por15min)}<br>`;
            }
            if (retornos > 0) detalhes += `Retornos: ${formatarMoeda(cfg.cirurgiao.retornos)}<br>`;
            if (plus > 0) detalhes += `PLUS: ${formatarMoeda(cfg.cirurgiao.plus)}<br>`;
            if (acrescimo > 0) detalhes += `Acr√©scimo: ${formatarMoeda(acrescimo)}`;
            
            document.getElementById('detalhesCirurgiao').innerHTML = detalhes;
            
            recalcularTotais();
        }

        function calcularAnestesista() {
            if (!estadoGlobal.profissionais.anestesista.ativo) {
                estadoGlobal.profissionais.anestesista = { ativo: false, total: 0, recebe90: 0, estabelecimento10: 0 };
                calcularInternacao();
                recalcularTotais();
                return;
            }

            const tempo = estadoGlobal.tempoCalculo;
            
            if (tempo === 0) return;
            
            // USAR VALORES CONFIGURADOS
            const cfg = getConfigProfissionais();
            let valorBase = cfg.anestesista.base;
            if (tempo > 2) {
                const tempoExtra = tempo - 2;
                const periodos15min = Math.ceil(tempoExtra * 4);
                valorBase += periodos15min * cfg.anestesista.por15min;
            }
            
            const acrescimo = parseFloat(document.getElementById('acrescimoAnestesista').value) || 0;
            const valorTotal = valorBase + acrescimo;
            
            const recebe90 = valorTotal * 0.90;
            const estabelecimento10 = valorTotal * 0.10;
            
            estadoGlobal.profissionais.anestesista = {
                ativo: true,
                total: valorTotal,
                recebe90: recebe90,
                estabelecimento10: estabelecimento10
            };
            
            document.getElementById('valorAnestesista').textContent = formatarMoeda(valorTotal);
            document.getElementById('anestesista90').textContent = formatarMoeda(recebe90);
            document.getElementById('estabelecimento10').textContent = formatarMoeda(estabelecimento10);
            
            let detalhes = `Base 2h: ${formatarMoeda(cfg.anestesista.base)} | Tempo: ${tempo.toFixed(2)}h<br>`;
            if (tempo > 2) {
                const periodos = Math.ceil((tempo - 2) * 4);
                detalhes += `Extras: ${periodos} √ó R$ 110<br>`;
            }
            if (acrescimo > 0) detalhes += `Acr√©scimo: ${formatarMoeda(acrescimo)}`;
            
            document.getElementById('detalhesAnestesista').innerHTML = detalhes;
            
            calcularInternacao();
            recalcularTotais();
        }

        function alterarContador(tipo, delta) {
            const countEl = document.getElementById(`count${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            let valor = parseInt(countEl.textContent) || 0;
            valor = Math.max(1, Math.min(2, valor + delta));
            countEl.textContent = valor;
            
            if (tipo === 'auxiliar') {
                estadoGlobal.profissionais.auxiliar.qtd = valor;
                calcularAuxiliar();
            } else if (tipo === 'instrumentadora') {
                estadoGlobal.profissionais.instrumentadora.qtd = valor;
                calcularInstrumentadora();
            } else if (tipo === 'equipeEspecial') {
                estadoGlobal.extras.equipeEspecial.qtd = valor;
                calcularEquipeEspecial();
            }
        }

        function calcularAuxiliar() {
            if (!estadoGlobal.profissionais.auxiliar.ativo) {
                estadoGlobal.profissionais.auxiliar = { ativo: false, qtd: 1, tempo: 0, valor: 0 };
                document.getElementById('valorAuxiliar').textContent = 'R$ 0,00';
                recalcularTotais();
                return;
            }

            const qtd = estadoGlobal.profissionais.auxiliar.qtd;
            const tempo = parseFloat(document.getElementById('tempoAuxiliar').value) || 0;
            
            if (tempo === 0) {
                document.getElementById('valorAuxiliar').textContent = 'R$ 0,00';
                document.getElementById('detalhesAuxiliar').textContent = 'Configure tempo do auxiliar';
                return;
            }
            
            // USAR VALORES CONFIGURADOS
            const cfg = getConfigProfissionais();
            let valorUnit = cfg.auxiliar.base;
            if (tempo > 2) {
                const tempoExtra = tempo - 2;
                const periodos30min = Math.ceil(tempoExtra * 2);
                valorUnit += periodos30min * cfg.auxiliar.por30min;
            }
            
            const acrescimo = parseFloat(document.getElementById('acrescimoAuxiliar').value) || 0;
            const total = (valorUnit * qtd) + acrescimo;
            
            estadoGlobal.profissionais.auxiliar = {
                ativo: true,
                qtd: qtd,
                tempo: tempo,
                valor: total
            };
            
            document.getElementById('valorAuxiliar').textContent = formatarMoeda(total);
            
            let detalhes = `${qtd} auxiliar${qtd > 1 ? 'es' : ''} √ó ${tempo.toFixed(2)}h<br>`;
            detalhes += `Valor unit√°rio: ${formatarMoeda(valorUnit)}<br>`;
            if (acrescimo > 0) detalhes += `Acr√©scimo: ${formatarMoeda(acrescimo)}`;
            
            document.getElementById('detalhesAuxiliar').innerHTML = detalhes;
            
            recalcularTotais();
        }

        function calcularInstrumentadora() {
            if (!estadoGlobal.profissionais.instrumentadora.ativo) {
                estadoGlobal.profissionais.instrumentadora = { ativo: false, qtd: 1, valor: 0 };
                document.getElementById('valorInstrumentadora').textContent = 'R$ 0,00';
                recalcularTotais();
                return;
            }

            const qtd = estadoGlobal.profissionais.instrumentadora.qtd;
            const tempo = estadoGlobal.tempoCalculo;
            
            if (tempo === 0) {
                document.getElementById('valorInstrumentadora').textContent = 'R$ 0,00';
                document.getElementById('detalhesInstrumentadora').textContent = 'Configure tempo primeiro';
                return;
            }
            
            // USAR VALORES CONFIGURADOS
            const cfg = getConfigProfissionais();
            let valorUnit = cfg.instrumentadora.base;
            if (tempo > 2) {
                const tempoExtra = tempo - 2;
                const periodos2h = Math.ceil(tempoExtra / 2);
                valorUnit += periodos2h * cfg.instrumentadora.por2h;
            }
            
            const acrescimo = parseFloat(document.getElementById('acrescimoInstrumentadora').value) || 0;
            const total = (valorUnit * qtd) + acrescimo;
            
            estadoGlobal.profissionais.instrumentadora = {
                ativo: true,
                qtd: qtd,
                valor: total
            };
            
            document.getElementById('valorInstrumentadora').textContent = formatarMoeda(total);
            
            let detalhes = `${qtd} instrumentadora${qtd > 1 ? 's' : ''} √ó ${tempo.toFixed(2)}h<br>`;
            detalhes += `Valor unit√°rio: ${formatarMoeda(valorUnit)}<br>`;
            if (acrescimo > 0) detalhes += `Acr√©scimo: ${formatarMoeda(acrescimo)}`;
            
            document.getElementById('detalhesInstrumentadora').innerHTML = detalhes;
            
            recalcularTotais();
        }

        // ==================== EXTRAS ====================
        
        function toggleExtra(tipo) {
            const checkbox = document.getElementById(`check${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            const card = document.getElementById(`card${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            
            if (checkbox.checked) {
                card.style.display = 'block';
                estadoGlobal.extras[tipo].ativo = true;
                
                if (tipo === 'implantes') {
                    if (estadoGlobal.extras.implantes.itens.length === 0) {
                        adicionarImplanteItem();
                    }
                }
            } else {
                card.style.display = 'none';
                estadoGlobal.extras[tipo].ativo = false;
                
                if (tipo === 'implantes') {
                    estadoGlobal.extras.implantes.itens = [];
                    estadoGlobal.extras.implantes.total = 0;
                }
            }
            
            if (tipo === 'equipeEspecial') calcularEquipeEspecial();
            else if (tipo === 'implantes') calcularImplantesTotal();
            else if (tipo === 'outrosMateriais') calcularOutrosMateriais();
        }

        function calcularEquipeEspecial() {
            if (!estadoGlobal.extras.equipeEspecial.ativo) {
                estadoGlobal.extras.equipeEspecial = { ativo: false, qtd: 1, tipo: '', valor: 0 };
                document.getElementById('valorEquipeEspecial').textContent = 'R$ 0,00';
                recalcularTotais();
                return;
            }

            const qtd = estadoGlobal.extras.equipeEspecial.qtd;
            const tipoId = parseInt(document.getElementById('tipoEquipeEspecial').value);
            
            if (!tipoId) {
                document.getElementById('valorEquipeEspecial').textContent = 'R$ 0,00';
                estadoGlobal.extras.equipeEspecial.valor = 0;
                recalcularTotais();
                return;
            }
            
            const equipe = EQUIPES_DB.find(e => e.id === tipoId);
            const total = equipe.valor * qtd;
            
            estadoGlobal.extras.equipeEspecial = {
                ativo: true,
                qtd: qtd,
                tipo: equipe.nome,
                valor: total
            };
            
            document.getElementById('valorEquipeEspecial').textContent = formatarMoeda(total);
            
            recalcularTotais();
        }

        function adicionarImplanteItem() {
            contadorImplantes++;
            const id = contadorImplantes;
            
            const item = {
                id: id,
                tipo: '',
                volume: '',
                qtd: 1,
                valor: 0
            };
            
            estadoGlobal.extras.implantes.itens.push(item);
            renderizarImplantes();
        }

        function removerImplanteItem(id) {
            estadoGlobal.extras.implantes.itens = estadoGlobal.extras.implantes.itens.filter(i => i.id !== id);
            renderizarImplantes();
            calcularImplantesTotal();
        }

        function renderizarImplantes() {
            const lista = document.getElementById('listaImplantes');
            let html = '';
            
            estadoGlobal.extras.implantes.itens.forEach((item, index) => {
                html += `
                    <div class="implante-item">
                        <div class="implante-item-header">
                            <div class="implante-numero">Implante ${index + 1}</div>
                            ${estadoGlobal.extras.implantes.itens.length > 1 ? 
                                `<button class="btn-remove-implante" onclick="removerImplanteItem(${item.id})">‚ùå Remover</button>` : 
                                ''}
                        </div>
                        <div class="implante-fields">
                            <div class="form-group" style="margin: 0;">
                                <select onchange="selecionarImplante(${item.id}, this.value)" style="width: 100%; padding: 8px; font-size: 13px;">
                                    <option value="">Selecione o tipo...</option>
                                    ${IMPLANTES_DB.filter(imp => imp.ativo).map(imp => 
                                        `<option value="${imp.id}" ${item.tipo === imp.id ? 'selected' : ''}>${imp.nome}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            <div class="form-group" style="margin: 0;">
                                <input type="text" placeholder="Volume (ex: 300cc)" value="${item.volume}" 
                                       onchange="atualizarVolumeImplante(${item.id}, this.value)"
                                       style="width: 100%; padding: 8px; font-size: 13px;">
                            </div>
                            <div class="implante-valor">${item.valor > 0 ? formatarMoeda(item.valor) : 'R$ 0,00'}</div>
                        </div>
                    </div>
                `;
            });
            
            lista.innerHTML = html;
        }

        function selecionarImplante(id, implante_id) {
            const item = estadoGlobal.extras.implantes.itens.find(i => i.id === id);
            if (!item) return;
            
            if (!implante_id) {
                item.tipo = '';
                item.valor = 0;
            } else {
                const implante = IMPLANTES_DB.find(i => i.id === parseInt(implante_id));
                item.tipo = parseInt(implante_id);
                item.valor = implante.valor;
            }
            
            renderizarImplantes();
            calcularImplantesTotal();
        }

        function atualizarVolumeImplante(id, volume) {
            const item = estadoGlobal.extras.implantes.itens.find(i => i.id === id);
            if (item) {
                item.volume = volume;
            }
        }

        function calcularImplantesTotal() {
            if (!estadoGlobal.extras.implantes.ativo) {
                estadoGlobal.extras.implantes.total = 0;
                document.getElementById('valorTotalImplantes').textContent = 'R$ 0,00';
                recalcularTotais();
                return;
            }

            let total = 0;
            estadoGlobal.extras.implantes.itens.forEach(item => {
                total += item.valor;
            });
            
            estadoGlobal.extras.implantes.total = total;
            document.getElementById('valorTotalImplantes').textContent = formatarMoeda(total);
            
            recalcularTotais();
        }

        function calcularOutrosMateriais() {
            if (!estadoGlobal.extras.outrosMateriais.ativo) {
                estadoGlobal.extras.outrosMateriais = { ativo: false, desc: '', qtd: 1, valor: 0 };
                document.getElementById('valorOutrosMateriais').textContent = 'R$ 0,00';
                recalcularTotais();
                return;
            }

            const desc = document.getElementById('descOutrosMateriais').value;
            const qtd = parseInt(document.getElementById('qtdOutrosMateriais').value) || 1;
            const valor = parseFloat(document.getElementById('valorOutrosMateriaisInput').value) || 0;
            
            estadoGlobal.extras.outrosMateriais = {
                ativo: true,
                desc: desc,
                qtd: qtd,
                valor: valor
            };
            
            document.getElementById('valorOutrosMateriais').textContent = formatarMoeda(valor);
            
            recalcularTotais();
        }

        // ==================== TOTALIZADOR ====================
        
        function recalcularTotais() {
            const totalEquipe = 
                estadoGlobal.profissionais.cirurgiao.valor +
                estadoGlobal.profissionais.anestesista.recebe90 +
                estadoGlobal.profissionais.auxiliar.valor +
                estadoGlobal.profissionais.instrumentadora.valor;
            
            document.getElementById('totalEquipe').textContent = formatarMoeda(totalEquipe);
            
            const totalExtras = 
                estadoGlobal.extras.equipeEspecial.valor +
                estadoGlobal.extras.implantes.total +
                estadoGlobal.extras.outrosMateriais.valor;
            
            document.getElementById('totalExtras').textContent = formatarMoeda(totalExtras);
            
            const valorTotal = 
                estadoGlobal.internacao.total +
                totalEquipe +
                totalExtras;
            
            estadoGlobal.total = valorTotal;
        }

        function gerarResumoFinal() {
            let html = '';
            
            const internacaoSemAjuste = estadoGlobal.internacao.total - estadoGlobal.internacao.ajuste;
            html += `
                <div class="resumo-item">
                    <span>üè• Interna√ß√£o/Estabelecimento:</span>
                    <strong>${formatarMoeda(internacaoSemAjuste)}</strong>
                </div>
            `;
            
            html += `
                <div class="resumo-item">
                    <span>ü©∫ Cirurgi√£o Principal:</span>
                    <strong>${formatarMoeda(estadoGlobal.profissionais.cirurgiao.valor)}</strong>
                </div>
            `;
            
            if (estadoGlobal.profissionais.anestesista.ativo) {
                html += `
                    <div class="resumo-item">
                        <span>üíâ Anestesista:</span>
                        <strong>${formatarMoeda(estadoGlobal.profissionais.anestesista.recebe90)}</strong>
                    </div>
                `;
            }
            
            if (estadoGlobal.profissionais.auxiliar.ativo && estadoGlobal.profissionais.auxiliar.valor > 0) {
                html += `
                    <div class="resumo-item">
                        <span>üë∑ Auxiliar:</span>
                        <strong>${formatarMoeda(estadoGlobal.profissionais.auxiliar.valor)}</strong>
                    </div>
                `;
            }
            
            if (estadoGlobal.profissionais.instrumentadora.ativo && estadoGlobal.profissionais.instrumentadora.valor > 0) {
                html += `
                    <div class="resumo-item">
                        <span>üîß Instrumentadora:</span>
                        <strong>${formatarMoeda(estadoGlobal.profissionais.instrumentadora.valor)}</strong>
                    </div>
                `;
            }
            
            if (estadoGlobal.extras.equipeEspecial.ativo && estadoGlobal.extras.equipeEspecial.valor > 0) {
                html += `
                    <div class="resumo-item">
                        <span>üë• Equipe Especializada:</span>
                        <strong>${formatarMoeda(estadoGlobal.extras.equipeEspecial.valor)}</strong>
                    </div>
                `;
            }
            
            if (estadoGlobal.extras.implantes.ativo && estadoGlobal.extras.implantes.total > 0) {
                estadoGlobal.extras.implantes.itens.forEach((item, index) => {
                    if (item.valor > 0) {
                        const implante = IMPLANTES_DB.find(i => i.id === item.tipo);
                        const nomeCompleto = implante ? `${implante.nome}${item.volume ? ' - ' + item.volume : ''}` : 'Implante';
                        html += `
                            <div class="resumo-item">
                                <span>üíé ${nomeCompleto}:</span>
                                <strong>${formatarMoeda(item.valor)}</strong>
                            </div>
                        `;
                    }
                });
            }
            
            if (estadoGlobal.extras.outrosMateriais.ativo && estadoGlobal.extras.outrosMateriais.valor > 0) {
                html += `
                    <div class="resumo-item">
                        <span>üì¶ ${estadoGlobal.extras.outrosMateriais.desc || 'Outros Materiais'}:</span>
                        <strong>${formatarMoeda(estadoGlobal.extras.outrosMateriais.valor)}</strong>
                    </div>
                `;
            }
            
            document.getElementById('resumoItens').innerHTML = html;
            
            const totalPaciente = estadoGlobal.total - estadoGlobal.internacao.ajuste;
            document.getElementById('valorTotalFinal').textContent = formatarMoeda(totalPaciente);
            
            gerarFormasPagamento(totalPaciente);
        }

        function gerarFormasPagamento(valorTotal) {
            // BUSCAR CONFIGURA√á√ïES SALVAS
            const configSalva = localStorage.getItem('config_pagamento');
            let taxaVistaNormal = 3.99;
            let taxaParcelado = 5.99;
            let arredondamento = 100;
            let entradaPercentual = 30;
            let numParcelas = 12;
            
            if (configSalva) {
                const cfg = JSON.parse(configSalva);
                taxaVistaNormal = cfg.taxaVistaNormal || 3.99;
                taxaParcelado = cfg.taxaParcelado || 5.99;
                arredondamento = cfg.arredondamento || 100;
                entradaPercentual = cfg.entradaPercentual || 30;
                numParcelas = cfg.numParcelas || 12;
            }

            // VALOR BASE = √Ä VISTA COM DESCONTO (j√° calculado, sem altera√ß√£o)
            const valorVistaDesconto = Math.round(valorTotal / arredondamento) * arredondamento;
            
            // √Ä VISTA NORMAL (base + taxa)
            const valorComTaxaVista = valorVistaDesconto * (1 + taxaVistaNormal / 100);
            const valorVistaNormal = Math.round(valorComTaxaVista / arredondamento) * arredondamento;
            
            // PARCELADO (base + taxa + entrada + parcelas)
            const valorComTaxaParcelado = valorVistaDesconto * (1 + taxaParcelado / 100);
            const valorParceladoTotal = Math.round(valorComTaxaParcelado / arredondamento) * arredondamento;
            const valorEntrada = Math.round((valorParceladoTotal * entradaPercentual / 100) / arredondamento) * arredondamento;
            const valorRestante = valorParceladoTotal - valorEntrada;
            const valorParcela = valorRestante / numParcelas;

            let html = `
                <div style="margin-top: 25px; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h4 style="color: #495057; margin-bottom: 15px; font-size: 16px;">üí≥ FORMAS DE PAGAMENTO</h4>
                    
                    <!-- VALOR BASE -->
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #6c757d; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 700; color: #495057; font-size: 15px;">üìä VALOR BASE DO OR√áAMENTO</div>
                                <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">Soma de todos os itens (antes das taxas)</div>
                            </div>
                            <div style="font-size: 24px; font-weight: 700; color: #495057;">
                                ${formatarMoeda(valorTotal)}
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; gap: 10px;">
                        <div style="background: white; padding: 12px; border-radius: 8px; border-left: 4px solid #28a745;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: 600; color: #495057; font-size: 14px;">üíö √Ä vista com desconto</div>
                                    <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">Base arredondada (sem taxa)</div>
                                </div>
                                <div style="font-size: 20px; font-weight: 700; color: #28a745;">
                                    ${formatarMoeda(valorVistaDesconto)}
                                </div>
                            </div>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 8px; border-left: 4px solid #667eea;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: 600; color: #495057; font-size: 14px;">üíô √Ä vista valor normal</div>
                                    <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">Base + taxa ${taxaVistaNormal}%</div>
                                </div>
                                <div style="font-size: 20px; font-weight: 700; color: #667eea;">
                                    ${formatarMoeda(valorVistaNormal)}
                                </div>
                            </div>
                        </div>

                        <div style="background: white; padding: 12px; border-radius: 8px; border-left: 4px solid #ffc107;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: 600; color: #495057; font-size: 14px;">üíõ Parcelado</div>
                                    <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">
                                        Base + taxa ${taxaParcelado}%<br>
                                        Entrada ${formatarMoeda(valorEntrada)} (${entradaPercentual}%) + ${numParcelas}√ó ${formatarMoeda(valorParcela)}
                                    </div>
                                </div>
                                <div style="font-size: 20px; font-weight: 700; color: #ffc107;">
                                    ${formatarMoeda(valorParceladoTotal)}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('formasPagamento').innerHTML = html;
        }

        // ==================== CADASTROS ====================
        
        function renderizarListaCirurgias() {
            const lista = document.getElementById('listaCirurgias');
            if (!lista) return;
            
            let html = '';
            // v6.22: Ordena√ß√£o alfab√©tica
            Object.keys(CIRURGIAS_DB).sort((a, b) => {
                return CIRURGIAS_DB[a].nome.localeCompare(CIRURGIAS_DB[b].nome, 'pt-BR');
            }).forEach(key => {
                const cir = CIRURGIAS_DB[key];
                html += `
                    <div class="lista-item">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: #495057; font-size: 13px;">${cir.nome}</div>
                            <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">‚è±Ô∏è ${cir.tempo.toFixed(2)}h</div>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-warning" onclick="editarCirurgia('${key}')">‚úèÔ∏è</button>
                            <button class="btn btn-sm btn-danger" onclick="removerCirurgia('${key}')">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            });
            lista.innerHTML = html;
            
            // Atualizar contador
            const contador = document.getElementById('contadorCirurgias');
            if (contador) {
                contador.textContent = Object.keys(CIRURGIAS_DB).length;
            }
        }

        function renderizarListaEquipes() {
            const lista = document.getElementById('listaEquipes');
            if (!lista) return;
            
            let html = '';
            let contadorAtivos = 0;
            // v6.22: Ordena√ß√£o alfab√©tica
            [...EQUIPES_DB].sort((a, b) => a.nome.localeCompare(b.nome, 'pt-BR')).forEach(eq => {
                if (eq.ativo) {
                    contadorAtivos++;
                    html += `
                        <div class="lista-item">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: #495057; font-size: 13px;">${eq.nome}</div>
                                <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">${formatarMoeda(eq.valor)}</div>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-warning" onclick="editarEquipe(${eq.id})">‚úèÔ∏è</button>
                                <button class="btn btn-sm btn-danger" onclick="removerEquipe(${eq.id})">üóëÔ∏è</button>
                            </div>
                        </div>
                    `;
                }
            });
            lista.innerHTML = html;
            
            // Atualizar contador
            const contador = document.getElementById('contadorEquipes');
            if (contador) {
                contador.textContent = contadorAtivos;
            }
        }

        function renderizarListaImplantesCadastro() {
            const lista = document.getElementById('listaImplantesCadastro');
            if (!lista) return;
            
            let html = '';
            let contadorAtivos = 0;
            // v6.22: Ordena√ß√£o alfab√©tica
            [...IMPLANTES_DB].sort((a, b) => a.nome.localeCompare(b.nome, 'pt-BR')).forEach(imp => {
                if (imp.ativo) {
                    contadorAtivos++;
                    html += `
                        <div class="lista-item">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: #495057; font-size: 13px;">${imp.nome}</div>
                                <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">${formatarMoeda(imp.valor)}</div>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-warning" onclick="editarImplanteCadastro(${imp.id})">‚úèÔ∏è</button>
                                <button class="btn btn-sm btn-danger" onclick="removerImplanteCadastro(${imp.id})">üóëÔ∏è</button>
                            </div>
                        </div>
                    `;
                }
            });
            lista.innerHTML = html;
            
            // Atualizar contador
            const contador = document.getElementById('contadorImplantes');
            if (contador) {
                contador.textContent = contadorAtivos;
            }
        }

        function adicionarCirurgia() {
            document.getElementById('nova_cirurgia_nome').value = '';
            document.getElementById('nova_cirurgia_tempo').value = '';
            document.getElementById('modalCirurgiaSimples').style.display = 'flex';
        }
        
        function fecharModalCirurgiaSimples() {
            document.getElementById('modalCirurgiaSimples').style.display = 'none';
        }
        
        function salvarNovaCirurgia() {
            const nome = document.getElementById('nova_cirurgia_nome').value.trim();
            const tempo = parseFloat(document.getElementById('nova_cirurgia_tempo').value);
            
            if (!nome) {
                alert('‚ùå Nome n√£o pode estar vazio!');
                return;
            }
            
            if (isNaN(tempo) || tempo <= 0) {
                alert('‚ùå Tempo inv√°lido!');
                return;
            }
            
            const key = 'cirurgia_' + Date.now();
            const produtos = new Array(PRODUTOS.length).fill(0);
            
            CIRURGIAS_DB[key] = {
                nome: nome,
                tempo: tempo,
                produtos: produtos
            };
            
            localStorage.setItem('CIRURGIAS_DB', JSON.stringify(CIRURGIAS_DB));
            renderizarListaCirurgias();
            inicializarSelects();
            
            fecharModalCirurgiaSimples();
            alert('‚úÖ Cirurgia adicionada com sucesso!');
        }

        function editarCirurgia(key) {
            const cirurgia = CIRURGIAS_DB[key];
            if (!cirurgia) {
                alert('‚ùå Cirurgia n√£o encontrada!');
                return;
            }
            
            // Guardar key para usar no salvar
            window.cirurgiaEmEdicao = key;
            
            // Atualizar t√≠tulo
            document.getElementById('modalTituloCirurgia').textContent = `‚úèÔ∏è Editar Cirurgia`;
            
            // Gerar conte√∫do
            let html = `
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #667eea;">
                    <h4 style="color: #495057; margin-bottom: 15px; font-size: 14px;">üîß Dados da Cirurgia</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">Nome da Cirurgia:</label>
                            <input type="text" id="modal_nome_cirurgia" value="${cirurgia.nome}" style="width: 100%; padding: 8px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                        </div>
                        <div>
                            <label style="display: block; font-weight: 600; color: #495057; font-size: 12px; margin-bottom: 6px;">Tempo (horas):</label>
                            <input type="number" id="modal_tempo_cirurgia" value="${cirurgia.tempo}" step="0.25" min="0" style="width: 100%; padding: 8px 12px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 13px;">
                        </div>
                    </div>
                    <div style="font-size: 12px; color: #6c757d; line-height: 1.6; padding-top: 12px; border-top: 1px solid #e9ecef;">
                        <strong>üìã Produtos:</strong><br>
                        ‚Ä¢ Use os bot√µes <strong>-</strong> e <strong>+</strong> para ajustar quantidades<br>
                        ‚Ä¢ <span class="regra-badge soma">SOMA</span> = soma quantidades de todas cirurgias | <span class="regra-badge">M√ÅX</span> = usa o maior valor
                    </div>
                </div>
            `;
            
            // PASSO 1: Agrupar produtos por categoria
            const produtosPorCategoria = {};
            PRODUTOS.forEach((produto, idx) => {
                if (!produtosPorCategoria[produto.cat]) {
                    produtosPorCategoria[produto.cat] = [];
                }
                produtosPorCategoria[produto.cat].push({ ...produto, idx });
            });
            
            // PASSO 2: Pegar categorias na ordem que aparecem pela primeira vez
            const categoriasOrdenadas = [];
            PRODUTOS.forEach(produto => {
                if (!categoriasOrdenadas.includes(produto.cat)) {
                    categoriasOrdenadas.push(produto.cat);
                }
            });
            
            // PASSO 3: Renderizar produtos agrupados por categoria
            categoriasOrdenadas.forEach(categoria => {
                // Cabe√ßalho da categoria
                html += `<div class="categoria-modal-header">${categoria}</div>`;
                
                // Produtos desta categoria
                produtosPorCategoria[categoria].forEach(produto => {
                    // Quantidade atual (ou 0 se n√£o existe)
                    const qtdAtual = cirurgia.produtos[produto.idx] || 0;
                    
                    // Badge de regra
                    const regraBadge = produto.regra === 'soma' ? 
                        '<span class="regra-badge soma">SOMA</span>' : 
                        '<span class="regra-badge">M√ÅX</span>';
                    
                    // Item do produto
                    html += `
                        <div class="produto-modal-item">
                            <div style="flex: 1;">
                                <div class="produto-modal-nome">${produto.nome} ${regraBadge}</div>
                                <div class="produto-modal-info">
                                    ${formatarMoeda(produto.valor)} por unidade
                                    <button onclick="verObservacao(${produto.idx}); event.stopPropagation();" style="background: #6EC1E4; color: white; border: none; border-radius: 4px; padding: 2px 8px; font-size: 11px; margin-left: 8px; cursor: pointer; font-weight: bold;" title="Ver observa√ß√£o">‚ÑπÔ∏è</button>
                                </div>
                            </div>
                            <div class="produto-modal-controls">
                                <button class="produto-modal-btn" onclick="alterarQtdProdutoModal(${produto.idx}, -1)">‚àí</button>
                                <div class="produto-modal-value" id="modal_qtd_${produto.idx}">${qtdAtual}</div>
                                <button class="produto-modal-btn" onclick="alterarQtdProdutoModal(${produto.idx}, 1)">+</button>
                            </div>
                        </div>
                    `;
                });
            });
            
            document.getElementById('modalBodyCirurgia').innerHTML = html;
            
            // Mostrar modal
            document.getElementById('modalEditarCirurgia').classList.add('active');
            document.body.style.overflow = 'hidden'; // Bloquear scroll do body
        }

        function alterarQtdProdutoModal(idxProduto, delta) {
            const elemento = document.getElementById(`modal_qtd_${idxProduto}`);
            let qtd = parseInt(elemento.textContent) || 0;
            qtd = Math.max(0, Math.min(99, qtd + delta)); // Min 0, Max 99
            elemento.textContent = qtd;
        }

        function fecharModalCirurgia() {
            document.getElementById('modalEditarCirurgia').classList.remove('active');
            document.body.style.overflow = 'auto'; // Restaurar scroll
            window.cirurgiaEmEdicao = null;
        }

        function fecharModalSeClicouFora(event) {
            if (event.target.classList.contains('modal-overlay')) {
                fecharModalCirurgia();
            }
        }

        function salvarEdicaoCirurgia() {
            const key = window.cirurgiaEmEdicao;
            if (!key || !CIRURGIAS_DB[key]) {
                alert('‚ùå Erro ao salvar!');
                return;
            }
            
            // Coletar nome e tempo
            const novoNome = document.getElementById('modal_nome_cirurgia').value.trim();
            const novoTempo = parseFloat(document.getElementById('modal_tempo_cirurgia').value) || 0;
            
            if (!novoNome) {
                alert('‚ùå Nome da cirurgia n√£o pode estar vazio!');
                return;
            }
            
            if (novoTempo <= 0) {
                alert('‚ùå Tempo deve ser maior que zero!');
                return;
            }
            
            // Coletar quantidades
            const novasQuantidades = [];
            PRODUTOS.forEach((produto, idx) => {
                const elemento = document.getElementById(`modal_qtd_${idx}`);
                const qtd = parseInt(elemento.textContent) || 0;
                novasQuantidades.push(qtd);
            });
            
            // Atualizar banco
            CIRURGIAS_DB[key].nome = novoNome;
            CIRURGIAS_DB[key].tempo = novoTempo;
            CIRURGIAS_DB[key].produtos = novasQuantidades;
            
            // Salvar no localStorage
            localStorage.setItem('CIRURGIAS_DB', JSON.stringify(CIRURGIAS_DB));
            
            // Fechar modal
            fecharModalCirurgia();
            
            // Atualizar lista de cirurgias
            renderizarListaCirurgias();
            
            // Atualizar selects
            inicializarSelects();
            
            // Atualizar tabela se alguma cirurgia estiver selecionada
            for (let i = 1; i <= 6; i++) {
                const select = document.getElementById(`cirurgia${i}`);
                if (select && select.value === key) {
                    carregarCirurgia(i);
                }
            }
            
            alert('‚úÖ Cirurgia atualizada com sucesso!');
        }

        function removerCirurgia(key) {
            const cirurgia = CIRURGIAS_DB[key];
            abrirModalExclusao(
                `Deseja realmente excluir a cirurgia "${cirurgia.nome}"?`,
                () => {
                    delete CIRURGIAS_DB[key];
                    renderizarListaCirurgias();
                    alert('‚úÖ Cirurgia removida!');
                }
            );
        }

        // ==================== COPIAR PRODUTOS DE OUTRA CIRURGIA ====================
        
        function abrirModalCopiarProdutos() {
            console.log('üöÄ abrirModalCopiarProdutos CHAMADA');
            
            const key = window.cirurgiaEmEdicao;
            console.log('üîë Cirurgia em edi√ß√£o:', key);
            
            if (!key || !CIRURGIAS_DB[key]) {
                alert('‚ùå Erro: Cirurgia n√£o identificada!');
                return;
            }
            
            // Preencher select com outras cirurgias
            const select = document.getElementById('selectCirurgiaOrigem');
            if (!select) {
                console.error('‚ùå Select n√£o encontrado!');
                return;
            }
            
            select.innerHTML = '<option value="">-- Escolha uma cirurgia --</option>';
            
            let count = 0;
            Object.keys(CIRURGIAS_DB).forEach(k => {
                if (k !== key) {
                    const cirurgia = CIRURGIAS_DB[k];
                    select.innerHTML += `<option value="${k}">${cirurgia.nome}</option>`;
                    count++;
                }
            });
            
            console.log(`üìã ${count} cirurgias adicionadas ao select`);
            
            // EVENTO ONCHANGE
            select.onchange = function() {
                console.log('üìå Select mudou para:', this.value);
                mostrarPreviewProdutos(this.value);
            };
            
            // BOT√ÉO CONFIRMAR - ADICIONAR EVENTO
            const btnConfirmar = document.getElementById('btnConfirmarCopia');
            if (!btnConfirmar) {
                console.error('‚ùå Bot√£o confirmar n√£o encontrado!');
                return;
            }
            
            console.log('üîò Adicionando evento ao bot√£o confirmar');
            
            // Remover eventos anteriores
            const novoBtn = btnConfirmar.cloneNode(true);
            btnConfirmar.parentNode.replaceChild(novoBtn, btnConfirmar);
            
            // Adicionar novo evento no bot√£o clonado
            document.getElementById('btnConfirmarCopia').addEventListener('click', function(e) {
                console.log('üñ±Ô∏è BOT√ÉO CONFIRMAR CLICADO!', e);
                e.preventDefault();
                e.stopPropagation();
                confirmarCopiaProdutos();
            });
            
            // Resetar preview
            document.getElementById('previewProdutosCopiar').style.display = 'none';
            document.getElementById('btnConfirmarCopia').disabled = true;
            
            // Mostrar modal
            const modal = document.getElementById('modalCopiarProdutos');
            if (!modal) {
                console.error('‚ùå Modal n√£o encontrado!');
                return;
            }
            
            modal.style.display = 'flex';
            console.log('‚úÖ Modal exibido!');
        }
        
        function mostrarPreviewProdutos(keyOrigem) {
            console.log('üëÅÔ∏è mostrarPreviewProdutos:', keyOrigem);
            
            const btnConfirmar = document.getElementById('btnConfirmarCopia');
            const previewDiv = document.getElementById('previewProdutosCopiar');
            const listaDiv = document.getElementById('listaPreviewProdutos');
            
            if (!keyOrigem) {
                previewDiv.style.display = 'none';
                btnConfirmar.disabled = true;
                return;
            }
            
            const cirurgiaOrigem = CIRURGIAS_DB[keyOrigem];
            if (!cirurgiaOrigem) {
                previewDiv.style.display = 'none';
                btnConfirmar.disabled = true;
                return;
            }
            
            let html = '';
            let totalProdutos = 0;
            
            PRODUTOS.forEach((produto, idx) => {
                const qtd = cirurgiaOrigem.produtos[idx] || 0;
                if (qtd > 0) {
                    totalProdutos++;
                    html += `
                        <div style="display: flex; justify-content: space-between; padding: 8px; background: white; margin-bottom: 5px; border-radius: 4px;">
                            <span><strong>${produto.nome}</strong></span>
                            <span style="color: #667eea; font-weight: 700;">Qtd: ${qtd}</span>
                        </div>
                    `;
                }
            });
            
            console.log(`üì¶ ${totalProdutos} produtos encontrados`);
            
            if (totalProdutos === 0) {
                html = '<div style="text-align: center; padding: 15px; color: #6c757d;">‚ö†Ô∏è Esta cirurgia n√£o possui produtos cadastrados.</div>';
                btnConfirmar.disabled = true;
            } else {
                btnConfirmar.disabled = false;
                console.log('‚úÖ Bot√£o confirmar HABILITADO');
            }
            
            listaDiv.innerHTML = html;
            previewDiv.style.display = 'block';
        }
        
        function confirmarCopiaProdutos() {
            console.log('‚úÖ‚úÖ‚úÖ confirmarCopiaProdutos EXECUTANDO!');
            
            const keyOrigem = document.getElementById('selectCirurgiaOrigem').value;
            const keyDestino = window.cirurgiaEmEdicao;
            
            console.log('üîç keyOrigem:', keyOrigem);
            console.log('üîç keyDestino:', keyDestino);
            
            if (!keyOrigem || !keyDestino) {
                alert('‚ùå Erro ao copiar produtos!');
                return;
            }
            
            const cirurgiaOrigem = CIRURGIAS_DB[keyOrigem];
            if (!cirurgiaOrigem) {
                alert('‚ùå Cirurgia de origem n√£o encontrada!');
                return;
            }
            
            // Confirmar com o usu√°rio
            const confirmou = confirm(`‚ö†Ô∏è Confirma copiar os produtos de "${cirurgiaOrigem.nome}" para a cirurgia atual?\n\nIsso ir√° SUBSTITUIR todas as quantidades atuais!`);
            console.log('ü§î Usu√°rio confirmou?', confirmou);
            
            if (!confirmou) {
                return;
            }
            
            // Copiar produtos
            let produtosCopiados = 0;
            let erros = 0;
            
            PRODUTOS.forEach((produto, idx) => {
                const qtd = cirurgiaOrigem.produtos[idx] || 0;
                const elemento = document.getElementById(`modal_qtd_${idx}`);
                
                if (elemento) {
                    elemento.textContent = qtd;
                    if (qtd > 0) produtosCopiados++;
                } else {
                    console.warn(`‚ö†Ô∏è Elemento modal_qtd_${idx} n√£o encontrado`);
                    erros++;
                }
            });
            
            console.log(`üìä Copiados: ${produtosCopiados} | Erros: ${erros}`);
            
            // Fechar modal de c√≥pia
            fecharModalCopiarProdutos();
            
            // Mensagem de sucesso
            alert(`‚úÖ Produtos copiados com sucesso!\n\n${produtosCopiados} produtos foram atualizados.\n\nLembre-se de clicar em "üíæ Salvar Altera√ß√µes" para confirmar as mudan√ßas.`);
        }
        
        function fecharModalCopiarProdutos() {
            console.log('üö™ Fechando modal de copiar produtos');
            document.getElementById('modalCopiarProdutos').style.display = 'none';
            document.getElementById('selectCirurgiaOrigem').value = '';
            document.getElementById('previewProdutosCopiar').style.display = 'none';
        }

        let equipeEditandoIdModal = null;
        
        function adicionarEquipe() {
            equipeEditandoIdModal = null;
            document.getElementById('tituloModalEquipe').textContent = 'üë• Adicionar Equipe';
            document.getElementById('modal_equipe_nome').value = '';
            document.getElementById('modal_equipe_valor').value = '';
            document.getElementById('modalEquipeSimples').style.display = 'flex';
        }

        function editarEquipe(id) {
            const equipe = EQUIPES_DB.find(e => e.id === id);
            if (!equipe) return;
            
            equipeEditandoIdModal = id;
            document.getElementById('tituloModalEquipe').textContent = '‚úèÔ∏è Editar Equipe';
            document.getElementById('modal_equipe_nome').value = equipe.nome;
            document.getElementById('modal_equipe_valor').value = equipe.valor;
            document.getElementById('modalEquipeSimples').style.display = 'flex';
        }
        
        function fecharModalEquipeSimples() {
            document.getElementById('modalEquipeSimples').style.display = 'none';
            equipeEditandoIdModal = null;
        }
        
        function salvarModalEquipe() {
            const nome = document.getElementById('modal_equipe_nome').value.trim();
            const valor = parseFloat(document.getElementById('modal_equipe_valor').value);
            
            if (!nome) {
                alert('‚ùå Nome n√£o pode estar vazio!');
                return;
            }
            
            if (isNaN(valor) || valor < 0) {
                alert('‚ùå Valor inv√°lido!');
                return;
            }
            
            if (equipeEditandoIdModal === null) {
                // ADICIONAR
                const novoId = EQUIPES_DB.length > 0 ? Math.max(...EQUIPES_DB.map(e => e.id)) + 1 : 1;
                EQUIPES_DB.push({ id: novoId, nome: nome, valor: valor, ativo: true });
            } else {
                // EDITAR
                const equipe = EQUIPES_DB.find(e => e.id === equipeEditandoIdModal);
                if (equipe) {
                    equipe.nome = nome;
                    equipe.valor = valor;
                }
            }
            
            localStorage.setItem('EQUIPES_DB', JSON.stringify(EQUIPES_DB));
            renderizarListaEquipes();
            inicializarSelects();
            fecharModalEquipeSimples();
            alert('‚úÖ Equipe salva com sucesso!');
        }

        function removerEquipe(id) {
            const equipe = EQUIPES_DB.find(e => e.id === id);
            abrirModalExclusao(
                `Deseja realmente excluir a equipe "${equipe.nome}"?`,
                () => {
                    equipe.ativo = false;
                    localStorage.setItem('EQUIPES_DB', JSON.stringify(EQUIPES_DB));
                    renderizarListaEquipes();
                    inicializarSelects();
                    alert('‚úÖ Equipe removida!');
                }
            );
        }

        function adicionarImplanteCadastro() {
            // Limpar campos
            document.getElementById('modal_implante_nome').value = '';
            document.getElementById('modal_implante_valor').value = '';
            
            // Configurar modal para ADICIONAR
            document.getElementById('modalImplanteTitulo').textContent = '‚ûï Adicionar Implante';
            document.getElementById('btnSalvarImplante').textContent = '‚úÖ Adicionar';
            window.implante_em_edicao = null;
            
            // Abrir modal
            document.getElementById('modalImplante').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            setTimeout(() => {
                document.getElementById('modal_implante_nome').focus();
            }, 100);
        }

        function editarImplanteCadastro(id) {
            const implante = IMPLANTES_DB.find(i => i.id === id);
            if (!implante) return;
            
            // Preencher campos
            document.getElementById('modal_implante_nome').value = implante.nome;
            document.getElementById('modal_implante_valor').value = implante.valor;
            
            // Configurar modal para EDITAR
            document.getElementById('modalImplanteTitulo').textContent = '‚úèÔ∏è Editar Implante';
            document.getElementById('btnSalvarImplante').textContent = 'üíæ Salvar';
            window.implante_em_edicao = id;
            
            // Abrir modal
            document.getElementById('modalImplante').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            setTimeout(() => {
                document.getElementById('modal_implante_nome').focus();
            }, 100);
        }
        
        function fecharModalImplante() {
            document.getElementById('modalImplante').classList.remove('active');
            document.body.style.overflow = 'auto';
            window.implante_em_edicao = null;
        }
        
        function salvarImplante() {
            const nome = document.getElementById('modal_implante_nome').value.trim();
            const valor = parseFloat(document.getElementById('modal_implante_valor').value);
            
            // Validar
            if (!nome) {
                alert('‚ùå Nome n√£o pode estar vazio!');
                document.getElementById('modal_implante_nome').focus();
                return;
            }
            
            if (isNaN(valor) || valor < 0) {
                alert('‚ùå Valor inv√°lido!');
                document.getElementById('modal_implante_valor').focus();
                return;
            }
            
            if (window.implante_em_edicao) {
                // EDITAR implante existente
                const implante = IMPLANTES_DB.find(i => i.id === window.implante_em_edicao);
                if (implante) {
                    implante.nome = nome;
                    implante.valor = valor;
                    renderizarListaImplantesCadastro();
                    fecharModalImplante();
                    alert('‚úÖ Implante atualizado!');
                }
            } else {
                // ADICIONAR novo implante
                const novoId = IMPLANTES_DB.length > 0 ? Math.max(...IMPLANTES_DB.map(i => i.id)) + 1 : 1;
                IMPLANTES_DB.push({ 
                    id: novoId, 
                    nome: nome, 
                    valor: valor, 
                    ativo: true 
                });
                renderizarListaImplantesCadastro();
                fecharModalImplante();
                alert(`‚úÖ Implante "${nome}" adicionado!`);
            }
        }

        function removerImplanteCadastro(id) {
            const implante = IMPLANTES_DB.find(i => i.id === id);
            abrirModalExclusao(
                `Deseja realmente excluir o implante "${implante.nome}"?`,
                () => {
                    implante.ativo = false;
                    renderizarListaImplantesCadastro();
                    alert('‚úÖ Implante removido!');
                }
            );
        }

        // ==================== UTILIDADES ====================
        
        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor);
        }

        function gerarPDF() {
            // Validar se tem or√ßamento
            if (!estadoGlobal.valorTotal || estadoGlobal.valorTotal === 0) {
                alert('‚ùå Fa√ßa um or√ßamento antes de gerar PDF!');
                return;
            }
            
            // Adicionar classe para impress√£o
            document.body.classList.add('imprimindo');
            
            // Dar um tempo para aplicar o CSS
            setTimeout(() => {
                window.print();
                // Remover classe ap√≥s imprimir
                setTimeout(() => {
                    document.body.classList.remove('imprimindo');
                }, 100);
            }, 100);
        }

        // ==================== FUN√á√ïES DO CABE√áALHO PROFISSIONAL ====================
        
        function formatarCPF(input) {
            let valor = input.value.replace(/\D/g, '');
            if (valor.length <= 11) {
                valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                valor = valor.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            }
            input.value = valor;
        }
        
        function calcularIdade() {
            const dnInput = document.getElementById('dataNasc').value;
            if (!dnInput) {
                document.getElementById('idadePaciente').value = '';
                return;
            }
            
            const dn = new Date(dnInput);
            const hoje = new Date();
            let idade = hoje.getFullYear() - dn.getFullYear();
            const mes = hoje.getMonth() - dn.getMonth();
            
            if (mes < 0 || (mes === 0 && hoje.getDate() < dn.getDate())) {
                idade--;
            }
            
            document.getElementById('idadePaciente').value = idade + ' anos';
        }
        
        function calcularIdadeOrcamento() {
            const dnInput = document.getElementById('dnPacienteOrcamento').value;
            if (!dnInput) {
                document.getElementById('idadePacienteOrcamento').value = '';
                return;
            }
            
            const dn = new Date(dnInput);
            const hoje = new Date();
            let idade = hoje.getFullYear() - dn.getFullYear();
            const mes = hoje.getMonth() - dn.getMonth();
            
            if (mes < 0 || (mes === 0 && hoje.getDate() < dn.getDate())) {
                idade--;
            }
            
            document.getElementById('idadePacienteOrcamento').value = idade + ' anos';
        }
        
        function importarDadosPaciente() {
            // Buscar dados da Aba 1
            const nome = document.getElementById('nomePaciente').value;
            const cpf = document.getElementById('cpfPaciente').value;
            const dn = document.getElementById('dataNasc').value;
            const idade = document.getElementById('idadePaciente').value;
            
            if (!nome || !nome.trim()) {
                alert('‚ùå Preencha os dados do paciente na ABA 1 primeiro!');
                abrirAba('tabPaciente');
                return;
            }
            
            // Preencher na Aba 8 (Or√ßamento)
            document.getElementById('nomePacienteOrcamento').value = nome;
            document.getElementById('cpfPacienteOrcamento').value = cpf;
            document.getElementById('dnPacienteOrcamento').value = dn;
            document.getElementById('idadePacienteOrcamento').value = idade;
            
            alert('‚úÖ Dados importados com sucesso!\n\n' +
                  'üë§ ' + nome + '\n' +
                  'üìÑ ' + (cpf || 'CPF n√£o informado') + '\n' +
                  'üéÇ ' + (idade || 'Idade n√£o calculada'));
        }
        
        function carregarLogo(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById('imagemLogo');
                    img.src = e.target.result;
                    img.style.display = 'block';
                    document.getElementById('textoLogo').style.display = 'none';
                    
                    // Salvar logo no localStorage
                    localStorage.setItem('logoMedico', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }
        
        function removerLogo() {
            document.getElementById('imagemLogo').src = '';
            document.getElementById('imagemLogo').style.display = 'none';
            document.getElementById('textoLogo').style.display = 'block';
            localStorage.removeItem('logoMedico');
        }
        
        function salvarNoProntuario() {
            // Validar se tem or√ßamento calculado
            if (!estadoGlobal.valorTotal || estadoGlobal.valorTotal === 0) {
                alert('‚ùå Fa√ßa um or√ßamento antes de salvar!');
                return;
            }
            
            // Validar nome do paciente
            const nomePaciente = document.getElementById('nomePacienteOrcamento').value.trim();
            if (!nomePaciente) {
                alert('‚ùå Preencha o nome do paciente!');
                return;
            }
            
            // Coletar dados do or√ßamento
            const orcamento = {
                // Metadados
                dataSalvamento: new Date().toISOString(),
                numeroOrcamento: document.getElementById('numeroOrcamento').value,
                dataOrcamento: document.getElementById('dataOrcamento').value,
                
                // Refer√™ncia do paciente (para buscar no sistema de pacientes)
                pacienteNome: nomePaciente,
                pacienteCPF: document.getElementById('cpfPacienteOrcamento').value,
                
                // Refer√™ncia do m√©dico
                medicoNome: document.getElementById('nomeMedico').value,
                medicoCRM: document.getElementById('crmMedico').value,
                
                // OR√áAMENTO COMPLETO
                cirurgias: estadoGlobal.cirurgiasSelecionadas.map(c => ({
                    nome: CIRURGIAS_DB[c]?.nome || 'Desconhecida',
                    tempo: CIRURGIAS_DB[c]?.tempo || 0
                })),
                
                produtos: estadoGlobal.produtosCalculados.map(p => ({
                    categoria: p.categoria,
                    nome: p.nome,
                    quantidade: p.quantidade,
                    valorUnitario: p.valorUnitario,
                    valorTotal: p.valorTotal
                })),
                
                implantes: estadoGlobal.implantes.map(imp => ({
                    nome: imp.nome,
                    valor: imp.valor
                })),
                
                equipesEspecializadas: estadoGlobal.equipesEspecializadas.map(eq => ({
                    nome: eq.nome,
                    valor: eq.valor
                })),
                
                profissionais: {
                    cirurgiao: {
                        valor: estadoGlobal.profissionais.cirurgiao.valorFinal,
                        acrescimo: estadoGlobal.profissionais.cirurgiao.acrescimo
                    },
                    anestesista: estadoGlobal.profissionais.anestesista.valorFinal,
                    auxiliar: estadoGlobal.profissionais.auxiliar.valorFinal,
                    instrumentadora: estadoGlobal.profissionais.instrumentadora.valorFinal
                },
                
                tempos: {
                    calculado: estadoGlobal.tempoCalculo,
                    somado: estadoGlobal.tempoSomado,
                    usado: estadoGlobal.tempoUsado
                },
                
                valores: {
                    produtos: estadoGlobal.produtosCalculados.reduce((sum, p) => sum + p.valorTotal, 0),
                    implantes: estadoGlobal.implantes.reduce((sum, i) => sum + i.valor, 0),
                    equipesEsp: estadoGlobal.equipesEspecializadas.reduce((sum, e) => sum + e.valor, 0),
                    profissionais: estadoGlobal.profissionais.cirurgiao.valorFinal +
                                   estadoGlobal.profissionais.anestesista.valorFinal +
                                   estadoGlobal.profissionais.auxiliar.valorFinal +
                                   estadoGlobal.profissionais.instrumentadora.valorFinal,
                    total: estadoGlobal.valorTotal
                },
                
                formasPagamento: {
                    vistaDesconto: estadoGlobal.formasPagamento?.vistaDesconto || 0,
                    vistaNormal: estadoGlobal.formasPagamento?.vistaNormal || 0,
                    parcelado: estadoGlobal.formasPagamento?.parcelado || 0,
                    entrada: estadoGlobal.formasPagamento?.entrada || 0,
                    valorParcela: estadoGlobal.formasPagamento?.valorParcela || 0,
                    numParcelas: estadoGlobal.formasPagamento?.numParcelas || 0
                }
            };
            
            // Salvar no localStorage
            let prontuarios = JSON.parse(localStorage.getItem('orcamentos_salvos') || '[]');
            prontuarios.push(orcamento);
            localStorage.setItem('orcamentos_salvos', JSON.stringify(prontuarios));
            
            // Gerar arquivo JSON para download
            const json = JSON.stringify(orcamento, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const dataHora = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);
            const nomeArquivo = `orcamento-${nomePaciente.replace(/\s+/g, '-')}-${dataHora}.json`;
            a.download = nomeArquivo;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('‚úÖ OR√áAMENTO SALVO!\n\n' +
                  'üìä Total: R$ ' + estadoGlobal.valorTotal.toFixed(2) + '\n' +
                  'üíæ Arquivo baixado: ' + nomeArquivo + '\n' +
                  'üìã Total de or√ßamentos salvos: ' + prontuarios.length);
            
            // Perguntar se quer limpar para novo
            if (confirm('üíæ Prontu√°rio salvo!\n\nDeseja limpar os campos para fazer um novo or√ßamento?')) {
                novoOrcamento();
            }
        }
        
        function carregarDadosMedicoSalvos() {
            // Carregar logo
            const logoSalva = localStorage.getItem('logoMedico');
            if (logoSalva) {
                document.getElementById('imagemLogo').src = logoSalva;
                document.getElementById('imagemLogo').style.display = 'block';
                document.getElementById('textoLogo').style.display = 'none';
            }
            
            // Carregar dados do m√©dico salvos
            const dadosMedico = JSON.parse(localStorage.getItem('dadosMedico') || '{}');
            if (dadosMedico.nome) document.getElementById('nomeMedico').value = dadosMedico.nome;
            if (dadosMedico.especialidade) document.getElementById('especialidadeMedico').value = dadosMedico.especialidade;
            if (dadosMedico.crm) document.getElementById('crmMedico').value = dadosMedico.crm;
            if (dadosMedico.rqe) document.getElementById('rqeMedico').value = dadosMedico.rqe;
        }
        
        function salvarDadosMedico() {
            const dadosMedico = {
                nome: document.getElementById('nomeMedico').value,
                especialidade: document.getElementById('especialidadeMedico').value,
                crm: document.getElementById('crmMedico').value,
                rqe: document.getElementById('rqeMedico').value
            };
            localStorage.setItem('dadosMedico', JSON.stringify(dadosMedico));
        }
        
        // Salvar dados do m√©dico ao digitar
        ['nomeMedico', 'especialidadeMedico', 'crmMedico', 'rqeMedico'].forEach(id => {
            setTimeout(() => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('blur', salvarDadosMedico);
            }, 500);
        });
        
        function novoOrcamento() {
            if (confirm('üîÑ ZERAR C√ÅLCULOS E FAZER NOVO OR√áAMENTO?\n\nIsso vai limpar:\n‚Ä¢ Cirurgias selecionadas\n‚Ä¢ Produtos adicionados\n‚Ä¢ Implantes\n‚Ä¢ Equipes especializadas\n‚Ä¢ Todos os c√°lculos\n\nMANT√âM:\n‚Ä¢ Dados do paciente\n‚Ä¢ Dados do m√©dico\n‚Ä¢ Logo\n\nDeseja continuar?')) {
                // Salvar dados do m√©dico e paciente
                const dadosMedico = {
                    nome: document.getElementById('nomeMedico').value,
                    especialidade: document.getElementById('especialidadeMedico').value,
                    crm: document.getElementById('crmMedico').value,
                    rqe: document.getElementById('rqeMedico').value
                };
                const dadosPaciente = {
                    nome: document.getElementById('nomePacienteOrcamento').value,
                    cpf: document.getElementById('cpfPacienteOrcamento').value,
                    dn: document.getElementById('dnPacienteOrcamento').value,
                    idade: document.getElementById('idadePacienteOrcamento').value
                };
                const acrescimoCirurgiao = estadoGlobal.profissionais.cirurgiao.acrescimo;
                
                localStorage.setItem('temp_medico', JSON.stringify(dadosMedico));
                localStorage.setItem('temp_paciente', JSON.stringify(dadosPaciente));
                localStorage.setItem('acrescimoCirurgiao', acrescimoCirurgiao);
                
                // Recarregar p√°gina (isso limpa tudo)
                location.reload();
            }
        }
    
        // ==================== GERENCIAMENTO DE PRODUTOS v6.2 ====================

        function carregarProdutosLocalStorage() {
            const produtosSalvos = localStorage.getItem('PRODUTOS_DB');
            if (produtosSalvos) {
                try {
                    const produtosCarregados = JSON.parse(produtosSalvos);
                    // CORRE√á√ÉO: Substituir array completo
                    PRODUTOS.length = 0;
                    
                    // Garantir que todos os produtos tenham o campo obs (compatibilidade)
                    produtosCarregados.forEach(p => {
                        if (!p.hasOwnProperty('obs')) {
                            p.obs = "";
                        }
                        PRODUTOS.push(p);
                    });
                    
                    console.log('‚úÖ Produtos carregados do localStorage:', PRODUTOS.length);
                } catch (e) {
                    console.error('‚ùå Erro ao carregar produtos:', e);
                }
            } else {
                console.log('‚ÑπÔ∏è Usando produtos padr√£o (19 itens)');
            }
        }

        function carregarCirurgiasLocalStorage() {
            const cirurgiasSalvas = localStorage.getItem('CIRURGIAS_DB');
            if (cirurgiasSalvas) {
                try {
                    const cirurgiasCarregadas = JSON.parse(cirurgiasSalvas);
                    // Mesclar com cirurgias padr√£o (preservar padr√µes, sobrescrever customiza√ß√µes)
                    Object.keys(cirurgiasCarregadas).forEach(key => {
                        CIRURGIAS_DB[key] = cirurgiasCarregadas[key];
                    });
                    console.log('‚úÖ Cirurgias carregadas do localStorage:', Object.keys(CIRURGIAS_DB).length);
                } catch (e) {
                    console.error('‚ùå Erro ao carregar cirurgias:', e);
                }
            } else {
                console.log('‚ÑπÔ∏è Usando cirurgias padr√£o (6 itens)');
            }
            
            // CR√çTICO: Garantir que TODAS as cirurgias t√™m array .produtos com tamanho correto
            corrigirProdutosDasCirurgias();
        }
        
        function corrigirProdutosDasCirurgias() {
            console.log('üîß Corrigindo produtos das cirurgias...');
            let corrigidas = 0;
            
            Object.keys(CIRURGIAS_DB).forEach(key => {
                const cirurgia = CIRURGIAS_DB[key];
                
                // Se n√£o tem .produtos, criar array vazio
                if (!cirurgia.produtos) {
                    cirurgia.produtos = [];
                    console.log(`  ‚ö†Ô∏è Cirurgia "${cirurgia.nome}" n√£o tinha .produtos - criando array`);
                }
                
                // Se o tamanho n√£o bate com PRODUTOS.length, ajustar
                if (cirurgia.produtos.length !== PRODUTOS.length) {
                    const tamanhoAntigo = cirurgia.produtos.length;
                    
                    // Se tem menos, adicionar zeros
                    while (cirurgia.produtos.length < PRODUTOS.length) {
                        cirurgia.produtos.push(0);
                    }
                    
                    // Se tem mais, remover excesso
                    while (cirurgia.produtos.length > PRODUTOS.length) {
                        cirurgia.produtos.pop();
                    }
                    
                    console.log(`  üîß Cirurgia "${cirurgia.nome}": ${tamanhoAntigo} ‚Üí ${cirurgia.produtos.length} produtos`);
                    corrigidas++;
                }
            });
            
            if (corrigidas > 0) {
                console.log(`‚úÖ ${corrigidas} cirurgia(s) corrigida(s)`);
                localStorage.setItem('CIRURGIAS_DB', JSON.stringify(CIRURGIAS_DB));
            } else {
                console.log('‚úÖ Todas as cirurgias est√£o OK');
            }
        }

        function salvarProdutosLocalStorage() {
            try {
                localStorage.setItem('PRODUTOS_DB', JSON.stringify(PRODUTOS));
                atualizarContadorProdutos();
                console.log('‚úÖ Produtos salvos:', PRODUTOS.length);
            } catch (e) {
                alert('‚ö†Ô∏è Erro ao salvar produtos!');
            }
        }

        function atualizarContadorProdutos() {
            const contador = document.getElementById('contadorProdutos');
            if (contador) contador.textContent = PRODUTOS.length;
        }

        function atualizarValorProduto(idx, valorDisplay) {
            const valor = parseFloat(valorDisplay.replace('R$', '').replace(/\./g, '').replace(',', '.').trim());
            if (!isNaN(valor)) {
                PRODUTOS[idx].valor = valor;
                salvarProdutosLocalStorage();
                document.getElementById(`valor_display_${idx}`).value = formatarMoeda(valor);
            } else {
                document.getElementById(`valor_display_${idx}`).value = formatarMoeda(PRODUTOS[idx].valor);
            }
        }

        function renderizarListaProdutos() {
            const lista = document.getElementById('listaProdutos');
            if (!lista) return;
            
            // PASSO 1: Agrupar produtos por categoria
            const produtosPorCategoria = {};
            PRODUTOS.forEach((prod, idx) => {
                if (!produtosPorCategoria[prod.cat]) {
                    produtosPorCategoria[prod.cat] = [];
                }
                produtosPorCategoria[prod.cat].push({ ...prod, idx });
            });
            
            // PASSO 2: Pegar categorias na ordem que aparecem pela primeira vez no array PRODUTOS
            const categoriasOrdenadas = [];
            PRODUTOS.forEach(prod => {
                if (!categoriasOrdenadas.includes(prod.cat)) {
                    categoriasOrdenadas.push(prod.cat);
                }
            });
            
            // PASSO 3: Renderizar produtos agrupados por categoria
            let html = '';
            categoriasOrdenadas.forEach(categoria => {
                // Cabe√ßalho da categoria
                html += `<div style="background: #667eea; color: white; padding: 8px 12px; margin-top: 10px; margin-bottom: 5px; border-radius: 6px; font-weight: 700; font-size: 11px;">${categoria}</div>`;
                
                // v6.22: Ordenar produtos alfabeticamente dentro da categoria
                produtosPorCategoria[categoria].sort((a, b) => a.nome.localeCompare(b.nome, 'pt-BR')).forEach(prod => {
                    html += `
                        <div class="lista-item" style="font-size: 12px; padding: 8px 12px; margin-bottom: 5px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: #495057;">${prod.nome}</div>
                                <div style="font-size: 10px; color: #6c757d; margin-top: 4px;">
                                    <span class="regra-badge ${prod.regra === 'soma' ? 'soma' : ''}">${prod.regra.toUpperCase()}</span>
                                    <span style="margin-left: 8px;">${formatarMoeda(prod.valor)}</span>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn-sm" onclick="verObservacao(${prod.idx})" style="padding: 4px 8px; font-size: 11px; margin-right: 4px; background: #6EC1E4; color: white; border: none; font-weight: bold;" title="Ver observa√ß√£o">‚ÑπÔ∏è</button>
                                <button class="btn btn-sm btn-warning" onclick="editarProduto(${prod.idx})" style="padding: 4px 8px; font-size: 11px; margin-right: 4px;">‚úèÔ∏è</button>
                                <button class="btn btn-sm btn-danger" onclick="removerProduto(${prod.idx})" style="padding: 4px 8px; font-size: 11px;">üóëÔ∏è</button>
                            </div>
                        </div>
                    `;
                });
            });
            
            lista.innerHTML = html;
        }

        window.adicionarProduto = function() {
            console.log('üîß abrindo modal de adicionar produto');
            
            // Limpar campos
            document.getElementById('modal_prod_categoria').value = '';
            document.getElementById('modal_prod_nome').value = '';
            document.getElementById('modal_prod_valor').value = '';
            document.getElementById('modal_prod_regra').value = 'soma';
            document.getElementById('modal_prod_obs').value = '';
            
            // Abrir modal
            document.getElementById('modalAdicionarProduto').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Focar no primeiro campo
            setTimeout(() => {
                document.getElementById('modal_prod_categoria').focus();
            }, 100);
        };
        
        function fecharModalProduto() {
            document.getElementById('modalAdicionarProduto').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        function salvarNovoProduto() {
            // Pegar valores
            const categoria = document.getElementById('modal_prod_categoria').value.trim();
            const nome = document.getElementById('modal_prod_nome').value.trim();
            const valor = parseFloat(document.getElementById('modal_prod_valor').value);
            const regra = document.getElementById('modal_prod_regra').value;
            const obs = document.getElementById('modal_prod_obs').value.trim();
            
            // Validar
            if (!categoria) {
                alert('‚ùå Categoria n√£o pode estar vazia!');
                document.getElementById('modal_prod_categoria').focus();
                return;
            }
            
            if (!nome) {
                alert('‚ùå Nome n√£o pode estar vazio!');
                document.getElementById('modal_prod_nome').focus();
                return;
            }
            
            if (isNaN(valor) || valor < 0) {
                alert('‚ùå Valor inv√°lido! Use n√∫meros como: 13.50');
                document.getElementById('modal_prod_valor').focus();
                return;
            }
            
            // Criar produto
            const novoProduto = {
                cat: categoria.toUpperCase(),
                nome: nome,
                regra: regra,
                valor: valor,
                obs: obs || ""
            };
            
            // Adicionar ao array
            PRODUTOS.push(novoProduto);
            console.log('‚úÖ Produto adicionado:', novoProduto);
            
            // IMPORTANTE: Adicionar entrada vazia (0) para este produto em TODAS as cirurgias
            Object.keys(CIRURGIAS_DB).forEach(key => {
                if (!CIRURGIAS_DB[key].produtos) {
                    CIRURGIAS_DB[key].produtos = [];
                }
                CIRURGIAS_DB[key].produtos.push(0);
            });
            console.log('‚úÖ Entrada adicionada em', Object.keys(CIRURGIAS_DB).length, 'cirurgias');
            
            // Salvar tudo
            salvarProdutosLocalStorage();
            localStorage.setItem('CIRURGIAS_DB', JSON.stringify(CIRURGIAS_DB));
            
            // Atualizar interface
            renderizarListaProdutos();
            renderizarTabela();
            atualizarContadorProdutos();
            
            // Fechar modal
            fecharModalProduto();
            
            alert(`‚úÖ Produto "${nome}" adicionado com sucesso!\n\nüì¶ Total de produtos: ${PRODUTOS.length}`);
        }

        let produtoEditandoIdx = null;
        
        function editarProduto(idx) {
            produtoEditandoIdx = idx;
            const prod = PRODUTOS[idx];
            
            document.getElementById('edit_categoria').value = prod.cat;
            document.getElementById('edit_nome').value = prod.nome;
            document.getElementById('edit_regra').value = prod.regra;
            document.getElementById('edit_valor').value = prod.valor;
            document.getElementById('edit_obs').value = prod.obs || '';
            
            document.getElementById('modalEditarProduto').style.display = 'flex';
        }
        
        function fecharModalEditarProduto() {
            document.getElementById('modalEditarProduto').style.display = 'none';
            produtoEditandoIdx = null;
        }
        
        function salvarEdicaoProduto() {
            if (produtoEditandoIdx === null) return;
            
            const novaCategoria = document.getElementById('edit_categoria').value.trim();
            const novoNome = document.getElementById('edit_nome').value.trim();
            const novaRegra = document.getElementById('edit_regra').value;
            const novoValor = parseFloat(document.getElementById('edit_valor').value);
            const novaObs = document.getElementById('edit_obs').value.trim();
            
            if (!novaCategoria) {
                alert('‚ùå Categoria √© obrigat√≥ria!');
                return;
            }
            
            if (!novoNome) {
                alert('‚ùå Nome √© obrigat√≥rio!');
                return;
            }
            
            if (isNaN(novoValor) || novoValor < 0) {
                alert('‚ùå Valor inv√°lido!');
                return;
            }
            
            PRODUTOS[produtoEditandoIdx] = {
                cat: novaCategoria.toUpperCase(),
                nome: novoNome,
                regra: novaRegra,
                valor: novoValor,
                obs: novaObs || ""
            };
            
            salvarProdutosLocalStorage();
            renderizarListaProdutos();
            renderizarTabela();
            
            fecharModalEditarProduto();
            alert('‚úÖ Produto atualizado com sucesso!');
        }

        // ==================== MODAL DE EXCLUS√ÉO ====================
        let acaoExclusao = null;
        
        function abrirModalExclusao(mensagem, callback) {
            document.getElementById('mensagemExclusao').textContent = mensagem;
            acaoExclusao = callback;
            document.getElementById('modalConfirmarExclusao').style.display = 'flex';
        }
        
        function fecharModalExclusao() {
            document.getElementById('modalConfirmarExclusao').style.display = 'none';
            acaoExclusao = null;
        }
        
        function confirmarExclusao() {
            if (acaoExclusao) {
                acaoExclusao();
            }
            fecharModalExclusao();
        }

        function removerProduto(idx) {
            const prod = PRODUTOS[idx];
            abrirModalExclusao(
                `Deseja realmente excluir o produto "${prod.nome}"?`,
                () => {
                    PRODUTOS.splice(idx, 1);
                    salvarProdutosLocalStorage();
                    renderizarListaProdutos();
                    renderizarTabela();
                    alert('‚úÖ Produto removido!');
                }
            );
        }

        function mostrarImportarProdutos() {
            const form = document.getElementById('formImportarProdutos');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        function processarImportacaoProdutos() {
            const texto = document.getElementById('textareaImportProdutos').value.trim();
            if (!texto) {
                alert('‚ùå Cole os dados CSV primeiro!');
                return;
            }
            
            const linhas = texto.split('\n');
            const novosProdutos = [];
            let erros = 0;
            
            linhas.forEach((linha, i) => {
                linha = linha.trim();
                if (!linha || linha.startsWith('Categoria')) return;
                
                const partes = linha.split(',');
                if (partes.length !== 4) {
                    erros++;
                    return;
                }
                
                const [cat, nome, regra, valor] = partes.map(p => p.trim());
                const valorNum = parseFloat(valor);
                
                if (isNaN(valorNum) || (regra.toLowerCase() !== 'soma' && regra.toLowerCase() !== 'max')) {
                    erros++;
                    return;
                }
                
                novosProdutos.push({
                    cat: cat.toUpperCase(),
                    nome: nome,
                    regra: regra.toLowerCase(),
                    valor: valorNum
                });
            });
            
            if (novosProdutos.length === 0) {
                alert('‚ùå Nenhum produto v√°lido encontrado!');
                return;
            }
            
            const substituir = confirm(
                `üì¶ ${novosProdutos.length} produtos v√°lidos` +
                (erros > 0 ? ` (${erros} erros)` : '') +
                `\n\n‚ö†Ô∏è SUBSTITUIR ${PRODUTOS.length} produtos atuais?\n\n` +
                `OK = SUBSTITUIR | Cancelar = ADICIONAR`
            );
            
            if (substituir) {
                PRODUTOS.length = 0;
                PRODUTOS.push(...novosProdutos);
            } else {
                PRODUTOS.push(...novosProdutos);
            }
            
            salvarProdutosLocalStorage();
            renderizarListaProdutos();
            renderizarTabela();
            
            document.getElementById('textareaImportProdutos').value = '';
            document.getElementById('formImportarProdutos').style.display = 'none';
            
            alert(`‚úÖ ${novosProdutos.length} produtos importados!`);
        }

        function exportarProdutos() {
            const csv = 'Categoria,Nome,Regra,Valor\n' + 
                         PRODUTOS.map(p => `${p.cat},${p.nome},${p.regra},${p.valor}`).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', 'produtos_' + new Date().toISOString().split('T')[0] + '.csv');
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('‚úÖ Produtos exportados!');
        }

        function resetarProdutos() {
            if (!confirm('‚ö†Ô∏è RESETAR para os 19 produtos padr√µes?\n\nTodos os produtos personalizados ser√£o PERDIDOS!')) return;
            if (!confirm('‚ùå TEM CERTEZA ABSOLUTA?')) return;
            
            PRODUTOS.length = 0;
            PRODUTOS.push(
                { cat: "PLANT√ÉO", nome: "Plant√£o noturno", regra: "max", valor: 1010 },
                { cat: "BI√ìPSIA", nome: "Anatomopatol√≥gico", regra: "max", valor: 150 },
                { cat: "ANTISSEPSIA", nome: "Clorexidina alco√≥lica", regra: "soma", valor: 6 },
                { cat: "BISTURI", nome: "Placa caut√©rio", regra: "max", valor: 25 },
                { cat: "BISTURI", nome: "Caut√©rio esteriliz√°vel", regra: "max", valor: 39 },
                { cat: "BISTURI", nome: "Caut√©rio descart√°vel", regra: "max", valor: 39 },
                { cat: "BISTURI", nome: "Aparelho extra", regra: "max", valor: 66 },
                { cat: "BISTURI", nome: "Pin√ßa bipolar", regra: "max", valor: 38 },
                { cat: "SANGRAMENTO", nome: "√Åcido tranex√¢mico", regra: "soma", valor: 13 },
                { cat: "SANGRAMENTO", nome: "Adrenalina", regra: "max", valor: 5 },
                { cat: "PARAMENTA√á√ÉO", nome: "Kit cir√∫rgico", regra: "max", valor: 225 },
                { cat: "PARAMENTA√á√ÉO", nome: "Avental avulso", regra: "max", valor: 35 },
                { cat: "PARAMENTA√á√ÉO", nome: "Campo avulso", regra: "max", valor: 21 },
                { cat: "PARAMENTA√á√ÉO", nome: "Luva cir√∫rgica", regra: "max", valor: 6 },
                { cat: "MARCA√á√ÉO", nome: "Azul metileno", regra: "soma", valor: 13 },
                { cat: "COMPRESSAS", nome: "Compressa est√©ril", regra: "max", valor: 32 },
                { cat: "FIOS", nome: "Monocryl/Monosym", regra: "max", valor: 84 },
                { cat: "FIOS", nome: "Mononylon incolor", regra: "max", valor: 35 },
                { cat: "FIOS", nome: "Mononylon preto", regra: "max", valor: 26 }
            );
            
            salvarProdutosLocalStorage();
            renderizarListaProdutos();
            renderizarTabela();
            
            alert('‚úÖ Produtos resetados! 19 produtos padr√µes.');
        }
        
        // ==================== ORGANIZAR/RENOMEAR CATEGORIAS ====================
        
        window.abrirOrganizarCategorias = function() {
            console.log('Fun√ß√£o abrirOrganizarCategorias chamada!');
            console.log('PRODUTOS:', PRODUTOS);
            
            if (!PRODUTOS || PRODUTOS.length === 0) {
                alert('‚ùå Nenhum produto cadastrado ainda!');
                return;
            }
            
            // Pegar categorias NA ORDEM QUE APARECEM (sem sort!)
            const categorias = [];
            PRODUTOS.forEach(p => {
                if (!categorias.includes(p.cat)) {
                    categorias.push(p.cat);
                }
            });
            
            console.log('Categorias na ordem atual:', categorias);
            
            // Criar modal
            const modal = document.createElement('div');
            modal.style.cssText = 'display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10000; justify-content: center; align-items: center;';
            modal.id = 'modalEditarCategorias';
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = 'background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 700px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto;';
            
            modalContent.innerHTML = `
                <h3 style="margin: 0 0 20px 0; color: #667eea; font-size: 24px; text-align: center;">üìÇ Renomear Categorias</h3>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
                    <h4 style="color: #495057; margin: 0 0 15px 0; font-size: 16px;">‚úèÔ∏è Clique no nome da categoria para editar:</h4>
                    <div id="listaCategorias" style="display: flex; flex-direction: column; gap: 12px;"></div>
                </div>
                
                <div style="background: #d1ecf1; border: 2px solid #17a2b8; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                    <p style="margin: 0; color: #0c5460; font-size: 13px; line-height: 1.6;">
                        üí° <strong>Como usar:</strong><br>
                        ‚Ä¢ Clique no campo da categoria que deseja renomear<br>
                        ‚Ä¢ Digite o novo nome<br>
                        ‚Ä¢ Clique no bot√£o <strong>‚úÖ Salvar</strong> para confirmar<br>
                        ‚Ä¢ A categoria ser√° renomeada em todos os produtos!
                    </p>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button id="btnFecharModal" style="padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
                        ‚úñÔ∏è Fechar
                    </button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // Adicionar categorias dinamicamente
            const listaCategorias = document.getElementById('listaCategorias');
            categorias.forEach((cat, i) => {
                console.log(`üìù Criando linha para categoria ${i}: "${cat}"`);
                
                const div = document.createElement('div');
                div.style.cssText = 'display: flex; align-items: center; gap: 10px; background: white; padding: 15px; border-radius: 8px; border: 2px solid #e9ecef; transition: all 0.2s;';
                
                const numero = document.createElement('span');
                numero.style.cssText = 'font-weight: 700; color: #667eea; min-width: 35px; font-size: 18px;';
                numero.textContent = `${i + 1}.`;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.id = `inputCat${i}`;
                input.value = cat;
                input.style.cssText = 'flex: 1; font-weight: 600; color: #495057; font-size: 15px; padding: 10px 15px; border: 2px solid #dee2e6; border-radius: 6px; background: #f8f9fa; transition: all 0.2s;';
                
                const btnSalvar = document.createElement('button');
                btnSalvar.className = 'btnSalvarCat';
                btnSalvar.textContent = '‚úÖ Salvar';
                btnSalvar.style.cssText = 'padding: 10px 18px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; transition: all 0.2s; white-space: nowrap;';
                
                // Adicionar efeitos de foco no input
                input.addEventListener('focus', function() {
                    console.log(`üëÜ Input focado: categoria "${cat}"`);
                    this.style.background = '#fff';
                    this.style.borderColor = '#667eea';
                    this.select();
                });
                
                input.addEventListener('blur', function() {
                    this.style.background = '#f8f9fa';
                    this.style.borderColor = '#dee2e6';
                });
                
                // IMPORTANTE: Usar closure para capturar o valor ORIGINAL da categoria
                const categoriaOriginal = cat;
                console.log(`üîí Closure criada para categoria: "${categoriaOriginal}"`);
                
                // Adicionar evento de clique no bot√£o Salvar
                btnSalvar.addEventListener('click', function() {
                    console.log('üñ±Ô∏è BOT√ÉO SALVAR CLICADO!');
                    console.log(`üìå Categoria Original (da closure): "${categoriaOriginal}"`);
                    console.log(`üìù Valor atual do input: "${input.value}"`);
                    
                    const novoNome = input.value.trim().toUpperCase();
                    
                    console.log('üîÑ Salvando altera√ß√£o:', categoriaOriginal, '‚Üí', novoNome);
                    
                    if (!novoNome) {
                        alert('‚ùå Nome n√£o pode estar vazio!');
                        input.value = categoriaOriginal;
                        return;
                    }
                    
                    if (novoNome === categoriaOriginal) {
                        alert('‚ÑπÔ∏è O nome n√£o foi alterado!');
                        return;
                    }
                    
                    console.log('‚úÖ Confirma√ß√£o ser√° exibida...');
                    if (confirm(`Renomear "${categoriaOriginal}" ‚Üí "${novoNome}"?`)) {
                        console.log('‚úÖ USU√ÅRIO CONFIRMOU! Chamando executarRenomeacao...');
                        executarRenomeacao(categoriaOriginal, novoNome);
                    } else {
                        console.log('‚ùå Usu√°rio cancelou a renomea√ß√£o');
                        input.value = categoriaOriginal;
                    }
                });
                
                // Permitir salvar com Enter
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        console.log('‚å®Ô∏è ENTER pressionado! Clicando no bot√£o salvar...');
                        btnSalvar.click();
                    }
                });
                
                div.appendChild(numero);
                div.appendChild(input);
                div.appendChild(btnSalvar);
                listaCategorias.appendChild(div);
                
                console.log(`‚úÖ Categoria ${i} adicionada ao DOM`);
            });
            
            // Evento para fechar modal
            document.getElementById('btnFecharModal').addEventListener('click', function() {
                modal.remove();
            });
        };
        
        function executarRenomeacao(categoriaAntiga, novoNome) {
            console.log('===== INICIANDO RENOMEA√á√ÉO =====');
            console.log('üîÑ Categoria Antiga:', categoriaAntiga);
            console.log('‚ú® Novo Nome:', novoNome);
            console.log('üì¶ Total de produtos:', PRODUTOS.length);
            
            // Contar quantos produtos ser√£o alterados
            let contador = 0;
            let produtosAlterados = [];
            
            PRODUTOS.forEach((p, idx) => {
                console.log(`Produto ${idx}: cat="${p.cat}" (comparando com "${categoriaAntiga}")`);
                if (p.cat === categoriaAntiga) {
                    console.log(`  ‚úÖ MATCH! Alterando para "${novoNome}"`);
                    p.cat = novoNome;
                    contador++;
                    produtosAlterados.push(p.nome);
                }
            });
            
            console.log(`üìù ${contador} produtos alterados:`, produtosAlterados);
            
            if (contador === 0) {
                alert('‚ö†Ô∏è ATEN√á√ÉO: Nenhum produto foi encontrado com essa categoria!\n\nCategoria buscada: "' + categoriaAntiga + '"');
                console.log('‚ùå NENHUM PRODUTO ALTERADO!');
                return;
            }
            
            // Salvar e atualizar tudo
            console.log('üíæ Salvando no localStorage...');
            salvarProdutosLocalStorage();
            
            console.log('üîÑ Renderizando lista de produtos...');
            renderizarListaProdutos();
            
            console.log('üîÑ Renderizando tabela...');
            renderizarTabela();
            
            console.log('üîÑ Atualizando contador...');
            atualizarContadorProdutos();
            
            console.log('üîÑ Inicializando selects (dropdowns de cirurgias)...');
            inicializarSelects(); // CR√çTICO: Recarregar dropdowns de cirurgias
            
            // Recarregar cirurgias selecionadas para atualizar a tabela
            console.log('üîÑ Recarregando cirurgias selecionadas...');
            for (let i = 1; i <= 6; i++) {
                const select = document.getElementById(`cirurgia${i}`);
                if (select && select.value) {
                    console.log(`  Recarregando cirurgia ${i}`);
                    carregarCirurgia(i);
                }
            }
            
            // Fechar modal atual
            const modal = document.getElementById('modalEditarCategorias');
            if (modal) {
                modal.remove();
                console.log('‚úÖ Modal fechado');
            }
            
            console.log('===== RENOMEA√á√ÉO CONCLU√çDA =====');
            alert(`‚úÖ Categoria renomeada com sucesso!\n\n"${categoriaAntiga}" ‚Üí "${novoNome}"\n\n${contador} produtos atualizados:\n${produtosAlterados.slice(0, 5).join('\n')}${contador > 5 ? '\n...' : ''}`);
        }
        
        function renomearCategoria(categoriaAntiga) {
            const novoNome = prompt(`‚úèÔ∏è Renomear "${categoriaAntiga}" para:`);
            if (!novoNome) return;
            
            const novoNomeUpper = novoNome.trim().toUpperCase();
            if (!novoNomeUpper) {
                alert('‚ùå Nome n√£o pode estar vazio!');
                return;
            }
            
            if (confirm(`Renomear "${categoriaAntiga}" ‚Üí "${novoNomeUpper}"?`)) {
                PRODUTOS.forEach(p => {
                    if (p.cat === categoriaAntiga) {
                        p.cat = novoNomeUpper;
                    }
                });
                
                salvarProdutosLocalStorage();
                renderizarListaProdutos();
                renderizarTabela();
                atualizarContadorProdutos();
                
                alert('‚úÖ Categoria renomeada com sucesso!');
            }
        }
        
        function reordenarCategorias(categorias) {
            const ordem = prompt(
                'üìä REORDENAR CATEGORIAS\n\n' +
                'Categorias atuais:\n' + 
                categorias.map((c, i) => `${i+1}. ${c}`).join('\n') + 
                '\n\n' +
                'Digite a NOVA ORDEM dos n√∫meros separados por v√≠rgula\n' +
                'Exemplo: 2,1,3,4 (troca posi√ß√£o da 1¬™ com a 2¬™)'
            );
            
            if (!ordem) return;
            
            try {
                const novaOrdem = ordem.split(',').map(n => parseInt(n.trim()) - 1);
                
                // Validar
                if (novaOrdem.length !== categorias.length) {
                    alert('‚ùå Quantidade de n√∫meros diferente da quantidade de categorias!');
                    return;
                }
                
                if (novaOrdem.some(n => n < 0 || n >= categorias.length)) {
                    alert('‚ùå N√∫mero inv√°lido na ordem!');
                    return;
                }
                
                // Criar mapa de √≠ndices antigos para novos
                const mapaIndices = {};
                PRODUTOS.forEach((prod, idx) => {
                    mapaIndices[idx] = idx;
                });
                
                // Reordenar
                const categoriasOrdenadas = novaOrdem.map(i => categorias[i]);
                
                // Criar mapa de prioridade
                const prioridades = {};
                categoriasOrdenadas.forEach((cat, idx) => {
                    prioridades[cat] = idx;
                });
                
                // PASSO 1: Guardar ordem antiga dos produtos
                const produtosAntigos = [...PRODUTOS];
                
                // PASSO 2: Ordenar produtos no array principal
                PRODUTOS.sort((a, b) => {
                    const prioA = prioridades[a.cat] ?? 999;
                    const prioB = prioridades[b.cat] ?? 999;
                    return prioA - prioB;
                });
                
                // PASSO 3: Criar mapa de convers√£o de √≠ndices (antigo -> novo)
                const conversaoIndices = [];
                produtosAntigos.forEach((prodAntigo, idxAntigo) => {
                    const idxNovo = PRODUTOS.findIndex(p => 
                        p.cat === prodAntigo.cat && 
                        p.nome === prodAntigo.nome && 
                        p.valor === prodAntigo.valor
                    );
                    conversaoIndices[idxAntigo] = idxNovo;
                });
                
                // PASSO 4: Reordenar array de produtos dentro de CADA CIRURGIA
                Object.keys(CIRURGIAS_DB).forEach(key => {
                    const cirurgia = CIRURGIAS_DB[key];
                    if (cirurgia.produtos && cirurgia.produtos.length > 0) {
                        const produtosReordenados = new Array(PRODUTOS.length).fill(0);
                        
                        cirurgia.produtos.forEach((qtd, idxAntigo) => {
                            const idxNovo = conversaoIndices[idxAntigo];
                            if (idxNovo !== undefined && idxNovo >= 0) {
                                produtosReordenados[idxNovo] = qtd;
                            }
                        });
                        
                        cirurgia.produtos = produtosReordenados;
                    }
                });
                
                // PASSO 5: Salvar tudo
                salvarProdutosLocalStorage();
                localStorage.setItem('CIRURGIAS_DB', JSON.stringify(CIRURGIAS_DB));
                
                // PASSO 6: Atualizar interface
                renderizarListaProdutos();
                renderizarTabela();
                inicializarSelects();
                
                alert('‚úÖ Categorias reordenadas com sucesso!\n\nNova ordem:\n' + categoriasOrdenadas.join('\n') + '\n\n‚ö†Ô∏è Os produtos foram reordenados em todas as cirurgias tamb√©m!');
                
            } catch (e) {
                alert('‚ùå Erro ao processar ordem! Use apenas n√∫meros separados por v√≠rgula.\n\nErro: ' + e.message);
                console.error('Erro ao reordenar:', e);
            }
        }
        
        // ==================== BACKUP COMPLETO ====================
        
        function fazerBackupCompleto() {
            try {
                console.log('üì¶ Iniciando backup completo...');
                
                const backup = {
                    versao: '1.0',
                    data: new Date().toISOString(),
                    produtos: PRODUTOS,
                    cirurgias: CIRURGIAS_DB,
                    equipes: EQUIPES_DB,
                    implantes: IMPLANTES_DB,
                    configPagamento: {
                        taxaVistaNormal: parseFloat(document.getElementById('cfg_taxa_vista_normal')?.value || 0),
                        taxaParcelado: parseFloat(document.getElementById('cfg_taxa_parcelado')?.value || 0),
                        arredondamento: parseInt(document.getElementById('cfg_arredondamento')?.value || 100),
                        entradaPercentual: parseFloat(document.getElementById('cfg_entrada_percentual')?.value || 30),
                        numParcelas: parseInt(document.getElementById('cfg_num_parcelas')?.value || 10),
                        descontoVista: parseFloat(document.getElementById('cfg_desconto_vista')?.value || 5)
                    },
                    configProfissionais: typeof getConfigProfissionais === 'function' ? getConfigProfissionais() : {},
                    configEstabelecimento: typeof getConfigEstabelecimento === 'function' ? getConfigEstabelecimento() : {}
                };
                
                console.log('‚úÖ Backup criado:', backup);
                
                const json = JSON.stringify(backup, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                const dataHora = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);
                a.download = `backup-completo-${dataHora}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                console.log('‚úÖ Download iniciado!');
                alert('‚úÖ Backup completo baixado com sucesso!');
            } catch (erro) {
                console.error('‚ùå ERRO no backup:', erro);
                alert('‚ùå ERRO ao criar backup:\n\n' + erro.message + '\n\nVeja o console (F12) para mais detalhes.');
            }
        }
        
        function mostrarRestaurarBackup() {
            document.getElementById('areaRestaurarBackup').style.display = 'block';
        }
        
        function fecharRestaurarBackup() {
            document.getElementById('areaRestaurarBackup').style.display = 'none';
            document.getElementById('jsonBackupRestaurar').value = '';
        }
        
        function restaurarBackupCompleto() {
            const json = document.getElementById('jsonBackupRestaurar').value.trim();
            
            if (!json) {
                alert('‚ùå Cole o JSON do backup!');
                return;
            }
            
            try {
                const backup = JSON.parse(json);
                
                // Validar estrutura b√°sica
                if (!backup.produtos || !backup.cirurgias || !backup.equipes || !backup.implantes) {
                    throw new Error('Backup inv√°lido - faltam dados!');
                }
                
                if (!confirm('‚ö†Ô∏è ATEN√á√ÉO!\n\nIsso vai SUBSTITUIR TODOS os dados atuais!\n\nProdutos, cirurgias, equipes, implantes, configura√ß√µes...\n\nTem certeza?')) {
                    return;
                }
                
                // Restaurar tudo
                PRODUTOS = backup.produtos;
                CIRURGIAS_DB = backup.cirurgias;
                EQUIPES_DB = backup.equipes;
                IMPLANTES_DB = backup.implantes;
                
                // Salvar no localStorage
                localStorage.setItem('PRODUTOS_DB', JSON.stringify(PRODUTOS));
                localStorage.setItem('CIRURGIAS_DB', JSON.stringify(CIRURGIAS_DB));
                localStorage.setItem('IMPLANTES_DB', JSON.stringify(IMPLANTES_DB));
                // EQUIPES_DB n√£o tem localStorage nativo, mas vou adicionar
                localStorage.setItem('EQUIPES_DB', JSON.stringify(EQUIPES_DB));
                
                // Restaurar configura√ß√µes
                if (backup.configPagamento) {
                    localStorage.setItem('config_pagamento', JSON.stringify(backup.configPagamento));
                    document.getElementById('cfg_taxa_vista_normal').value = backup.configPagamento.taxaVistaNormal || 0;
                    document.getElementById('cfg_taxa_parcelado').value = backup.configPagamento.taxaParcelado || 0;
                    document.getElementById('cfg_arredondamento').value = backup.configPagamento.arredondamento || 100;
                    document.getElementById('cfg_entrada_percentual').value = backup.configPagamento.entradaPercentual || 30;
                    document.getElementById('cfg_num_parcelas').value = backup.configPagamento.numParcelas || 10;
                    document.getElementById('cfg_desconto_vista').value = backup.configPagamento.descontoVista || 5;
                }
                
                if (backup.configProfissionais) {
                    localStorage.setItem('config_profissionais', JSON.stringify(backup.configProfissionais));
                }
                
                if (backup.configEstabelecimento) {
                    localStorage.setItem('config_estabelecimento', JSON.stringify(backup.configEstabelecimento));
                }
                
                // Atualizar interface
                renderizarListaCirurgias();
                renderizarListaEquipes();
                renderizarListaImplantesCadastro();
                renderizarListaProdutos();
                inicializarSelects();
                atualizarContadorProdutos();
                carregarConfigPagamento();
                carregarConfigProfissionais();
                carregarConfigEstabelecimento();
                
                fecharRestaurarBackup();
                
                alert('‚úÖ BACKUP RESTAURADO COM SUCESSO!\n\n' + 
                      `${PRODUTOS.length} produtos\n` +
                      `${Object.keys(CIRURGIAS_DB).length} cirurgias\n` +
                      `${EQUIPES_DB.filter(e => e.ativo).length} equipes\n` +
                      `${IMPLANTES_DB.filter(i => i.ativo).length} implantes`);
                      
            } catch (e) {
                alert('‚ùå ERRO ao restaurar backup!\n\n' + e.message);
                console.error('Erro:', e);
            }
        }
        
        // ==================== CONFIGURA√á√ïES DE PAGAMENTO ====================
        
        function salvarConfigPagamento(event) {
            const btn = event ? event.target : document.querySelector('[onclick*="salvarConfigPagamento"]');
            const textoOriginal = btn.innerHTML;
            
            // Mostrar "Salvando..."
            btn.disabled = true;
            btn.innerHTML = '‚è≥ Salvando...';
            btn.style.opacity = '0.7';
            
            const config = {
                taxaVistaNormal: parseFloat(document.getElementById('cfg_taxa_vista_normal').value) || 0,
                taxaParcelado: parseFloat(document.getElementById('cfg_taxa_parcelado').value) || 0,
                arredondamento: parseInt(document.getElementById('cfg_arredondamento').value) || 100,
                entradaPercentual: parseFloat(document.getElementById('cfg_entrada_percentual').value) || 30,
                numParcelas: parseInt(document.getElementById('cfg_num_parcelas').value) || 12
            };
            
            localStorage.setItem('config_pagamento', JSON.stringify(config));
            
            // RECALCULAR OR√áAMENTO COM NOVAS CONFIGURA√á√ïES
            recalcularTotais();
            simularFormasPagamento();
            
            // Mostrar sucesso
            setTimeout(() => {
                btn.innerHTML = '‚úÖ Salvo com sucesso!';
                btn.style.background = '#28a745';
                btn.style.opacity = '1';
                
                // Voltar ao normal ap√≥s 2 segundos
                setTimeout(() => {
                    btn.innerHTML = textoOriginal;
                    btn.style.background = '';
                    btn.disabled = false;
                }, 2000);
            }, 400);
        }
        
        function carregarConfigPagamento() {
            const configSalva = localStorage.getItem('config_pagamento');
            if (configSalva) {
                const config = JSON.parse(configSalva);
                document.getElementById('cfg_taxa_vista_normal').value = config.taxaVistaNormal || 3.99;
                document.getElementById('cfg_taxa_parcelado').value = config.taxaParcelado || 5.99;
                document.getElementById('cfg_arredondamento').value = config.arredondamento || 100;
                document.getElementById('cfg_entrada_percentual').value = config.entradaPercentual || 30;
                document.getElementById('cfg_num_parcelas').value = config.numParcelas || 12;
            }
            simularFormasPagamento();
        }
        
        function usarValorOrcamentoAtual() {
            // Pegar o total do or√ßamento atual
            const totalOrcamento = estadoGlobal.total || 0;
            
            if (totalOrcamento === 0) {
                alert('‚ö†Ô∏è Nenhum or√ßamento calculado ainda!\n\nPreencha as abas (Cirurgias, Produtos, Profissionais, etc.) primeiro para gerar um or√ßamento.');
                return;
            }
            
            // Aplicar arredondamento
            const arredondamento = parseInt(document.getElementById('cfg_arredondamento').value) || 100;
            const valorArredondado = Math.round(totalOrcamento / arredondamento) * arredondamento;
            
            // Preencher no campo
            document.getElementById('valor_teste_pagamento').value = valorArredondado;
            
            // Atualizar simula√ß√£o
            simularFormasPagamento();
            
            // Feedback visual
            alert(`‚úÖ Valor do or√ßamento carregado!\n\nTotal: ${formatarMoeda(totalOrcamento)}\nArredondado: ${formatarMoeda(valorArredondado)}`);
        }
        
        function atualizarSimuladorEOrcamento() {
            // Atualizar simulador
            simularFormasPagamento();
            
            // Atualizar or√ßamento se existir
            if (estadoGlobal.total && estadoGlobal.total > 0) {
                recalcularTotais();
            }
        }
        
        function simularFormasPagamento() {
            const valorBase = parseFloat(document.getElementById('valor_teste_pagamento').value) || 0;
            
            if (valorBase === 0) {
                document.getElementById('resultado_simulacao').innerHTML = '<div style="grid-column: 1/-1; color: #6c757d; text-align: center; padding: 10px;">Digite um valor para simular</div>';
                return;
            }
            
            const taxaVistaNormal = parseFloat(document.getElementById('cfg_taxa_vista_normal').value) || 0;
            const taxaParcelado = parseFloat(document.getElementById('cfg_taxa_parcelado').value) || 0;
            const arredondamento = parseInt(document.getElementById('cfg_arredondamento').value) || 1;
            const entradaPercentual = parseFloat(document.getElementById('cfg_entrada_percentual').value) || 30;
            const numParcelas = parseInt(document.getElementById('cfg_num_parcelas').value) || 12;
            
            // √Ä VISTA COM DESCONTO (valor base - sem altera√ß√£o)
            const valorVistaDesconto = Math.round(valorBase / arredondamento) * arredondamento;
            
            // √Ä VISTA NORMAL (base + taxa)
            const valorComTaxaVista = valorBase * (1 + taxaVistaNormal / 100);
            const valorVistaNormal = Math.round(valorComTaxaVista / arredondamento) * arredondamento;
            
            // PARCELADO (base + taxa + entrada + parcelas)
            const valorComTaxaParcelado = valorBase * (1 + taxaParcelado / 100);
            const valorParceladoTotal = Math.round(valorComTaxaParcelado / arredondamento) * arredondamento;
            const valorEntrada = Math.round((valorParceladoTotal * entradaPercentual / 100) / arredondamento) * arredondamento;
            const valorRestante = valorParceladoTotal - valorEntrada;
            const valorParcela = valorRestante / numParcelas;
            
            const html = `
                <div style="background: #d4edda; padding: 10px; border-radius: 6px; border: 2px solid #28a745;">
                    <div style="font-weight: 600; color: #155724; margin-bottom: 4px;">üíö √Ä Vista Desconto</div>
                    <div style="font-size: 16px; font-weight: 700; color: #28a745;">${formatarMoeda(valorVistaDesconto)}</div>
                    <div style="font-size: 10px; color: #155724; margin-top: 4px;">Base arredondada (sem taxa)</div>
                </div>
                
                <div style="background: #d1ecf1; padding: 10px; border-radius: 6px; border: 2px solid #17a2b8;">
                    <div style="font-weight: 600; color: #0c5460; margin-bottom: 4px;">üíô √Ä Vista Normal</div>
                    <div style="font-size: 16px; font-weight: 700; color: #17a2b8;">${formatarMoeda(valorVistaNormal)}</div>
                    <div style="font-size: 10px; color: #0c5460; margin-top: 4px;">Base + ${taxaVistaNormal.toFixed(2)}% = ${formatarMoeda(valorComTaxaVista)} ‚Üí arredondado</div>
                </div>
                
                <div style="background: #fff3cd; padding: 10px; border-radius: 6px; border: 2px solid #ffc107;">
                    <div style="font-weight: 600; color: #856404; margin-bottom: 4px;">üíõ Parcelado</div>
                    <div style="font-size: 16px; font-weight: 700; color: #ffc107;">${formatarMoeda(valorParceladoTotal)}</div>
                    <div style="font-size: 10px; color: #856404; margin-top: 4px;">
                        Base + ${taxaParcelado.toFixed(2)}% = ${formatarMoeda(valorComTaxaParcelado)} ‚Üí arredondado<br>
                        Entrada ${entradaPercentual}% (${formatarMoeda(valorEntrada)}) + ${numParcelas}√ó ${formatarMoeda(valorParcela)}
                    </div>
                </div>
            `;
            
            document.getElementById('resultado_simulacao').innerHTML = html;
        }
        
        // ==================== CONFIGURA√á√ïES DE PROFISSIONAIS ====================
        
        function salvarConfigProfissionais(event) {
            const btn = event ? event.target : document.querySelector('[onclick*="salvarConfigProfissionais"]');
            const textoOriginal = btn.innerHTML;
            
            // Mostrar "Salvando..."
            btn.disabled = true;
            btn.innerHTML = '‚è≥ Salvando...';
            btn.style.opacity = '0.7';
            
            const config = {
                cirurgiao: {
                    base: parseFloat(document.getElementById('cfg_cir_base').value) || 5500,
                    por15min: parseFloat(document.getElementById('cfg_cir_15min').value) || 400,
                    retornos: parseFloat(document.getElementById('cfg_cir_retornos').value) || 800,
                    plus: parseFloat(document.getElementById('cfg_cir_plus').value) || 800
                },
                anestesista: {
                    base: parseFloat(document.getElementById('cfg_anes_base').value) || 1350,
                    por15min: parseFloat(document.getElementById('cfg_anes_15min').value) || 110
                },
                auxiliar: {
                    base: parseFloat(document.getElementById('cfg_aux_base').value) || 1000,
                    por30min: parseFloat(document.getElementById('cfg_aux_30min').value) || 185
                },
                instrumentadora: {
                    base: parseFloat(document.getElementById('cfg_inst_base').value) || 430,
                    por2h: parseFloat(document.getElementById('cfg_inst_2h').value) || 120
                }
            };
            
            localStorage.setItem('config_profissionais', JSON.stringify(config));
            
            // Atualizar labels na aba Profissionais
            atualizarLabelsProfissionais();
            
            // Recalcular profissionais com novos valores
            calcularCirurgiao();
            calcularProfissionais();
            
            // Mostrar sucesso
            setTimeout(() => {
                btn.innerHTML = '‚úÖ Salvo com sucesso!';
                btn.style.background = '#28a745';
                btn.style.opacity = '1';
                
                // Voltar ao normal ap√≥s 2 segundos
                setTimeout(() => {
                    btn.innerHTML = textoOriginal;
                    btn.style.background = '';
                    btn.disabled = false;
                }, 2000);
            }, 400);
        }
        
        function carregarConfigProfissionais() {
            const configSalva = localStorage.getItem('config_profissionais');
            if (configSalva) {
                const config = JSON.parse(configSalva);
                document.getElementById('cfg_cir_base').value = config.cirurgiao.base;
                document.getElementById('cfg_cir_15min').value = config.cirurgiao.por15min;
                document.getElementById('cfg_cir_retornos').value = config.cirurgiao.retornos;
                document.getElementById('cfg_cir_plus').value = config.cirurgiao.plus;
                document.getElementById('cfg_anes_base').value = config.anestesista.base;
                document.getElementById('cfg_anes_15min').value = config.anestesista.por15min;
                document.getElementById('cfg_aux_base').value = config.auxiliar.base;
                document.getElementById('cfg_aux_30min').value = config.auxiliar.por30min;
                document.getElementById('cfg_inst_base').value = config.instrumentadora.base;
                document.getElementById('cfg_inst_2h').value = config.instrumentadora.por2h;
            }
            
            // Atualizar labels din√¢micos na aba Profissionais
            atualizarLabelsProfissionais();
        }
        
        function atualizarLabelsProfissionais() {
            const cfg = getConfigProfissionais();
            
            // Atualizar labels Retornos e PLUS
            const labelRetornos = document.getElementById('labelRetornos');
            const labelPlus = document.getElementById('labelPlus');
            
            if (labelRetornos) {
                labelRetornos.textContent = `Retornos (${formatarMoeda(cfg.cirurgiao.retornos)})`;
            }
            
            if (labelPlus) {
                labelPlus.textContent = `PLUS (${formatarMoeda(cfg.cirurgiao.plus)})`;
            }
        }
        
        function getConfigProfissionais() {
            const configSalva = localStorage.getItem('config_profissionais');
            if (configSalva) {
                return JSON.parse(configSalva);
            }
            return {
                cirurgiao: { base: 5500, por15min: 400, retornos: 800, plus: 800 },
                anestesista: { base: 1350, por15min: 110 },
                auxiliar: { base: 1000, por30min: 185 },
                instrumentadora: { base: 430, por2h: 120 }
            };
        }
        
        // ===== CONFIGURA√á√ïES DO ESTABELECIMENTO =====
        function salvarConfigEstabelecimento(event) {
            const btn = event ? event.target : document.querySelector('[onclick*="salvarConfigEstabelecimento"]');
            const textoOriginal = btn.innerHTML;
            
            // Mostrar "Salvando..."
            btn.disabled = true;
            btn.innerHTML = '‚è≥ Salvando...';
            btn.style.opacity = '0.7';
            
            const config = {
                local: parseFloat(document.getElementById('cfg_int_local').value) || 2720,
                localExtra: parseFloat(document.getElementById('cfg_int_local_extra').value) || 234,
                peridural: parseFloat(document.getElementById('cfg_int_peridural').value) || 2909,
                periduralExtra: parseFloat(document.getElementById('cfg_int_peridural_extra').value) || 234,
                geral: parseFloat(document.getElementById('cfg_int_geral').value) || 3362,
                geralExtra: parseFloat(document.getElementById('cfg_int_geral_extra').value) || 268,
                sem: parseFloat(document.getElementById('cfg_int_sem').value) || 2000,
                ambulatorio: parseFloat(document.getElementById('cfg_int_ambulatorio').value) || 1200
            };
            
            localStorage.setItem('config_estabelecimento', JSON.stringify(config));
            
            // Atualizar select de tipo de interna√ß√£o
            atualizarOpcoesInternacao();
            
            // CR√çTICO: Recalcular combo ANTES da interna√ß√£o
            calcularCombo();
            
            // Recalcular interna√ß√£o se j√° tiver algo selecionado
            if (document.getElementById('tipoInternacao').value) {
                calcularInternacao();
            }
            
            // Mostrar sucesso
            setTimeout(() => {
                btn.innerHTML = '‚úÖ Salvo com sucesso!';
                btn.style.background = '#28a745';
                btn.style.opacity = '1';
                
                // Voltar ao normal ap√≥s 2 segundos
                setTimeout(() => {
                    btn.innerHTML = textoOriginal;
                    btn.style.background = '';
                    btn.disabled = false;
                }, 2000);
            }, 400);
        }
        
        function carregarConfigEstabelecimento() {
            const configSalva = localStorage.getItem('config_estabelecimento');
            if (configSalva) {
                const config = JSON.parse(configSalva);
                document.getElementById('cfg_int_local').value = config.local;
                document.getElementById('cfg_int_local_extra').value = config.localExtra || 234;
                document.getElementById('cfg_int_peridural').value = config.peridural;
                document.getElementById('cfg_int_peridural_extra').value = config.periduralExtra || 234;
                document.getElementById('cfg_int_geral').value = config.geral;
                document.getElementById('cfg_int_geral_extra').value = config.geralExtra || 268;
                document.getElementById('cfg_int_sem').value = config.sem;
                document.getElementById('cfg_int_ambulatorio').value = config.ambulatorio;
            }
            
            // Atualizar op√ß√µes do select
            atualizarOpcoesInternacao();
        }
        
        function getConfigEstabelecimento() {
            const configSalva = localStorage.getItem('config_estabelecimento');
            if (configSalva) {
                return JSON.parse(configSalva);
            }
            return {
                local: 2720,
                localExtra: 234,
                peridural: 2909,
                periduralExtra: 234,
                geral: 3362,
                geralExtra: 268,
                sem: 2000,
                ambulatorio: 1200
            };
        }
        
        function atualizarOpcoesInternacao() {
            const cfg = getConfigEstabelecimento();
            const select = document.getElementById('tipoInternacao');
            
            if (select) {
                select.innerHTML = `
                    <option value="">Selecione...</option>
                    <option value="local">COM Interna√ß√£o: Anestesia Local ¬± Seda√ß√£o (Base: ${formatarMoeda(cfg.local)} + ${formatarMoeda(cfg.localExtra)}/30min)</option>
                    <option value="peridural">COM Interna√ß√£o: Peridural/Raqui ¬± Seda√ß√£o (Base: ${formatarMoeda(cfg.peridural)} + ${formatarMoeda(cfg.periduralExtra)}/30min)</option>
                    <option value="geral">COM Interna√ß√£o: Anestesia Geral + TOT (Base: ${formatarMoeda(cfg.geral)} + ${formatarMoeda(cfg.geralExtra)}/30min)</option>
                    <option value="sem">SEM Interna√ß√£o: Anestesia Local (Fixo: ${formatarMoeda(cfg.sem)})</option>
                    <option value="ambulatorio">Ambulat√≥rio: Anestesia Local (Fixo: ${formatarMoeda(cfg.ambulatorio)})</option>
                `;
            }
        }
    </script>
    
    <!-- MODAL EDITAR PRODUTO -->
    <div id="modalEditarProduto" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 500px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
            <h3 style="margin: 0 0 20px 0; color: #667eea;">‚úèÔ∏è Editar Produto</h3>
            
            <div class="form-group" style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Categoria:</label>
                <input type="text" id="edit_categoria" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div class="form-group" style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Nome do Produto:</label>
                <input type="text" id="edit_nome" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div class="form-group" style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Regra:</label>
                <select id="edit_regra" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
                    <option value="soma">SOMA</option>
                    <option value="max">MAX</option>
                </select>
            </div>
            
            <div class="form-group" style="margin-bottom: 20px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Valor (R$):</label>
                <input type="number" id="edit_valor" step="0.01" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div class="form-group" style="margin-bottom: 20px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">üí¨ Observa√ß√£o (opcional):</label>
                <textarea id="edit_obs" rows="2" placeholder="Ex: Usar apenas em cirurgias maiores..." style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; resize: vertical; font-family: inherit; font-size: 13px;"></textarea>
                <small style="color: #6c757d; font-size: 11px;">Esta observa√ß√£o aparecer√° como tooltip ao passar o mouse</small>
            </div>
            
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="fecharModalEditarProduto()" style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Cancelar
                </button>
                <button onclick="salvarEdicaoProduto()" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    ‚úÖ Salvar
                </button>
            </div>
        </div>
    </div>
    
    <!-- MODAL CIRURGIA -->
    <div id="modalCirurgiaSimples" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 450px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
            <h3 style="margin: 0 0 20px 0; color: #667eea;">üî™ Adicionar Cirurgia</h3>
            
            <div style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Nome da Cirurgia:</label>
                <input type="text" id="nova_cirurgia_nome" placeholder="Ex: Mamoplastia" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Tempo (horas):</label>
                <input type="number" id="nova_cirurgia_tempo" step="0.5" placeholder="2.5" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="fecharModalCirurgiaSimples()" style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Cancelar
                </button>
                <button onclick="salvarNovaCirurgia()" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    ‚úÖ Salvar
                </button>
            </div>
        </div>
    </div>
    
    <!-- MODAL EQUIPE -->
    <div id="modalEquipeSimples" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 450px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
            <h3 id="tituloModalEquipe" style="margin: 0 0 20px 0; color: #667eea;">üë• Adicionar Equipe</h3>
            
            <div style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Nome da Equipe:</label>
                <input type="text" id="modal_equipe_nome" placeholder="Ex: Cirurgi√£o Cardiovascular" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Valor (R$):</label>
                <input type="number" id="modal_equipe_valor" step="0.01" placeholder="0.00" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px;">
            </div>
            
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="fecharModalEquipeSimples()" style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    Cancelar
                </button>
                <button onclick="salvarModalEquipe()" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    ‚úÖ Salvar
                </button>
            </div>
        </div>
    </div>
    
    <!-- MODAL CONFIRMAR EXCLUS√ÉO -->
    <div id="modalConfirmarExclusao" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 450px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); border-top: 4px solid #dc3545;">
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 48px; color: #dc3545; margin-bottom: 10px;">‚ö†Ô∏è</div>
                <h3 style="margin: 0 0 10px 0; color: #dc3545; font-size: 20px;">CONFIRMAR EXCLUS√ÉO</h3>
                <p id="mensagemExclusao" style="color: #495057; margin: 0; font-size: 14px;"></p>
            </div>
            
            <div style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 6px; padding: 12px; margin-bottom: 20px;">
                <p style="margin: 0; font-size: 13px; color: #856404;">
                    ‚ö†Ô∏è <strong>Aten√ß√£o:</strong> Esta a√ß√£o n√£o pode ser desfeita!
                </p>
            </div>
            
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="fecharModalExclusao()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                    Cancelar
                </button>
                <button onclick="confirmarExclusao()" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                    üóëÔ∏è Sim, Excluir
                </button>
            </div>
        </div>
    </div>
    <!-- MODAL DE OBSERVA√á√ÉO DO PRODUTO -->
    <div id="modalObservacao" class="modal-obs-overlay" onclick="fecharModalObservacao()">
        <div class="modal-obs-box" onclick="event.stopPropagation()">
            <div class="modal-obs-header">
                <span class="modal-obs-icon">üí¨</span>
                <div class="modal-obs-title" id="modalObsNomeProduto">Nome do Produto</div>
                <button onclick="fecharModalObservacao()" style="background: none; border: none; font-size: 24px; color: #6c757d; cursor: pointer; padding: 0; width: 30px; height: 30px;">√ó</button>
            </div>
            <div class="modal-obs-content" id="modalObsTexto">
                Observa√ß√£o do produto
            </div>
            <div class="modal-obs-footer">
                <button onclick="fecharModalObservacao()" class="btn btn-primary" style="padding: 10px 24px;">
                    ‚úì Entendi
                </button>
            </div>
        </div>
    </div>
</body>
</html>
